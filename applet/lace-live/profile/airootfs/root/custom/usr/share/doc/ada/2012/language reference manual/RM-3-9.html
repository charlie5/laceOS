<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
"http://www.w3.org/TR/html4/loose.dtd">
<HTML>
<HEAD>
    <TITLE>Tagged Types and Type Extensions</TITLE>
    <META http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
    <META NAME="Author" CONTENT="JTC1/SC22/WG9/ARG, by Randall Brukardt, ARG Editor">
    <META NAME="GENERATOR" CONTENT="Arm_Form.Exe, Ada Reference Manual generator">
    <STYLE type="text/css">
    H4.centered {text-align: center}
    SPAN.swiss {font-family: Arial, Helvetica, sans-serif; font-size: 92%}
    SPAN.roman {font-family: "Times New Roman", Times, serif}
    DIV.paranum {float: left; font-family: Arial, Helvetica, sans-serif; font-size: 64%; width: 2.8em; margin-left: -0.4em; margin-right: -3.0em; margin-top: 0.2em}
    TT {font-family: "Courier New", monospace}
    DT {display: compact}
    A.Bar:link {font-family: Arial, Helvetica, sans-serif; font-style: normal; text-decoration: none; color: rgb(204,204,51)}
    A.Bar:visited {font-family: Arial, Helvetica, sans-serif; font-style: normal; text-decoration: none; color: rgb(204,204,51)}
    DIV.Normal {font-family: "Times New Roman", Times, serif; line-height: 122%; margin-left: 1.2em; margin-bottom: 0.6em}
    DIV.Notes {font-family: "Times New Roman", Times, serif; font-size: 80%; line-height: 122%; margin-left: 3.7em; margin-bottom: 0.6em}
    DIV.NotesHeader {font-family: "Times New Roman", Times, serif; font-size: 80%; line-height: 122%; margin-left: 3.7em}
    DIV.Examples {font-family: "Courier New", monospace; font-size: 90%; line-height: 122%; margin-left: 3.4em; margin-bottom: 0.6em}
    DIV.Bulleted-NoPrefix {font-family: "Times New Roman", Times, serif; line-height: 122%; margin-left: 3.2em; margin-right: 2.0em; margin-top: 0em; margin-bottom: 0.5em}
    DIV.Bulleted {font-family: "Times New Roman", Times, serif; line-height: 122%; margin-left: 3.2em; margin-right: 2.0em; margin-top: 0em; margin-bottom: 0.5em; display: list-item; list-style-type: disc}
    DIV.WideHanging-Body {font-family: "Times New Roman", Times, serif; line-height: 122%; margin-left: 7.2em; margin-top: 0em; margin-bottom: 0.6em}
    DIV.WideHanging-Term {float: left; font-family: "Times New Roman", Times, serif; line-height: 122%; margin-left: 1.2em; margin-top: 0em; margin-bottom: 0em}
    </STYLE>
</HEAD>
<BODY TEXT="#000000" BGCOLOR="#FFFFF0" LINK="#000080" VLINK="#330033" ALINK="#0000FF">
<DIV><SPAN Style="font-size:200%; color: rgb(0,0,153)"><B>Ada Reference Manual</B></SPAN> &mdash; <A HREF="RM-TTL.html"><B>Legal Information</B></A></DIV>
<div style="margin-top: 0.6em; margin-bottom: 0.0em"><A HREF="RM-TOC.html"><IMG SRC="cont.gif" ALT="Contents" BORDER=0></A>&nbsp;
&nbsp;<A HREF="RM-0-5.html"><IMG SRC="index.gif" ALT="Index" BORDER=0></A>&nbsp;
&nbsp;<A HREF="RM-STDS.html"><IMG SRC="lib.gif" ALT="References" BORDER=0></A>&nbsp;
&nbsp;<A HREF="RM-SRCH.html"><IMG SRC="find.gif" ALT="Search" BORDER=0></A>&nbsp;
&nbsp;<A HREF="RM-3-8-1.html"><IMG SRC="prev.gif" ALT="Previous" BORDER=0></A>&nbsp;
&nbsp;<A HREF="RM-3-9-1.html"><IMG SRC="next.gif" ALT="Next" BORDER=0></A>&nbsp;
</div>
<HR>
<H1>3.9 Tagged Types and Type Extensions</H1>
<div class="paranum"><a name="p1">1</a></div>
<div class="Normal"><A NAME="I2079"></A><A NAME="I2080"></A><A NAME="I2081"></A><A NAME="I2082"></A><A NAME="I2083"></A>Tagged 
types and type extensions support object-oriented programming, based 
on inheritance with extension and run-time polymorphism via <I>dispatching 
operations</I>. <A NAME="I2084"></A><A NAME="I2085"></A><A NAME="I2086"></A></div>

<H4 Class="centered">Static Semantics</H4>
<div class="paranum"><a name="p2">2/2</a></div>
<div class="Normal"><A NAME="I2087"></A>A record type or private type 
that has the reserved word <B>tagged</B> in its declaration is called 
a <I>tagged</I> type. In addition, an interface type is a tagged type, 
as is a task or protected type derived from an interface (see <A HREF="RM-3-9-4.html">3.9.4</A>). 
When deriving from a tagged type, as for any derived type, additional 
primitive subprograms may be defined, and inherited primitive subprograms 
may be overridden. <A NAME="I2088"></A><A NAME="I2089"></A>The derived 
type is called an <I>extension</I> of its ancestor types, or simply a 
<I>type extension</I>.</div>
<div class="paranum"><a name="p2.1">2.1/2</a></div>
<div class="Normal">&nbsp;&nbsp;<A NAME="I2090"></A><A NAME="I2091"></A><A NAME="I2092"></A>Every 
type extension is also a tagged type, and is a <I>record extension</I> 
or a <I>private extension</I> of some other tagged type, or a noninterface 
synchronized tagged type (see <A HREF="RM-3-9-4.html">3.9.4</A>). A record 
extension is defined by a <SPAN Class="swiss"><A HREF="RM-3-4.html#S0035">derived_type_definition</A></SPAN> 
with a <SPAN Class="swiss"><A HREF="RM-3-9-1.html#S0075">record_extension_part</A></SPAN> 
(see <A HREF="RM-3-9-1.html">3.9.1</A>), which may include the definition 
of additional components. A private extension, which is a partial view 
of a record extension or of a synchronized tagged type, can be declared 
in the visible part of a package (see <A HREF="RM-7-3.html">7.3</A>) 
or in a generic formal part (see <A HREF="RM-12-5-1.html">12.5.1</A>). 
</div>
<div class="paranum"><a name="p3">3</a></div>
<div class="Normal"><A NAME="I2093"></A>An object of a tagged type has 
an associated (run-time) <I>tag</I> that identifies the specific tagged 
type used to create the object originally. The tag of an operand of a 
class-wide tagged type <I>T</I>'Class controls which subprogram body 
is to be executed when a primitive subprogram of type <I>T</I> is applied 
to the operand (see <A HREF="RM-3-9-2.html">3.9.2</A>); <A NAME="I2094"></A>using 
a tag to control which body to execute is called <I>dispatching</I>. 
<A NAME="I2095"></A><A NAME="I2096"></A><A NAME="I2097"></A><A NAME="I2098"></A></div>
<div class="paranum"><a name="p4">4/2</a></div>
<div class="Normal">The tag of a specific tagged type identifies the 
<SPAN Class="swiss"><A HREF="RM-3-2-1.html#S0024">full_type_declaration</A></SPAN> 
of the type, and for a type extension, is sufficient to uniquely identify 
the type among all descendants of the same ancestor. If a declaration 
for a tagged type occurs within a <SPAN Class="swiss"><A HREF="RM-12-1.html#S0273">generic_package_declaration</A></SPAN>, 
then the corresponding type declarations in distinct instances of the 
generic package are associated with distinct tags. For a tagged type 
that is local to a generic package body and with all of its ancestors 
(if any) also local to the generic body, the language does not specify 
whether repeated instantiations of the generic body result in distinct 
tags.<A NAME="I2099"></A>&nbsp;</div>
<div class="paranum"><a name="p5">5</a></div>
<div class="Normal" style="margin-bottom: 0.4em">The following language-defined 
library package exists:&nbsp;</div>
<div class="paranum"><a name="p6">6/2</a></div>
<div class="Examples"><A NAME="I2100"></A><B>package</B>&nbsp;Ada.Tags&nbsp;<B>is</B><BR>
&nbsp;&nbsp;&nbsp;&nbsp;<B>pragma</B>&nbsp;Preelaborate(Tags);<BR>
&nbsp;&nbsp;&nbsp;&nbsp;<B>type</B>&nbsp;<A NAME="I2101"></A>Tag&nbsp;<B>is</B>&nbsp;<B>private</B>;<BR>
&nbsp;&nbsp;&nbsp;&nbsp;<B>pragma</B>&nbsp;Preelaborable_Initialization(Tag);</div>
<div class="paranum"><a name="p6.1">6.1/2</a></div>
<div class="Examples">&nbsp;&nbsp;&nbsp;&nbsp;<A NAME="I2102"></A>No_Tag&nbsp;:&nbsp;<B>constant</B>&nbsp;Tag;</div>
<div class="paranum"><a name="p7">7/2</a></div>
<div class="Examples">&nbsp;&nbsp;&nbsp;&nbsp;<B>function</B>&nbsp;<A NAME="I2103"></A>Expanded_Name(T&nbsp;:&nbsp;Tag)&nbsp;<B>return</B>&nbsp;String;<BR>
&nbsp;&nbsp;&nbsp;&nbsp;<B>function</B>&nbsp;<A NAME="I2104"></A>Wide_Expanded_Name(T&nbsp;:&nbsp;Tag)&nbsp;<B>return</B>&nbsp;Wide_String;<BR>
&nbsp;&nbsp;&nbsp;&nbsp;<B>function</B>&nbsp;<A NAME="I2105"></A>Wide_Wide_Expanded_Name(T&nbsp;:&nbsp;Tag)&nbsp;<B>return</B>&nbsp;Wide_Wide_String;<BR>
&nbsp;&nbsp;&nbsp;&nbsp;<B>function</B>&nbsp;<A NAME="I2106"></A>External_Tag(T&nbsp;:&nbsp;Tag)&nbsp;<B>return</B>&nbsp;String;<BR>
&nbsp;&nbsp;&nbsp;&nbsp;<B>function</B>&nbsp;<A NAME="I2107"></A>Internal_Tag(External&nbsp;:&nbsp;String)&nbsp;<B>return</B>&nbsp;Tag;</div>
<div class="paranum"><a name="p7.1">7.1/2</a></div>
<div class="Examples">&nbsp;&nbsp;&nbsp;&nbsp;<B>function</B>&nbsp;<A NAME="I2108"></A>Descendant_Tag(External&nbsp;:&nbsp;String;&nbsp;Ancestor&nbsp;:&nbsp;Tag)&nbsp;<B>return</B>&nbsp;Tag;<BR>
&nbsp;&nbsp;&nbsp;&nbsp;<B>function</B>&nbsp;<A NAME="I2109"></A>Is_Descendant_At_Same_Level(Descendant,&nbsp;Ancestor&nbsp;:&nbsp;Tag)<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<B>return</B>&nbsp;Boolean;</div>
<div class="paranum"><a name="p7.2">7.2/2</a></div>
<div class="Examples">&nbsp;&nbsp;&nbsp;&nbsp;<B>function</B>&nbsp;<A NAME="I2110"></A>Parent_Tag&nbsp;(T&nbsp;:&nbsp;Tag)&nbsp;<B>return</B>&nbsp;Tag;</div>
<div class="paranum"><a name="p7.3">7.3/2</a></div>
<div class="Examples">&nbsp;&nbsp;&nbsp;&nbsp;<B>type</B>&nbsp;<A NAME="I2111"></A>Tag_Array&nbsp;<B>is&nbsp;array</B>&nbsp;(Positive&nbsp;<B>range</B>&nbsp;&lt;&gt;)&nbsp;<B>of</B>&nbsp;Tag;</div>
<div class="paranum"><a name="p7.4">7.4/2</a></div>
<div class="Examples">&nbsp;&nbsp;&nbsp;&nbsp;<B>function</B>&nbsp;<A NAME="I2112"></A>Interface_Ancestor_Tags&nbsp;(T&nbsp;:&nbsp;Tag)&nbsp;<B>return</B>&nbsp;Tag_Array;</div>
<div class="paranum"><a name="p7.5">7.5/3</a></div>
<div class="Examples">&nbsp;&nbsp;&nbsp;&nbsp;<B>function</B>&nbsp;<A NAME="I2113"></A>Is_Abstract&nbsp;(T&nbsp;:&nbsp;Tag)&nbsp;<B>return</B>&nbsp;Boolean;</div>
<div class="paranum"><a name="p8">8</a></div>
<div class="Examples">&nbsp;&nbsp;&nbsp;&nbsp;<A NAME="I2114"></A>Tag_Error&nbsp;:&nbsp;<B>exception</B>;</div>
<div class="paranum"><a name="p9">9</a></div>
<div class="Examples"><B>private</B><BR>
&nbsp;&nbsp;&nbsp;...&nbsp;--&nbsp;<SPAN Class="roman"><I>not&nbsp;specified&nbsp;by&nbsp;the&nbsp;language</I></SPAN><BR>
<B>end</B>&nbsp;Ada.Tags;</div>
<div class="paranum"><a name="p9.1">9.1/2</a></div>
<div class="Normal">&nbsp;&nbsp;No_Tag is the default initial value of type Tag. 
</div>
<div class="paranum"><a name="p10">10/2</a></div>
<div class="Normal">&nbsp;The function Wide_Wide_Expanded_Name returns the 
full expanded name of the first subtype of the specific type identified 
by the tag, in upper case, starting with a root library unit. The result 
is implementation defined if the type is declared within an unnamed <SPAN Class="swiss"><A HREF="RM-5-6.html#S0160">block_statement</A></SPAN>. 
</div>
<div class="paranum"><a name="p10.1">10.1/2</a></div>
<div class="Normal">&nbsp;&nbsp;&nbsp;The function Expanded_Name (respectively, Wide_Expanded_Name) 
returns the same sequence of graphic characters as that defined for Wide_Wide_Expanded_Name, 
if all the graphic characters are defined in Character (respectively, 
Wide_Character); otherwise, the sequence of characters is implementation 
defined, but no shorter than that returned by Wide_Wide_Expanded_Name 
for the same value of the argument.&nbsp;</div>
<div class="paranum"><a name="p11">11</a></div>
<div class="Normal">The function External_Tag returns a string to be 
used in an external representation for the given tag. The call External_Tag(S'Tag) 
is equivalent to the <SPAN Class="swiss"><A HREF="RM-4-1-4.html#S0100">attribute_reference</A></SPAN> 
S'External_Tag (see <A HREF="RM-13-3.html">13.3</A>).&nbsp;</div>
<div class="paranum"><a name="p11.1">11.1/2</a></div>
<div class="Normal">&nbsp;&nbsp;&nbsp;The string returned by the functions Expanded_Name, 
Wide_Expanded_Name, Wide_Wide_Expanded_Name, and External_Tag has lower 
bound 1.</div>
<div class="paranum"><a name="p12">12/2</a></div>
<div class="Normal">&nbsp;The function Internal_Tag returns a tag that corresponds 
to the given external tag, or raises Tag_Error if the given string is 
not the external tag for any specific type of the partition. Tag_Error 
is also raised if the specific type identified is a library-level type 
whose tag has not yet been created (see <A HREF="RM-13-14.html">13.14</A>).</div>
<div class="paranum"><a name="p12.1">12.1/3</a></div>
<div class="Normal">&nbsp;&nbsp;&nbsp;The function Descendant_Tag returns the (internal) 
tag for the type that corresponds to the given external tag and is both 
a descendant of the type identified by the Ancestor tag and has the same 
accessibility level as the identified ancestor. Tag_Error is raised if 
External is not the external tag for such a type. Tag_Error is also raised 
if the specific type identified is a library-level type whose tag has 
not yet been created, or if the given external tag identifies more than 
one type that has the appropriate Ancestor and accessibility level.</div>
<div class="paranum"><a name="p12.2">12.2/2</a></div>
<div class="Normal">&nbsp;&nbsp;&nbsp;The function Is_Descendant_At_Same_Level returns 
True if the Descendant tag identifies a type that is both a descendant 
of the type identified by Ancestor and at the same accessibility level. 
If not, it returns False.</div>
<div class="paranum"><a name="p12.3">12.3/3</a></div>
<div class="Normal">&nbsp;&nbsp;&nbsp;For the purposes of the dynamic semantics of functions 
Descendant_Tag and Is_Descendant_At_Same_Level, a tagged type T2 is a 
<I>descendant</I> of a type T1 if it is the same as T1, or if its parent 
type or one of its progenitor types is a descendant of type T1 by this 
rule, even if at the point of the declaration of T2, one of the derivations 
in the chain is not visible.<A NAME="I2115"></A></div>
<div class="paranum"><a name="p12.4">12.4/4</a></div>
<div class="Normal">&nbsp;&nbsp;&nbsp;The function Parent_Tag returns the tag of the 
parent type of the type whose tag is T. If the type does not have a parent 
type (that is, it was not defined by a <SPAN Class="swiss"><A HREF="RM-3-4.html#S0035">derived_type_definition</A></SPAN>), 
then No_Tag is returned.</div>
<div class="paranum"><a name="p12.5">12.5/3</a></div>
<div class="Normal">&nbsp;&nbsp;&nbsp;The function Interface_Ancestor_Tags returns an 
array containing the tag of each interface ancestor type of the type 
whose tag is T, other than T itself. The lower bound of the returned 
array is 1, and the order of the returned tags is unspecified. Each tag 
appears in the result exactly once. If the type whose tag is T has no 
interface ancestors, a null array is returned.<A NAME="I2116"></A></div>
<div class="paranum"><a name="p12.6">12.6/3</a></div>
<div class="Normal">&nbsp;&nbsp;&nbsp;The function Is_Abstract returns True if the type 
whose tag is T is abstract, and False otherwise.</div>
<div class="paranum"><a name="p13">13</a></div>
<div class="Normal">For every subtype S of a tagged type <I>T</I> (specific 
or class-wide), the following attributes are defined:&nbsp;</div>
<div class="paranum"><a name="p14">14</a></div>
<div class="WideHanging-Term">S'Class</div><div class="WideHanging-Body">
<A NAME="I2117"></A><A NAME="I2118"></A>S'Class denotes a subtype of 
the class-wide type (called <I>T</I>'Class in this International Standard) 
for the class rooted at <I>T</I> (or if S already denotes a class-wide 
subtype, then S'Class is the same as S).</div>
<div class="paranum"><a name="p15">15</a></div>
<div class="WideHanging-Body"><A NAME="I2119"></A><A NAME="I2120"></A>S'Class 
is unconstrained. However, if S is constrained, then the values of S'Class 
are only those that when converted to the type <I>T</I> belong to S. 
</div>
<div class="paranum"><a name="p16">16</a></div>
<div class="WideHanging-Term">S'Tag</div><div class="WideHanging-Body">
<A NAME="I2121"></A><A NAME="I2122"></A>S'Tag denotes the tag of the 
type <I>T</I> (or if <I>T</I> is class-wide, the tag of the root type 
of the corresponding class). The value of this attribute is of type Tag. 
</div>
<div class="paranum"><a name="p17">17</a></div>
<div class="Normal">Given a <SPAN Class="swiss"><A HREF="RM-4-1.html#S0093">prefix</A></SPAN> 
X that is of a class-wide tagged type (after any implicit dereference), 
the following attribute is defined:&nbsp;</div>
<div class="paranum"><a name="p18">18</a></div>
<div class="WideHanging-Term">X'Tag</div><div class="WideHanging-Body">
<A NAME="I2123"></A><A NAME="I2124"></A>X'Tag denotes the tag of X. The 
value of this attribute is of type Tag.&nbsp;</div>
<div class="paranum"><a name="p18.1">18.1/2</a></div>
<div class="Normal" style="margin-bottom: 0.4em">&nbsp;&nbsp;&nbsp;The following language-defined 
generic function exists:</div>
<div class="paranum"><a name="p18.2">18.2/3</a></div>
<div class="Examples"><A NAME="I2125"></A><B>generic</B><BR>
&nbsp;&nbsp;&nbsp;&nbsp;<B>type</B>&nbsp;T&nbsp;(&lt;&gt;)&nbsp;<B>is&nbsp;abstract&nbsp;tagged&nbsp;limited&nbsp;private</B>;<BR>
&nbsp;&nbsp;&nbsp;&nbsp;<B>type</B>&nbsp;Parameters&nbsp;(&lt;&gt;)&nbsp;<B>is&nbsp;limited&nbsp;private</B>;<BR>
&nbsp;&nbsp;&nbsp;&nbsp;<B>with&nbsp;function</B>&nbsp;Constructor&nbsp;(Params&nbsp;:&nbsp;<B>not&nbsp;null&nbsp;access</B>&nbsp;Parameters)<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<B>return</B>&nbsp;T&nbsp;<B>is&nbsp;abstract</B>;<BR>
<B>function</B>&nbsp;Ada.Tags.Generic_Dispatching_Constructor<BR>
&nbsp;&nbsp;&nbsp;(The_Tag&nbsp;:&nbsp;Tag;<BR>
&nbsp;&nbsp;&nbsp;&nbsp;Params&nbsp;&nbsp;:&nbsp;<B>not&nbsp;null&nbsp;access</B>&nbsp;Parameters)&nbsp;<B>return</B>&nbsp;T'Class<BR>
&nbsp;&nbsp;&nbsp;<B>with</B>&nbsp;Convention&nbsp;=&gt;&nbsp;Intrinsic;<BR>
<B>pragma</B>&nbsp;Preelaborate(Generic_Dispatching_Constructor);</div>
<div class="paranum"><a name="p18.3">18.3/2</a></div>
<div class="Normal">&nbsp;&nbsp;&nbsp;Tags.Generic_Dispatching_Constructor provides 
a mechanism to create an object of an appropriate type from just a tag 
value. The function Constructor is expected to create the object given 
a reference to an object of type Parameters.</div>

<H4 Class="centered">Dynamic Semantics</H4>
<div class="paranum"><a name="p19">19</a></div>
<div class="Normal" style="margin-bottom: 0.4em">The tag associated 
with an object of a tagged type is determined as follows:&nbsp;</div>
<div class="paranum"><a name="p20">20</a></div>
<div class="Bulleted"><A NAME="I2126"></A>The tag of a stand-alone object, 
a component, or an <SPAN Class="swiss"><A HREF="RM-4-3.html#S0106">aggregate</A></SPAN> 
of a specific tagged type <I>T</I> identifies <I>T</I>.&nbsp;</div>
<div class="paranum"><a name="p21">21</a></div>
<div class="Bulleted"><A NAME="I2127"></A>The tag of an object created 
by an allocator for an access type with a specific designated tagged 
type <I>T</I>, identifies <I>T</I>.&nbsp;</div>
<div class="paranum"><a name="p22">22</a></div>
<div class="Bulleted"><A NAME="I2128"></A>The tag of an object of a class-wide 
tagged type is that of its initialization expression.&nbsp;</div>
<div class="paranum"><a name="p23">23</a></div>
<div class="Bulleted"><A NAME="I2129"></A>The tag of the result returned 
by a function whose result type is a specific tagged type <I>T</I> identifies 
<I>T</I>.&nbsp;</div>
<div class="paranum"><a name="p24">24/2</a></div>
<div class="Bulleted"><A NAME="I2130"></A>The tag of the result returned 
by a function with a class-wide result type is that of the return object. 
</div>
<div class="paranum"><a name="p25">25</a></div>
<div class="Normal"><A NAME="I2131"></A>The tag is preserved by type 
conversion and by parameter passing. The tag of a value is the tag of 
the associated object (see <A HREF="RM-6-2.html">6.2</A>).</div>
<div class="paranum"><a name="p25.1">25.1/3</a></div>
<div class="Normal">&nbsp;&nbsp;&nbsp;Tag_Error is raised by a call of Descendant_Tag, 
Expanded_Name, External_Tag, Interface_Ancestor_Tags, Is_Abstract, Is_Descendant_At_Same_Level, 
Parent_Tag, Wide_Expanded_Name, or Wide_Wide_Expanded_Name if any tag 
passed is No_Tag.</div>
<div class="paranum"><a name="p25.2">25.2/2</a></div>
<div class="Normal">&nbsp;&nbsp;&nbsp;An instance of Tags.Generic_Dispatching_Constructor 
raises Tag_Error if The_Tag does not represent a concrete descendant 
of T or if the innermost master (see <A HREF="RM-7-6-1.html">7.6.1</A>) 
of this descendant is not also a master of the instance. Otherwise, it 
dispatches to the primitive function denoted by the formal Constructor 
for the type identified by The_Tag, passing Params, and returns the result. 
Any exception raised by the function is propagated.</div>

<H4 Class="centered">Erroneous Execution</H4>
<div class="paranum"><a name="p25.3">25.3/2</a></div>
<div class="Normal">&nbsp;&nbsp;&nbsp;<A NAME="I2132"></A>If an internal tag provided 
to an instance of Tags.Generic_Dispatching_Constructor or to any subprogram 
declared in package Tags identifies either a type that is not library-level 
and whose tag has not been created (see <A HREF="RM-13-14.html">13.14</A>), 
or a type that does not exist in the partition at the time of the call, 
then execution is erroneous.</div>

<H4 Class="centered">Implementation Permissions</H4>
<div class="paranum"><a name="p26">26/2</a></div>
<div class="Normal">&nbsp;The implementation of Internal_Tag and Descendant_Tag 
may raise Tag_Error if no specific type corresponding to the string External 
passed as a parameter exists in the partition at the time the function 
is called, or if there is no such type whose innermost master is a master 
of the point of the function call.&nbsp;</div>

<H4 Class="centered">Implementation Advice</H4>
<div class="paranum"><a name="p26.1">26.1/3</a></div>
<div class="Normal">&nbsp;&nbsp;&nbsp;Internal_Tag should return the tag of a type, 
if one exists, whose innermost master is a master of the point of the 
function call.&nbsp;</div>
<div class="NotesHeader">NOTES</div>
<div class="paranum"><a name="p27">27</a></div>
<div class="Notes">70&nbsp;&nbsp;A type declared with the reserved word 
<B>tagged</B> should normally be declared in a <SPAN Class="swiss"><A HREF="RM-7-1.html#S0191">package_specification</A></SPAN>, 
so that new primitive subprograms can be declared for it.</div>
<div class="paranum"><a name="p28">28</a></div>
<div class="Notes">71&nbsp;&nbsp;Once an object has been created, its 
tag never changes.</div>
<div class="paranum"><a name="p29">29</a></div>
<div class="Notes">72&nbsp;&nbsp;Class-wide types are defined to have 
unknown discriminants (see <A HREF="RM-3-7.html">3.7</A>). This means 
that objects of a class-wide type have to be explicitly initialized (whether 
created by an <SPAN Class="swiss"><A HREF="RM-3-3-1.html#S0032">object_declaration</A></SPAN> 
or an <SPAN Class="swiss"><A HREF="RM-4-8.html#S0143">allocator</A></SPAN>), 
and that <SPAN Class="swiss"><A HREF="RM-4-3.html#S0106">aggregate</A></SPAN>s 
have to be explicitly qualified with a specific type when their expected 
type is class-wide.</div>
<div class="paranum"><a name="p30">30/2</a></div>
<div class="Notes">73&nbsp;&nbsp;The capability provided by Tags.Generic_Dispatching_Constructor 
is sometimes known as a <I>factory</I>.<A NAME="I2133"></A><A NAME="I2134"></A> 
</div>

<H4 Class="centered">Examples</H4>
<div class="paranum"><a name="p31">31</a></div>
<div class="Normal" style="margin-bottom: 0.4em"><I>Examples of tagged 
record types:</I>&nbsp;</div>
<div class="paranum"><a name="p32">32</a></div>
<div class="Examples"><B>type</B>&nbsp;Point&nbsp;<B>is&nbsp;tagged</B><BR>
&nbsp;&nbsp;<B>record</B><BR>
&nbsp;&nbsp;&nbsp;&nbsp;X,&nbsp;Y&nbsp;:&nbsp;Real&nbsp;:=&nbsp;0.0;<BR>
&nbsp;&nbsp;<B>end&nbsp;record</B>;</div>
<div class="paranum"><a name="p33">33</a></div>
<div class="Examples"><B>type</B>&nbsp;Expression&nbsp;<B>is&nbsp;tagged&nbsp;null&nbsp;record</B>;<BR>
&nbsp;&nbsp;--<SPAN Class="roman"><I>&nbsp;Components&nbsp;will&nbsp;be&nbsp;added&nbsp;by&nbsp;each&nbsp;extension</I></SPAN></div>

<HR>
<div style="margin-top: 0.0em; margin-bottom: 0.6em"><A HREF="RM-TOC.html"><IMG SRC="cont.gif" ALT="Contents" BORDER=0></A>&nbsp;
&nbsp;<A HREF="RM-0-5.html"><IMG SRC="index.gif" ALT="Index" BORDER=0></A>&nbsp;
&nbsp;<A HREF="RM-STDS.html"><IMG SRC="lib.gif" ALT="References" BORDER=0></A>&nbsp;
&nbsp;<A HREF="RM-SRCH.html"><IMG SRC="find.gif" ALT="Search" BORDER=0></A>&nbsp;
&nbsp;<A HREF="RM-3-8-1.html"><IMG SRC="prev.gif" ALT="Previous" BORDER=0></A>&nbsp;
&nbsp;<A HREF="RM-3-9-1.html"><IMG SRC="next.gif" ALT="Next" BORDER=0></A>&nbsp;
</div>
<DIV Style="margin-top:0.0em"><IMG SRC="AE_logo.gif" height=100 width=113 align=right ALT="Ada-Europe">
<SPAN Style="vertical-align: middle; font-size:120%">Ada 2005 and 2012 Editions sponsored in part by <SPAN Style="font-size: 125%"><A HREF="http://www.ada-europe.org/"><B>Ada-Europe</B></A></SPAN></SPAN></DIV>
</BODY>
</HTML>
