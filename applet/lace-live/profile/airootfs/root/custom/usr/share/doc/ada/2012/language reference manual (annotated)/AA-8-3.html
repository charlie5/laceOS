<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
"http://www.w3.org/TR/html4/loose.dtd">
<HTML>
<HEAD>
    <TITLE>Visibility</TITLE>
    <META http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
    <META NAME="Author" CONTENT="JTC1/SC22/WG9/ARG, by Randall Brukardt, ARG Editor">
    <META NAME="GENERATOR" CONTENT="Arm_Form.Exe, Ada Reference Manual generator">
    <STYLE type="text/css">
    H4.centered {text-align: center}
    SPAN.swiss {font-family: Arial, Helvetica, sans-serif; font-size: 92%}
    SPAN.roman {font-family: "Times New Roman", Times, serif}
    DIV.paranum {float: left; font-family: Arial, Helvetica, sans-serif; font-size: 64%; width: 2.8em; margin-left: -0.4em; margin-right: -3.0em; margin-top: 0.2em}
    TT {font-family: "Courier New", monospace}
    DT {display: compact}
    SPAN.insert4 {text-decoration: underline; color: rgb(153,0,0) }
    SPAN.delete4 {text-decoration: line-through; color: rgb(153,0,0) }
    A.Bar:link {font-family: Arial, Helvetica, sans-serif; font-style: normal; text-decoration: none; color: rgb(204,204,51)}
    A.Bar:visited {font-family: Arial, Helvetica, sans-serif; font-style: normal; text-decoration: none; color: rgb(204,204,51)}
    DIV.Normal {font-family: "Times New Roman", Times, serif; line-height: 122%; margin-left: 1.2em; margin-bottom: 0.6em}
    DIV.Notes {font-family: "Times New Roman", Times, serif; font-size: 80%; line-height: 122%; margin-left: 3.7em; margin-bottom: 0.6em}
    DIV.Annotations {font-family: "Times New Roman", Times, serif; font-size: 80%; line-height: 122%; margin-left: 6.2em; margin-bottom: 0.6em}
    DIV.NotesHeader {font-family: "Times New Roman", Times, serif; font-size: 80%; line-height: 122%; margin-left: 3.7em}
    DIV.SmallExamples {font-family: "Courier New", monospace; font-size: 72%; line-height: 122%; margin-left: 9.6em; margin-bottom: 0.6em}
    DIV.Bulleted-NoPrefix {font-family: "Times New Roman", Times, serif; line-height: 122%; margin-left: 3.2em; margin-right: 2.0em; margin-top: 0em; margin-bottom: 0.5em}
    DIV.Bulleted {font-family: "Times New Roman", Times, serif; line-height: 122%; margin-left: 3.2em; margin-right: 2.0em; margin-top: 0em; margin-bottom: 0.5em; display: list-item; list-style-type: disc}
    DIV.SmallBulleted-NoPrefix {font-family: "Times New Roman", Times, serif; font-size: 80%; line-height: 122%; margin-left: 8.7em; margin-right: 2.5em; margin-top: 0em; margin-bottom: 0.5em}
    DIV.SmallBulleted {font-family: "Times New Roman", Times, serif; font-size: 80%; line-height: 122%; margin-left: 8.7em; margin-right: 2.5em; margin-top: 0em; margin-bottom: 0.5em; display: list-item; list-style-type: disc}
    DIV.Indented2NestedBulleted-NoPrefix {font-family: "Times New Roman", Times, serif; line-height: 122%; margin-left: 5.2em; margin-right: 2.0em; margin-top: 0em; margin-bottom: 0.5em}
    DIV.Indented2NestedBulleted {font-family: "Times New Roman", Times, serif; line-height: 122%; margin-left: 5.2em; margin-right: 2.0em; margin-top: 0em; margin-bottom: 0.5em; display: list-item; list-style-type: disc}
    DIV.SmallEnumerated-Body {font-family: "Times New Roman", Times, serif; font-size: 80%; line-height: 122%; margin-left: 8.7em; margin-right: 2.5em; margin-top: 0em; margin-bottom: 0.5em}
    DIV.SmallEnumerated-Term {float: left; font-family: "Times New Roman", Times, serif; font-size: 80%; line-height: 122%; margin-left: 6.8em; margin-top: 0em; margin-bottom: 0em}
    </STYLE>
</HEAD>
<BODY TEXT="#000000" BGCOLOR="#FFFFF0" LINK="#000080" VLINK="#330033" ALINK="#0000FF">
<DIV><B><SPAN Style="font-size:200%; color: rgb(0,51,153)">Annotated</SPAN><SPAN Style="font-size:200%; color: rgb(0,0,102)">&nbsp;Ada Reference Manual</SPAN></B> &mdash; <A HREF="AA-TTL.html"><B>Legal Information</B></A></DIV>
<div style="margin-top: 0.6em; margin-bottom: 0.0em"><A HREF="AA-TOC.html"><IMG SRC="cont.gif" ALT="Contents" BORDER=0></A>&nbsp;
&nbsp;<A HREF="AA-0-5.html"><IMG SRC="index.gif" ALT="Index" BORDER=0></A>&nbsp;
&nbsp;<A HREF="AA-STDS.html"><IMG SRC="lib.gif" ALT="References" BORDER=0></A>&nbsp;
&nbsp;<A HREF="AA-SRCH.html"><IMG SRC="find.gif" ALT="Search" BORDER=0></A>&nbsp;
&nbsp;<A HREF="AA-8-2.html"><IMG SRC="prev.gif" ALT="Previous" BORDER=0></A>&nbsp;
&nbsp;<A HREF="AA-8-3-1.html"><IMG SRC="next.gif" ALT="Next" BORDER=0></A>&nbsp;
</div>
<HR>
<H1>8.3 Visibility</H1>
<div class="paranum"><a name="p1">1</a></div>
<div class="Normal">[<A NAME="I4070"></A> The <I>visibility rules</I>, 
given below, determine which declarations are visible and directly visible 
at each place within a program. The visibility rules apply to both explicit 
and implicit declarations.]&nbsp;</div>

<H4 Class="centered">Static Semantics</H4>
<div class="paranum"><a name="p2">2</a></div>
<div class="Normal"><A NAME="I4071"></A><A NAME="I4072"></A><A NAME="I4073"></A>A 
declaration is defined to be <I>directly visible</I> at places where 
a <SPAN Class="swiss"><A HREF="AA-4-1.html#S0091">name</A></SPAN> consisting 
of only an <SPAN Class="swiss"><A HREF="AA-2-3.html#S0002">identifier</A></SPAN> 
or <SPAN Class="swiss"><A HREF="AA-6-1.html#S0170">operator_symbol</A></SPAN> 
is sufficient to denote the declaration; that is, no <SPAN Class="swiss"><A HREF="AA-4-1-3.html#S0098">selected_component</A></SPAN> 
notation or special context (such as preceding =&gt; in a named association) 
is necessary to denote the declaration. <A NAME="I4074"></A>A declaration 
is defined to be <I>visible</I> wherever it is directly visible, as well 
as at other places where some <SPAN Class="swiss"><A HREF="AA-4-1.html#S0091">name</A></SPAN> 
(such as a <SPAN Class="swiss"><A HREF="AA-4-1-3.html#S0098">selected_component</A></SPAN>) 
can denote the declaration.</div>
<div class="paranum"><a name="p3">3</a></div>
<div class="Normal">The syntactic category <SPAN Class="swiss"><A HREF="AA-4-1.html#S0092">direct_name</A></SPAN> 
is used to indicate contexts where direct visibility is required. The 
syntactic category <SPAN Class="swiss"><A HREF="AA-4-1-3.html#S0099">selector_name</A></SPAN> 
is used to indicate contexts where visibility, but not direct visibility, 
is required.</div>
<div class="paranum"><a name="p4">4</a></div>
<div class="Normal"><A NAME="I4075"></A><A NAME="I4076"></A>There are 
two kinds of direct visibility: <I>immediate visibility</I> and <I>use-visibility</I>. 
<A NAME="I4077"></A>A declaration is immediately visible at a place if 
it is directly visible because the place is within its immediate scope. 
<A NAME="I4078"></A>A declaration is use-visible if it is directly visible 
because of a <SPAN Class="swiss"><A HREF="AA-8-4.html#S0196">use_clause</A></SPAN> 
(see <A HREF="AA-8-4.html">8.4</A>). Both conditions can apply.</div>
<div class="paranum"><a name="p5">5</a></div>
<div class="Normal"><A NAME="I4079"></A>A declaration can be <I>hidden</I>, 
either from direct visibility, or from all visibility, within certain 
parts of its scope. <A NAME="I4080"></A>Where <I>hidden from all visibility</I>, 
it is not visible at all (neither using a <SPAN Class="swiss"><A HREF="AA-4-1.html#S0092">direct_name</A></SPAN> 
nor a <SPAN Class="swiss"><A HREF="AA-4-1-3.html#S0099">selector_name</A></SPAN>). 
<A NAME="I4081"></A>Where <I>hidden from direct visibility</I>, only 
direct visibility is lost; visibility using a <SPAN Class="swiss"><A HREF="AA-4-1-3.html#S0099">selector_name</A></SPAN> 
is still possible.</div>
<div class="paranum"><a name="p6">6</a></div>
<div class="Normal">[<A NAME="I4082"></A> Two or more declarations are 
<I>overloaded</I> if they all have the same defining name and there is 
a place where they are all directly visible.]&nbsp;</div>
<div class="paranum"><a name="p6.a">6.a</a></div>
<div class="Annotations"><B>Ramification:&nbsp;</B>Note that a <SPAN Class="swiss"><A HREF="AA-4-1.html#S0091">name</A></SPAN> 
can have more than one possible interpretation even if it denotes a nonoverloadable 
entity. For example, if there are two functions F that return records, 
both containing a component called C, then the name F.C has two possible 
interpretations, even though component declarations are not overloadable. 
</div>
<div class="paranum"><a name="p7">7</a></div>
<div class="Normal"><A NAME="I4083"></A>The declarations of callable 
entities [(including enumeration literals)] are <I>overloadable</I>[, 
meaning that overloading is allowed for them].&nbsp;</div>
<div class="paranum"><a name="p7.a">7.a</a></div>
<div class="Annotations"><B>Ramification:&nbsp;</B>A <SPAN Class="swiss"><A HREF="AA-12-1.html#S0271">generic_declaration</A></SPAN> 
is not overloadable within its own <SPAN Class="swiss"><A HREF="AA-12-1.html#S0274">generic_formal_part</A></SPAN>. 
This follows from the rules about when a <SPAN Class="swiss"><A HREF="AA-4-1.html#S0091">name</A></SPAN> 
denotes a current instance. See AI83-00286. This implies that within 
a <SPAN Class="swiss"><A HREF="AA-12-1.html#S0274">generic_formal_part</A></SPAN>, 
outer declarations with the same defining name are hidden from direct 
visibility. It also implies that if a generic formal parameter has the 
same defining name as the generic itself, the formal parameter hides 
the generic from direct visibility.&nbsp;</div>
<div class="paranum"><a name="p8">8</a></div>
<div class="Normal"><A NAME="I4084"></A>Two declarations are <I>homographs</I> 
if they have the same defining name, and, if both are overloadable, their 
profiles are type conformant. <A NAME="I4085"></A>[An inner declaration 
hides any outer homograph from direct visibility.]</div>
<div class="paranum"><a name="p8.a">8.a/2</a></div>
<div class="Annotations"><B>Glossary entry:&nbsp;</B>An overriding operation 
is one that replaces an inherited primitive operation. Operations may 
be marked explicitly as overriding or not overriding.</div>
<div class="paranum"><a name="p9">9/1</a></div>
<div class="Normal" style="margin-bottom: 0.4em">{<I><A HREF="defect1.html#8652/0025">8652/0025</A></I>} 
{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AIs/AI-00044.TXT">AI95-00044-01</A></I>} 
[Two homographs are not generally allowed immediately within the same 
declarative region unless one <I>overrides</I> the other (see Legality 
Rules below).] <A NAME="I4086"></A>The only declarations that are <A NAME="I4087"></A><I>overridable</I> 
are the implicit declarations for predefined operators and inherited 
primitive subprograms. A declaration overrides another homograph that 
occurs immediately within the same declarative region in the following 
cases:&nbsp;</div>
<div class="paranum"><a name="p10">10/1</a></div>
<div class="Bulleted">{<I><A HREF="defect1.html#8652/0025">8652/0025</A></I>} 
{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AIs/AI-00044.TXT">AI95-00044-01</A></I>} 
A declaration that is not overridable overrides one that is overridable, 
[regardless of which declaration occurs first];&nbsp;</div>
<div class="paranum"><a name="p10.a">10.a/1</a></div>
<div class="Annotations"><B>Ramification:&nbsp;</B>{<I><A HREF="defect1.html#8652/0025">8652/0025</A></I>} 
{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AIs/AI-00044.TXT">AI95-00044-01</A></I>} 
And regardless of whether the nonoverridable declaration is overloadable 
or not. For example, <SPAN Class="swiss"><A HREF="AA-5-1.html#S0151">statement_identifier</A></SPAN>s 
are covered by this rule.</div>
<div class="paranum"><a name="p10.b">10.b</a></div>
<div class="Annotations">The &ldquo;regardless of which declaration occurs 
first&rdquo; is there because the explicit declaration could be a primitive 
subprogram of a partial view, and then the full view might inherit a 
homograph. We are saying that the explicit one wins (within its scope), 
even though the implicit one comes later.</div>
<div class="paranum"><a name="p10.c">10.c</a></div>
<div class="Annotations">If the overriding declaration is also a subprogram, 
then it is a primitive subprogram.</div>
<div class="paranum"><a name="p10.d">10.d</a></div>
<div class="Annotations">As explained in <A HREF="AA-7-3-1.html">7.3.1</A>, 
&ldquo;<A HREF="AA-7-3-1.html">Private Operations</A>&rdquo;, some inherited 
primitive subprograms are never declared. Such subprograms cannot be 
overridden, although they can be reached by dispatching calls in the 
case of a tagged type.&nbsp;</div>
<div class="paranum"><a name="p11">11</a></div>
<div class="Bulleted">The implicit declaration of an inherited operator 
overrides that of a predefined operator;&nbsp;</div>
<div class="paranum"><a name="p11.a">11.a</a></div>
<div class="Annotations"><B>Ramification:&nbsp;</B>In a previous version of 
Ada 9X, we tried to avoid the notion of predefined operators, and say 
that they were inherited from some magical root type. However, this seemed 
like too much mechanism. Therefore, a type can have a predefined &quot;+&quot; 
as well as an inherited &quot;+&quot;. The above rule says the inherited 
one wins.</div>
<div class="paranum"><a name="p11.b">11.b/2</a></div>
<div class="Annotations">{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AIs/AI-00114.TXT">AI95-00114-01</A></I>} 
The &ldquo;regardless of which declaration occurs first&rdquo; applies 
here as well, in the case where <SPAN Class="swiss"><A HREF="AA-3-4.html#S0035">derived_type_definition</A></SPAN> 
in the visible part of a public library unit derives from a private type 
declared in the parent unit, and the full view of the parent type has 
additional predefined operators, as explained in <A HREF="AA-7-3-1.html">7.3.1</A>, 
&ldquo;<A HREF="AA-7-3-1.html">Private Operations</A>&rdquo;. Those predefined 
operators can be overridden by inherited subprograms implicitly declared 
earlier.&nbsp;</div>
<div class="paranum"><a name="p12">12</a></div>
<div class="Bulleted">An implicit declaration of an inherited subprogram 
overrides a previous implicit declaration of an inherited subprogram.</div>
<div class="paranum"><a name="p12.1">12.1/2</a></div>
<div class="Bulleted" style="margin-bottom: 0.3em">{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AIs/AI-00251.TXT">AI95-00251-01</A></I>} 
If two or more homographs are implicitly declared at the same place:</div>
<div class="paranum"><a name="p12.2">12.2/2</a></div>
<div class="Indented2NestedBulleted">{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AIs/AI-00251.TXT">AI95-00251-01</A></I>} 
If at least one is a subprogram that is neither a null procedure nor 
an abstract subprogram, and does not require overriding (see <A HREF="AA-3-9-3.html">3.9.3</A>), 
then they override those that are null procedures, abstract subprograms, 
or require overriding. If more than one such homograph remains that is 
not thus overridden, then they are all hidden from all visibility.</div>
<div class="paranum"><a name="p12.3">12.3/2</a></div>
<div class="Indented2NestedBulleted">{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AIs/AI-00251.TXT">AI95-00251-01</A></I>} 
Otherwise (all are null procedures, abstract subprograms, or require 
overriding), then any null procedure overrides all abstract subprograms 
and all subprograms that require overriding; if more than one such homograph 
remains that is not thus overridden, then if they are all fully conformant 
with one another, one is chosen arbitrarily; if not, they are all hidden 
from all visibility. <A NAME="I4088"></A></div>
<div class="paranum"><a name="p12.a">12.a/2</a></div>
<div class="Annotations" style="margin-bottom: 0.4em"><B>Discussion: 
</B>In the case where the implementation arbitrarily chooses one overrider 
from among a group of inherited subprograms, users should not be able 
to determine which member was chosen, as the set of inherited subprograms 
which are chosen from must be fully conformant. This rule is needed in 
order to allow</div>
<div class="paranum"><a name="p12.b">12.b/2</a></div>
<div class="SmallExamples"><B>package</B>&nbsp;Outer&nbsp;<B>is</B><BR>
&nbsp;&nbsp;&nbsp;<B>package</B>&nbsp;P1&nbsp;<B>is</B><BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<B>type</B>&nbsp;Ifc1&nbsp;<B>is&nbsp;interface</B>;<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<B>procedure</B>&nbsp;Null_Procedure&nbsp;(X&nbsp;:&nbsp;Ifc1)&nbsp;<B>is&nbsp;null</B>;<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<B>procedure</B>&nbsp;Abstract_Subp&nbsp;&nbsp;(X&nbsp;:&nbsp;Ifc1)&nbsp;<B>is&nbsp;abstract</B>;<BR>
&nbsp;&nbsp;&nbsp;<B>end</B>&nbsp;P1;</div>
<div class="paranum"><a name="p12.c">12.c/2</a></div>
<div class="SmallExamples">&nbsp;&nbsp;&nbsp;<B>package</B>&nbsp;P2&nbsp;<B>is</B><BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<B>type</B>&nbsp;Ifc2&nbsp;<B>is&nbsp;interface</B>;<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<B>procedure</B>&nbsp;Null_Procedure&nbsp;(X&nbsp;:&nbsp;Ifc2)&nbsp;<B>is&nbsp;null</B>;<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<B>procedure</B>&nbsp;Abstract_Subp&nbsp;&nbsp;(X&nbsp;:&nbsp;Ifc2)&nbsp;<B>is&nbsp;abstract</B>;<BR>
&nbsp;&nbsp;&nbsp;<B>end</B>&nbsp;P2;</div>
<div class="paranum"><a name="p12.d">12.d/2</a></div>
<div class="SmallExamples">&nbsp;&nbsp;&nbsp;<B>type</B>&nbsp;T&nbsp;<B>is&nbsp;abstract&nbsp;new</B>&nbsp;P1.Ifc1&nbsp;<B>and</B>&nbsp;P2.Ifc2&nbsp;<B>with&nbsp;null&nbsp;record</B>;<BR>
<B>end</B>&nbsp;Outer;</div>
<div class="paranum"><a name="p12.e">12.e/2</a></div>
<div class="Annotations">without requiring that T explicitly override 
any of its inherited operations.</div>
<div class="paranum"><a name="p12.f">12.f/2</a></div>
<div class="Annotations">Full conformance is required here, as we cannot 
allow the parameter names to differ. If they did differ, the routine 
which was selected for overriding could be determined by using named 
parameter notation in a call.</div>
<div class="paranum"><a name="p12.g">12.g/2</a></div>
<div class="Annotations">When the subprograms do not conform, we chose 
not to adopt the &ldquo;use clause&rdquo; rule which would make them 
all visible resulting in likely ambiguity. If we had used such a rule, 
any successful calls would be confusing; and the fact that there are 
no Beaujolais-like effect to worry about means we can consider other 
rules. The hidden-from-all-visibility homographs are still inherited 
by further derivations, which avoids order-of-declaration dependencies 
and other anomalies.</div>
<div class="paranum"><a name="p12.h">12.h/2</a></div>
<div class="Annotations">We have to be careful to not include arbitrary 
selection if the routines have real bodies. (This can happen in generics, 
see the example in the incompatibilities section below.) We don't want 
the ability to successfully call routines where the body executed depends 
on the compiler or a phase of the moon.</div>
<div class="paranum"><a name="p12.i">12.i/2</a></div>
<div class="Annotations">Note that if the type is concrete, abstract 
subprograms are inherited as subprograms that require overriding. We 
include functions that require overriding as well; these don't have real 
bodies, so they can use the more liberal rules.&nbsp;</div>
<div class="paranum"><a name="p13">13</a></div>
<div class="Bulleted">[For an implicit declaration of a primitive subprogram 
in a generic unit, there is a copy of this declaration in an instance.] 
However, a whole new set of primitive subprograms is implicitly declared 
for each type declared within the visible part of the instance. These 
new declarations occur immediately after the type declaration, and override 
the copied ones. [The copied ones can be called only from within the 
instance; the new ones can be called only from outside the instance, 
although for tagged types, the body of a new one can be executed by a 
call to an old one.]&nbsp;</div>
<div class="paranum"><a name="p13.a">13.a</a></div>
<div class="Annotations"><B>Discussion:&nbsp;</B>In addition, this is also 
stated redundantly (again), and is repeated, in <A HREF="AA-12-3.html">12.3</A>, 
&ldquo;<A HREF="AA-12-3.html">Generic Instantiation</A>&rdquo;. The rationale 
for the rule is explained there.&nbsp;</div>
<div class="paranum"><a name="p13.b">13.b/3</a></div>
<div class="Annotations"><B>To be honest:&nbsp;</B>{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI05s/AI05-0042-1.TXT">AI05-0042-1</A></I>} 
The implicit subprograms declared when an operation of a progenitor is 
implemented by an entry or subprogram also override the appropriate implicitly 
declared inherited operations of the progenitor.<A NAME="I4089"></A> 
</div>
<div class="paranum"><a name="p14">14</a></div>
<div class="Normal" style="margin-bottom: 0.4em"><A NAME="I4090"></A><A NAME="I4091"></A>A 
declaration is visible within its scope, except where hidden from all 
visibility, as follows:&nbsp;</div>
<div class="paranum"><a name="p15">15</a></div>
<div class="Bulleted"><A NAME="I4092"></A>An overridden declaration is 
hidden from all visibility within the scope of the overriding declaration. 
</div>
<div class="paranum"><a name="p15.a">15.a</a></div>
<div class="Annotations"><B>Ramification:&nbsp;</B>We have to talk about the 
scope of the overriding declaration, not its visibility, because it hides 
even when it is itself hidden.</div>
<div class="paranum"><a name="p15.b">15.b</a></div>
<div class="Annotations">Note that the scope of an explicit <SPAN Class="swiss"><A HREF="AA-6-1.html#S0163">subprogram_declaration</A></SPAN> 
does not start until after its profile.&nbsp;</div>
<div class="paranum"><a name="p16">16</a></div>
<div class="Bulleted" style="margin-bottom: 0.3em"><A NAME="I4093"></A>A 
declaration is hidden from all visibility until the end of the declaration, 
except:&nbsp;</div>
<div class="paranum"><a name="p17">17</a></div>
<div class="Indented2NestedBulleted">For a record type or record extension, 
the declaration is hidden from all visibility only until the reserved 
word <B>record</B>;</div>
<div class="paranum"><a name="p18">18/3</a></div>
<div class="Indented2NestedBulleted">{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AIs/AI-00345.TXT">AI95-00345-01</A></I>} 
{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI05s/AI05-0177-1.TXT">AI05-0177-1</A></I>} 
For a <SPAN Class="swiss"><A HREF="AA-7-1.html#S0190">package_declaration</A></SPAN>, 
<SPAN Class="swiss"><A HREF="AA-12-1.html#S0273">generic_package_declaration</A></SPAN>, 
<SPAN Class="swiss"><A HREF="AA-6-3.html#S0177">subprogram_body</A></SPAN>, 
or <SPAN Class="swiss"><A HREF="AA-6-8.html#S0189">expression_function_declaration</A></SPAN>, 
the declaration is hidden from all visibility only until the reserved 
word <B>is</B> of the declaration;&nbsp;</div>
<div class="paranum"><a name="p18.a">18.a</a></div>
<div class="Annotations"><B>Ramification:&nbsp;</B>We're talking about the 
<B>is</B> of the construct itself, here, not some random <B>is</B> that 
might appear in a <SPAN Class="swiss"><A HREF="AA-12-1.html#S0274">generic_formal_part</A></SPAN>. 
</div>
<div class="paranum"><a name="p18.1">18.1/2</a></div>
<div class="Indented2NestedBulleted">{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AIs/AI-00345.TXT">AI95-00345-01</A></I>} 
For a task declaration or protected declaration, the declaration is hidden 
from all visibility only until the reserved word <B>with</B> of the declaration 
if there is one, or the reserved word <B>is</B> of the declaration if 
there is no <B>with</B>.</div>
<div class="paranum"><a name="p18.b">18.b/2</a></div>
<div class="Annotations"><B>To be honest:&nbsp;</B>If there is neither a <B>with</B> 
nor <B>is</B>, then the exception does not apply and the name is hidden 
from all visibility until the end of the declaration. This oddity was 
inherited from Ada 95.&nbsp;</div>
<div class="paranum"><a name="p18.c">18.c/2</a></div>
<div class="Annotations"><B>Reason:&nbsp;</B>We need the &ldquo;<B>with</B> 
or <B>is</B>&rdquo; rule so that the visibility within an <SPAN Class="swiss"><A HREF="AA-3-9-4.html#S0078">interface_list</A></SPAN> 
does not vary by construct. That would make it harder to complete private 
extensions and would complicate implementations.&nbsp;</div>
<div class="paranum"><a name="p19">19</a></div>
<div class="Bulleted"><A NAME="I4094"></A>If the completion of a declaration 
is a declaration, then within the scope of the completion, the first 
declaration is hidden from all visibility. Similarly, a <SPAN Class="swiss"><A HREF="AA-3-7.html#S0062">discriminant_specification</A></SPAN> 
or <SPAN Class="swiss"><A HREF="AA-6-1.html#S0175">parameter_specification</A></SPAN> 
is hidden within the scope of a corresponding <SPAN Class="swiss"><A HREF="AA-3-7.html#S0062">discriminant_specification</A></SPAN> 
or <SPAN Class="swiss"><A HREF="AA-6-1.html#S0175">parameter_specification</A></SPAN> 
of a corresponding completion, or of a corresponding <SPAN Class="swiss"><A HREF="AA-9-5-2.html#S0219">accept_statement</A></SPAN>. 
</div>
<div class="paranum"><a name="p19.a">19.a</a></div>
<div class="Annotations"><B>Ramification:&nbsp;</B>This rule means, for example, 
that within the scope of a <SPAN Class="swiss"><A HREF="AA-3-2-1.html#S0024">full_type_declaration</A></SPAN> 
that completes a <SPAN Class="swiss"><A HREF="AA-7-3.html#S0193">private_type_declaration</A></SPAN>, 
the name of the type will denote the <SPAN Class="swiss"><A HREF="AA-3-2-1.html#S0024">full_type_declaration</A></SPAN>, 
and therefore the full view of the type. On the other hand, if the completion 
is not a declaration, then it doesn't hide anything, and you can't denote 
it.&nbsp;</div>
<div class="paranum"><a name="p20">20/2</a></div>
<div class="Bulleted">{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AIs/AI-50217.TXT">AI95-00217-06</A></I>} 
{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AIs/AI-00412.TXT">AI95-00412-01</A></I>} 
<A NAME="I4095"></A>The declaration of a library unit (including a <SPAN Class="swiss"><A HREF="AA-10-1-1.html#S0250">library_unit_renaming_declaration</A></SPAN>) 
is hidden from all visibility at places outside its declarative region 
that are not within the scope of a <SPAN Class="swiss"><A HREF="AA-10-1-2.html#S0257">nonlimited_with_clause</A></SPAN> 
that mentions it. The limited view of a library package is hidden from 
all visibility at places that are not within the scope of a <SPAN Class="swiss"><A HREF="AA-10-1-2.html#S0256">limited_with_clause</A></SPAN> 
that mentions it; in addition, the limited view is hidden from all visibility 
within the declarative region of the package, as well as within the scope 
of any <SPAN Class="swiss"><A HREF="AA-10-1-2.html#S0257">nonlimited_with_clause</A></SPAN> 
that mentions the package. Where the declaration of the limited view 
of a package is visible, any name that denotes the package denotes the 
limited view, including those provided by a package renaming.</div>
<div class="paranum"><a name="p20.a">20.a/2</a></div>
<div class="Annotations"><B>Discussion:&nbsp;</B>{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AIs/AI-50217.TXT">AI95-00217-06</A></I>} 
This is the rule that prevents <SPAN Class="swiss"><A HREF="AA-10-1-2.html#S0255">with_clause</A></SPAN>s 
from being transitive; the [immediate] scope includes indirect semantic 
dependents. This rule also prevents the limited view of a package from 
being visible in the same place as the full view of the package, which 
prevents various ripple effects.&nbsp;</div>
<div class="paranum"><a name="p20.1">20.1/2</a></div>
<div class="Bulleted">{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AIs/AI-50217.TXT">AI95-00217-06</A></I>} 
{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AIs/AI-00412.TXT">AI95-00412-01</A></I>} 
[For each declaration or renaming of a generic unit as a child of some 
parent generic package, there is a corresponding declaration nested immediately 
within each instance of the parent.] Such a nested declaration is hidden 
from all visibility except at places that are within the scope of a <SPAN Class="swiss"><A HREF="AA-10-1-2.html#S0255">with_clause</A></SPAN> 
that mentions the child.</div>
<div class="paranum"><a name="p21">21</a></div>
<div class="Normal" style="margin-bottom: 0.4em"><A NAME="I4096"></A><A NAME="I4097"></A><A NAME="I4098"></A><A NAME="I4099"></A>A 
declaration with a <SPAN Class="swiss"><A HREF="AA-3-1.html#S0022">defining_identifier</A></SPAN> 
or <SPAN Class="swiss"><A HREF="AA-6-1.html#S0171">defining_operator_symbol</A></SPAN> 
is immediately visible [(and hence directly visible)] within its immediate 
scope <A NAME="I4100"></A> except where hidden from direct visibility, 
as follows:&nbsp;</div>
<div class="paranum"><a name="p22">22</a></div>
<div class="Bulleted"><A NAME="I4101"></A>A declaration is hidden from 
direct visibility within the immediate scope of a homograph of the declaration, 
if the homograph occurs within an inner declarative region;</div>
<div class="paranum"><a name="p23">23</a></div>
<div class="Bulleted"><A NAME="I4102"></A>A declaration is also hidden 
from direct visibility where hidden from all visibility.&nbsp;</div>
<div class="paranum"><a name="p23.1">23.1/3</a></div>
<div class="Normal">&nbsp;&nbsp;&nbsp;{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AIs/AI-00195.TXT">AI95-00195-01</A></I>} 
{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AIs/AI-00408.TXT">AI95-00408-01</A></I>} 
{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI05s/AI05-0183-1.TXT">AI05-0183-1</A></I>} 
<A NAME="I4103"></A>An <SPAN Class="swiss"><A HREF="AA-13-3.html#S0310">attribute_definition_clause</A></SPAN> 
or an <SPAN Class="swiss"><A HREF="AA-13-1-1.html#S0307">aspect_specification</A></SPAN><A NAME="I4104"></A> 
is <I>visible</I> everywhere within its scope.</div>

<H4 Class="centered">Name Resolution Rules</H4>
<div class="paranum"><a name="p24">24</a></div>
<div class="Normal"><A NAME="I4105"></A>A <SPAN Class="swiss"><A HREF="AA-4-1.html#S0092">direct_name</A></SPAN> 
shall resolve to denote a directly visible declaration whose defining 
name is the same as the <SPAN Class="swiss"><A HREF="AA-4-1.html#S0092">direct_name</A></SPAN>. 
<A NAME="I4106"></A>A <SPAN Class="swiss"><A HREF="AA-4-1-3.html#S0099">selector_name</A></SPAN> 
shall resolve to denote a visible declaration whose defining name is 
the same as the <SPAN Class="swiss"><A HREF="AA-4-1-3.html#S0099">selector_name</A></SPAN>. 
</div>
<div class="paranum"><a name="p24.a">24.a</a></div>
<div class="Annotations"><B>Discussion:&nbsp;</B>&quot;The same as&quot; has 
the obvious meaning here, so for +, the possible interpretations are 
declarations whose defining name is &quot;+&quot; (an <SPAN Class="swiss"><A HREF="AA-6-1.html#S0170">operator_symbol</A></SPAN>). 
</div>
<div class="paranum"><a name="p25">25</a></div>
<div class="Normal">These rules on visibility and direct visibility do 
not apply in a <SPAN Class="swiss"><A HREF="AA-10-1-2.html#S0253">context_clause</A></SPAN>, 
a <SPAN Class="swiss"><A HREF="AA-10-1-1.html#S0252">parent_unit_name</A></SPAN>, 
or a <SPAN Class="swiss"><A HREF="AA-2-8.html#S0019">pragma</A></SPAN> 
that appears at the place of a <SPAN Class="swiss"><A HREF="AA-10-1-1.html#S0247">compilation_unit</A></SPAN>. 
For those contexts, see the rules in <A HREF="AA-10-1-6.html">10.1.6</A>, 
&ldquo;<A HREF="AA-10-1-6.html">Environment-Level Visibility Rules</A>&rdquo;. 
</div>
<div class="paranum"><a name="p25.a">25.a</a></div>
<div class="Annotations"><B>Ramification:&nbsp;</B>Direct visibility is irrelevant 
for <SPAN Class="swiss"><A HREF="AA-2-5.html#S0015">character_literal</A></SPAN>s. 
In terms of overload resolution <SPAN Class="swiss"><A HREF="AA-2-5.html#S0015">character_literal</A></SPAN>s 
are similar to other literals, like <B>null</B> &mdash; see <A HREF="AA-4-2.html">4.2</A>. 
For <SPAN Class="swiss"><A HREF="AA-2-5.html#S0015">character_literal</A></SPAN>s, 
there is no need to worry about hiding, since there is no way to declare 
homographs.&nbsp;</div>

<H4 Class="centered">Legality Rules</H4>
<div class="paranum"><a name="p26">26/2</a></div>
<div class="Normal">&nbsp;{<I><A HREF="defect1.html#8652/0025">8652/0025</A></I>} 
{<I><A HREF="defect1.html#8652/0026">8652/0026</A></I>} {<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AIs/AI-00044.TXT">AI95-00044-01</A></I>} 
{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AIs/AI-00150.TXT">AI95-00150-01</A></I>} 
{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AIs/AI-00377.TXT">AI95-00377-01</A></I>} 
A nonoverridable declaration is illegal if there is a homograph occurring 
immediately within the same declarative region that is visible at the 
place of the declaration, and is not hidden from all visibility by the 
nonoverridable declaration. In addition, a type extension is illegal 
if somewhere within its immediate scope it has two visible components 
with the same name. Similarly, the <SPAN Class="swiss"><A HREF="AA-10-1-2.html#S0253">context_clause</A></SPAN> 
for a compilation unit is illegal if it mentions (in a <SPAN Class="swiss"><A HREF="AA-10-1-2.html#S0255">with_clause</A></SPAN>) 
some library unit, and there is a homograph of the library unit that 
is visible at the place of the compilation unit, and the homograph and 
the mentioned library unit are both declared immediately within the same 
declarative region.<A NAME="I4107"></A> These rules also apply to dispatching 
operations declared in the visible part of an instance of a generic unit. 
However, they do not apply to other overloadable declarations in an instance[; 
such declarations may have type conformant profiles in the instance, 
so long as the corresponding declarations in the generic were not type 
conformant]. <A NAME="I4108"></A></div>
<div class="paranum"><a name="p26.a">26.a</a></div>
<div class="Annotations" style="margin-bottom: 0.4em"><B>Discussion: 
</B>Normally, these rules just mean you can't explicitly declare two 
homographs immediately within the same declarative region. The wording 
is designed to handle the following special cases:&nbsp;</div>
<div class="paranum"><a name="p26.b">26.b</a></div>
<div class="SmallBulleted">If the second declaration completes the first 
one, the second declaration is legal.</div>
<div class="paranum"><a name="p26.c">26.c</a></div>
<div class="SmallBulleted" style="margin-bottom: 0.3em">If the body 
of a library unit contains an explicit homograph of a child of that same 
library unit, this is illegal only if the body mentions the child in 
its <SPAN Class="swiss"><A HREF="AA-10-1-2.html#S0253">context_clause</A></SPAN>, 
or if some subunit mentions the child. Here's an example:&nbsp;</div>
<div class="paranum"><a name="p26.d">26.d</a></div>
<div class="SmallExamples"><B>package</B>&nbsp;P&nbsp;<B>is</B><BR>
<B>end</B>&nbsp;P;</div>
<div class="paranum"><a name="p26.e">26.e</a></div>
<div class="SmallExamples"><B>package</B>&nbsp;P.Q&nbsp;<B>is</B><BR>
<B>end</B>&nbsp;P.Q;</div>
<div class="paranum"><a name="p26.f">26.f</a></div>
<div class="SmallExamples"><B>package</B>&nbsp;<B>body</B>&nbsp;P&nbsp;<B>is</B><BR>
&nbsp;&nbsp;&nbsp;&nbsp;Q&nbsp;:&nbsp;Integer;&nbsp;--<SPAN Class="roman"><I>&nbsp;OK;&nbsp;we&nbsp;cannot&nbsp;see&nbsp;package&nbsp;P.Q&nbsp;here.</I></SPAN><BR>
&nbsp;&nbsp;&nbsp;&nbsp;<B>procedure</B>&nbsp;Sub&nbsp;<B>is</B>&nbsp;<B>separate</B>;<BR>
<B>end</B>&nbsp;P;</div>
<div class="paranum"><a name="p26.g">26.g</a></div>
<div class="SmallExamples"><B>with</B>&nbsp;P.Q;<BR>
<B>separate</B>(P)<BR>
<B>procedure</B>&nbsp;Sub&nbsp;<B>is</B>&nbsp;--<SPAN Class="roman"><I>&nbsp;Illegal.</I></SPAN><BR>
<B>begin</B><BR>
&nbsp;&nbsp;&nbsp;&nbsp;<B>null</B>;<BR>
<B>end</B>&nbsp;Sub;</div>
<div class="paranum"><a name="p26.h">26.h</a></div>
<div class="SmallBulleted-NoPrefix">If package body P said &quot;<B>with</B> 
P.Q;&quot;, then it would be illegal to declare the homograph Q: Integer. 
But it does not, so the body of P is OK. However, the subunit would be 
able to see both P.Q's, and is therefore illegal.</div>
<div class="paranum"><a name="p26.i">26.i</a></div>
<div class="SmallBulleted-NoPrefix">A previous version of Ada 9X allowed 
the subunit, and said that references to P.Q would tend to be ambiguous. 
However, that was a bad idea, because it requires overload resolution 
to resolve references to directly visible nonoverloadable homographs, 
which is something compilers have never before been required to do.</div>
<div class="paranum"><a name="p26.i.1">26.i.1/1</a></div>
<div class="SmallBulleted" style="margin-bottom: 0.3em">{<I><A HREF="defect1.html#8652/0026">8652/0026</A></I>} 
{<I><A HREF="defect2.html#8652/0102">8652/0102</A></I>} {<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AIs/AI-00150.TXT">AI95-00150-01</A></I>} 
{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AIs/AI-00157.TXT">AI95-00157-01</A></I>} 
If a type extension contains a component with the same name as a component 
in an ancestor type, there must be no place where both components are 
visible. For instance:&nbsp;</div>
<div class="paranum"><a name="p26.i.2">26.i.2/1</a></div>
<div class="SmallExamples"><B>package</B>&nbsp;A&nbsp;<B>is</B><BR>
&nbsp;&nbsp;&nbsp;<B>type</B>&nbsp;T&nbsp;<B>is&nbsp;tagged&nbsp;private</B>;<BR>
&nbsp;&nbsp;&nbsp;<B>package</B>&nbsp;B&nbsp;<B>is</B><BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<B>type</B>&nbsp;NT&nbsp;<B>is&nbsp;new</B>&nbsp;T&nbsp;<B>with&nbsp;record</B><BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;I:&nbsp;Integer;&nbsp;--&nbsp;<SPAN Class="roman"><I>Illegal&nbsp;because&nbsp;T.I&nbsp;is&nbsp;visible&nbsp;in&nbsp;the&nbsp;body.</I></SPAN><BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<B>end&nbsp;record</B>;&nbsp;--&nbsp;<SPAN Class="roman"><I>T.I&nbsp;is&nbsp;not&nbsp;visible&nbsp;here.</I></SPAN><BR>
&nbsp;&nbsp;&nbsp;<B>end</B>&nbsp;B;<BR>
<B>private</B><BR>
&nbsp;&nbsp;&nbsp;<B>type</B>&nbsp;T&nbsp;<B>is&nbsp;tagged&nbsp;record</B><BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;I:&nbsp;Integer;&nbsp;--&nbsp;<SPAN Class="roman"><I>Illegal&nbsp;because&nbsp;T.I&nbsp;is&nbsp;visible&nbsp;in&nbsp;the&nbsp;body.</I></SPAN><BR>
&nbsp;&nbsp;&nbsp;<B>end&nbsp;record</B>;<BR>
<B>end</B>&nbsp;A;</div>
<div class="paranum"><a name="p26.i.3">26.i.3/2</a></div>
<div class="SmallExamples">{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AIs/AI-00114.TXT">AI95-00114-01</A></I>} 
<B>package</B>&nbsp;<B>body</B>&nbsp;A&nbsp;<B>is</B><BR>
&nbsp;&nbsp;&nbsp;<B>package</B>&nbsp;<B>body</B>&nbsp;B&nbsp;<B>is</B><BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;--&nbsp;<SPAN Class="roman"><I>T.I&nbsp;becomes&nbsp;visible&nbsp;here.</I></SPAN><BR>
&nbsp;&nbsp;&nbsp;<B>end</B>&nbsp;B;<BR>
<B>end</B>&nbsp;A;</div>
<div class="paranum"><a name="p26.i.4">26.i.4/1</a></div>
<div class="SmallExamples"><B>package</B>&nbsp;A.C&nbsp;<B>is</B><BR>
&nbsp;&nbsp;&nbsp;<B>type</B>&nbsp;NT2&nbsp;<B>is&nbsp;new</B>&nbsp;A.T&nbsp;<B>with&nbsp;record</B><BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;I:&nbsp;Integer;&nbsp;--&nbsp;<SPAN Class="roman"><I>Illegal&nbsp;because&nbsp;T.I&nbsp;is&nbsp;visible&nbsp;in&nbsp;the&nbsp;private&nbsp;part.</I></SPAN><BR>
&nbsp;&nbsp;&nbsp;<B>end&nbsp;record</B>;&nbsp;--&nbsp;<SPAN Class="roman"><I>T.I&nbsp;is&nbsp;not&nbsp;visible&nbsp;here.</I></SPAN><BR>
<B>private</B><BR>
&nbsp;&nbsp;&nbsp;&nbsp;--&nbsp;<SPAN Class="roman"><I>T.I&nbsp;is&nbsp;visible&nbsp;here.</I></SPAN><BR>
<B>end</B>&nbsp;A.C;</div>
<div class="paranum"><a name="p26.i.5">26.i.5/1</a></div>
<div class="SmallExamples"><B>with</B>&nbsp;A;<BR>
<B>package</B>&nbsp;D&nbsp;<B>is</B><BR>
&nbsp;&nbsp;&nbsp;<B>type</B>&nbsp;NT3&nbsp;<B>is&nbsp;new</B>&nbsp;A.T&nbsp;<B>with&nbsp;record</B><BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;I:&nbsp;Integer;&nbsp;--&nbsp;<SPAN Class="roman"><I>Legal&nbsp;because&nbsp;T.I&nbsp;is&nbsp;never&nbsp;visible&nbsp;in&nbsp;this&nbsp;package.</I></SPAN><BR>
&nbsp;&nbsp;&nbsp;<B>end&nbsp;record</B>;<BR>
<B>end</B>&nbsp;D;</div>
<div class="paranum"><a name="p26.i.6">26.i.6/1</a></div>
<div class="SmallExamples"><B>with</B>&nbsp;D;<BR>
<B>package</B>&nbsp;A.E&nbsp;<B>is</B><BR>
&nbsp;&nbsp;&nbsp;<B>type</B>&nbsp;NT4&nbsp;<B>is&nbsp;new</B>&nbsp;D.NT3&nbsp;<B>with&nbsp;null&nbsp;record</B>;<BR>
&nbsp;&nbsp;&nbsp;X&nbsp;:&nbsp;NT4;<BR>
&nbsp;&nbsp;&nbsp;I1&nbsp;:&nbsp;Integer&nbsp;:=&nbsp;X.I;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;--&nbsp;<SPAN Class="roman"><I>D.NT3.I</I></SPAN><BR>
&nbsp;&nbsp;&nbsp;I2&nbsp;:&nbsp;Integer&nbsp;:=&nbsp;D.NT3(X).I;&nbsp;--&nbsp;<SPAN Class="roman"><I>D.NT3.I</I></SPAN><BR>
&nbsp;&nbsp;&nbsp;I3&nbsp;:&nbsp;Integer&nbsp;:=&nbsp;A.T(X).I;&nbsp;&nbsp;&nbsp;--&nbsp;<SPAN Class="roman"><I>A.T.I</I></SPAN><BR>
<B>end</B>&nbsp;A.E;</div>
<div class="paranum"><a name="p26.i.7">26.i.7/1</a></div>
<div class="SmallBulleted-NoPrefix">{<I><A HREF="defect2.html#8652/0102">8652/0102</A></I>} 
{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AIs/AI-00157.TXT">AI95-00157-01</A></I>} 
D.NT3 can have a component I because the component I of the parent type 
is never visible. The parent component exists, of course, but is never 
declared for the type D.NT3. In the child package A.E, the component 
I of A.T is visible, but that does not change the fact that the A.T.I 
component was never declared for type D.NT3. Thus, A.E.NT4 does not (visibly) 
inherit the component I from A.T, while it does inherit the component 
I from D.NT3. Of course, both components exist, and can be accessed by 
a type conversion as shown above. This behavior stems from the fact that 
every characteristic of a type (including components) must be declared 
somewhere in the innermost declarative region containing the type &mdash; 
if the characteristic is never visible in that declarative region, it 
is never declared. Therefore, such characteristics do not suddenly become 
available even if they are in fact visible in some other scope. See <A HREF="AA-7-3-1.html">7.3.1</A> 
for more on the rules.</div>
<div class="paranum"><a name="p26.i.8">26.i.8/2</a></div>
<div class="SmallBulleted">{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AIs/AI-00377.TXT">AI95-00377-01</A></I>} 
It is illegal to mention both an explicit child of an instance, and a 
child of the generic from which the instance was instantiated. This is 
easier to understand with an example:&nbsp;</div>
<div class="paranum"><a name="p26.i.9">26.i.9/2</a></div>
<div class="SmallExamples"><B>generic</B><BR>
<B>package</B>&nbsp;G1&nbsp;<B>is</B><BR>
<B>end</B>&nbsp;G1;</div>
<div class="paranum"><a name="p26.i.10">26.i.10/2</a></div>
<div class="SmallExamples"><B>generic</B><BR>
<B>package</B>&nbsp;G1.G2&nbsp;<B>is</B><BR>
<B>end</B>&nbsp;G1.G2;</div>
<div class="paranum"><a name="p26.i.11">26.i.11/2</a></div>
<div class="SmallExamples"><B>with</B>&nbsp;G1;<BR>
<B>package</B>&nbsp;I1&nbsp;<B>is&nbsp;new</B>&nbsp;G1;</div>
<div class="paranum"><a name="p26.i.12">26.i.12/2</a></div>
<div class="SmallExamples"><B>package</B>&nbsp;I1.G2&nbsp;<B>renames</B>&nbsp;...</div>
<div class="paranum"><a name="p26.i.13">26.i.13/2</a></div>
<div class="SmallExamples"><B>with</B>&nbsp;G1.G2;<BR>
<B>with</B>&nbsp;I1.G2;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;--&nbsp;<SPAN Class="roman"><I>Illegal</I></SPAN><BR>
<B>package</B>&nbsp;Bad&nbsp;<B>is</B>&nbsp;...</div>
<div class="paranum"><a name="p26.i.14">26.i.14/2</a></div>
<div class="SmallBulleted-NoPrefix">The context clause for Bad is illegal 
as I1 has an implicit declaration of I1.G2 based on the generic child 
G1.G2, as well as the mention of the explicit child I1.G2. As in the 
previous cases, this is illegal only if the context clause makes both 
children visible; the explicit child can be mentioned as long as the 
generic child is not (and vice-versa).&nbsp;</div>
<div class="paranum"><a name="p26.j">26.j</a></div>
<div class="Annotations">Note that we need to be careful which things 
we make &quot;hidden from all visibility&quot; versus which things we 
make simply illegal for names to denote. The distinction is subtle. The 
rules that disallow names denoting components within a type declaration 
(see <A HREF="AA-3-7.html">3.7</A>) do not make the components invisible 
at those places, so that the above rule makes components with the same 
name illegal. The same is true for the rule that disallows names denoting 
formal parameters within a <SPAN Class="swiss"><A HREF="AA-6-1.html#S0174">formal_part</A></SPAN> 
(see <A HREF="AA-6-1.html">6.1</A>).&nbsp;</div>
<div class="paranum"><a name="p26.k">26.k</a></div>
<div class="Annotations"><B>Discussion:&nbsp;</B>The part about instances 
is from AI83-00012. The reason it says &ldquo;overloadable declarations&rdquo; 
is because we don't want it to apply to type extensions that appear in 
an instance; components are not overloadable.&nbsp;</div>
<div class="NotesHeader">NOTES</div>
<div class="paranum"><a name="p27">27</a></div>
<div class="Notes">5&nbsp;&nbsp;Visibility for compilation units follows 
from the definition of the environment in <A HREF="AA-10-1-4.html">10.1.4</A>, 
except that it is necessary to apply a <SPAN Class="swiss"><A HREF="AA-10-1-2.html#S0255">with_clause</A></SPAN> 
to obtain visibility to a <SPAN Class="swiss"><A HREF="AA-10-1-1.html#S0249">library_unit_declaration</A></SPAN> 
or <SPAN Class="swiss"><A HREF="AA-10-1-1.html#S0250">library_unit_renaming_declaration</A></SPAN>.</div>
<div class="paranum"><a name="p28">28</a></div>
<div class="Notes">6&nbsp;&nbsp;In addition to the visibility rules given 
above, the meaning of the occurrence of a <SPAN Class="swiss"><A HREF="AA-4-1.html#S0092">direct_name</A></SPAN> 
or <SPAN Class="swiss"><A HREF="AA-4-1-3.html#S0099">selector_name</A></SPAN> 
at a given place in the text can depend on the overloading rules (see 
<A HREF="AA-8-6.html">8.6</A>).</div>
<div class="paranum"><a name="p29">29</a></div>
<div class="Notes">7&nbsp;&nbsp;Not all contexts where an <SPAN Class="swiss"><A HREF="AA-2-3.html#S0002">identifier</A></SPAN>, 
<SPAN Class="swiss"><A HREF="AA-2-5.html#S0015">character_literal</A></SPAN>, 
or <SPAN Class="swiss"><A HREF="AA-6-1.html#S0170">operator_symbol</A></SPAN> 
are allowed require visibility of a corresponding declaration. Contexts 
where visibility is not required are identified by using one of these 
three syntactic categories directly in a syntax rule, rather than using 
<SPAN Class="swiss"><A HREF="AA-4-1.html#S0092">direct_name</A></SPAN> 
or <SPAN Class="swiss"><A HREF="AA-4-1-3.html#S0099">selector_name</A></SPAN>. 
</div>
<div class="paranum"><a name="p29.a">29.a</a></div>
<div class="Annotations" style="margin-bottom: 0.4em"><B>Ramification: 
</B>An <SPAN Class="swiss"><A HREF="AA-2-3.html#S0002">identifier</A></SPAN>, 
<SPAN Class="swiss"><A HREF="AA-2-5.html#S0015">character_literal</A></SPAN> 
or <SPAN Class="swiss"><A HREF="AA-6-1.html#S0170">operator_symbol</A></SPAN> 
that occurs in one of the following contexts is not required to denote 
a visible or directly visible declaration:&nbsp;</div>
<div class="paranum"><a name="p29.b">29.b</a></div>
<div class="SmallEnumerated-Term">1.</div><div class="SmallEnumerated-Body">
A defining name.</div>
<div class="paranum"><a name="p29.c">29.c</a></div>
<div class="SmallEnumerated-Term">2.</div><div class="SmallEnumerated-Body">
The <SPAN Class="swiss"><A HREF="AA-2-3.html#S0002">identifier</A></SPAN>s 
or <SPAN Class="swiss"><A HREF="AA-6-1.html#S0170">operator_symbol</A></SPAN> 
that appear after the reserved word <B>end</B> in a <SPAN Class="swiss"><A HREF="AA-3-11.html#S0090">proper_body</A></SPAN>. 
Similarly for &ldquo;<B>end loop</B>&rdquo;, etc.</div>
<div class="paranum"><a name="p29.d">29.d</a></div>
<div class="SmallEnumerated-Term">3.</div><div class="SmallEnumerated-Body">
An <SPAN Class="swiss"><A HREF="AA-4-1-4.html#S0101">attribute_designator</A></SPAN>.</div>
<div class="paranum"><a name="p29.e">29.e</a></div>
<div class="SmallEnumerated-Term">4.</div><div class="SmallEnumerated-Body">
A <SPAN Class="swiss"><A HREF="AA-2-8.html#S0019">pragma</A></SPAN> <SPAN Class="swiss"><A HREF="AA-2-3.html#S0002">identifier</A></SPAN>.</div>
<div class="paranum"><a name="p29.f">29.f</a></div>
<div class="SmallEnumerated-Term">5.</div><div class="SmallEnumerated-Body">
A <I>pragma_argument_</I><SPAN Class="swiss"><A HREF="AA-2-3.html#S0002">identifier</A></SPAN>.</div>
<div class="paranum"><a name="p29.g">29.g</a></div>
<div class="SmallEnumerated-Term">6.</div><div class="SmallEnumerated-Body">
An <SPAN Class="swiss"><A HREF="AA-2-3.html#S0002">identifier</A></SPAN> 
specific to a pragma used in a pragma argument.</div>
<div class="paranum"><a name="p29.g.1">29.g.1/3</a></div>
<div class="SmallEnumerated-Term">7.</div><div class="SmallEnumerated-Body">
{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI05s/AI05-0183-1.TXT">AI05-0183-1</A></I>} 
An <SPAN Class="swiss"><A HREF="AA-13-1-1.html#S0308">aspect_mark</A></SPAN>;</div>
<div class="paranum"><a name="p29.g.2">29.g.2/3</a></div>
<div class="SmallEnumerated-Term">8.</div><div class="SmallEnumerated-Body">
{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI05s/AI05-0183-1.TXT">AI05-0183-1</A></I>} 
An <SPAN Class="swiss"><A HREF="AA-2-3.html#S0002">identifier</A></SPAN> 
specific to an aspect used in an <SPAN Class="swiss"><A HREF="AA-13-1-1.html#S0309">aspect_definition</A></SPAN>. 
</div>
<div class="paranum"><a name="p29.h">29.h</a></div>
<div class="Annotations">The visibility rules have nothing to do with 
the above cases; the meanings of such things are defined elsewhere. Reserved 
words are not <SPAN Class="swiss"><A HREF="AA-2-3.html#S0002">identifier</A></SPAN>s; 
the visibility rules don't apply to them either.</div>
<div class="paranum"><a name="p29.i">29.i</a></div>
<div class="Annotations">Because of the way we have defined &quot;declaration&quot;, 
it is possible for a usage name to denote a <SPAN Class="swiss"><A HREF="AA-6-3.html#S0177">subprogram_body</A></SPAN>, 
either within that body, or (for a nonlibrary unit) after it (since the 
body hides the corresponding declaration, if any). Other bodies do not 
work that way. Completions of <SPAN Class="swiss"><A HREF="AA-3-2-1.html#S0023">type_declaration</A></SPAN>s 
and deferred constant declarations do work that way. <SPAN Class="swiss"><A HREF="AA-9-5-2.html#S0219">Accept_statement</A></SPAN>s 
are never denoted, although the <SPAN Class="swiss"><A HREF="AA-6-1.html#S0175">parameter_specification</A></SPAN>s 
in their profiles can be.</div>
<div class="paranum"><a name="p29.j">29.j</a></div>
<div class="Annotations" style="margin-bottom: 0.4em">The scope of a 
subprogram does not start until after its profile. Thus, the following 
is legal:&nbsp;</div>
<div class="paranum"><a name="p29.k">29.k</a></div>
<div class="SmallExamples">X&nbsp;:&nbsp;<B>constant</B>&nbsp;Integer&nbsp;:=&nbsp;17;<BR>
...<BR>
<B>package</B>&nbsp;P&nbsp;<B>is</B><BR>
&nbsp;&nbsp;&nbsp;&nbsp;<B>procedure</B>&nbsp;X(Y&nbsp;:&nbsp;<B>in</B>&nbsp;Integer&nbsp;:=&nbsp;X);<BR>
<B>end</B>&nbsp;P;</div>
<div class="paranum"><a name="p29.l">29.l</a></div>
<div class="Annotations">The body of the subprogram will probably be 
illegal, however, since the constant X will be hidden by then.</div>
<div class="paranum"><a name="p29.m">29.m</a></div>
<div class="Annotations" style="margin-bottom: 0.4em">The rule is different 
for generic subprograms, since they are not overloadable; the following 
is illegal:&nbsp;</div>
<div class="paranum"><a name="p29.n">29.n</a></div>
<div class="SmallExamples">X&nbsp;:&nbsp;<B>constant</B>&nbsp;Integer&nbsp;:=&nbsp;17;<BR>
<B>package</B>&nbsp;P&nbsp;<B>is</B><BR>
&nbsp;&nbsp;&nbsp;&nbsp;<B>generic</B><BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Z&nbsp;:&nbsp;Integer&nbsp;:=&nbsp;X;&nbsp;--<SPAN Class="roman"><I>&nbsp;Illegal!</I></SPAN><BR>
&nbsp;&nbsp;&nbsp;&nbsp;<B>procedure</B>&nbsp;X(Y&nbsp;:&nbsp;<B>in</B>&nbsp;Integer&nbsp;:=&nbsp;X);&nbsp;--<SPAN Class="roman"><I>&nbsp;Illegal!</I></SPAN><BR>
<B>end</B>&nbsp;P;</div>
<div class="paranum"><a name="p29.o">29.o</a></div>
<div class="Annotations">The constant X is hidden from direct visibility 
by the generic declaration.&nbsp;</div>

<H4 Class="centered">Extensions to Ada 83</H4>
<div class="paranum"><a name="p29.p">29.p</a></div>
<div class="Annotations"><A NAME="I4109"></A>Declarations with the same 
defining name as that of a subprogram or entry being defined are nevertheless 
visible within the subprogram specification or entry declaration.&nbsp;</div>

<H4 Class="centered">Wording Changes from Ada 83</H4>
<div class="paranum"><a name="p29.q">29.q</a></div>
<div class="Annotations">The term &ldquo;visible by selection&rdquo; 
is no longer defined. We use the terms &ldquo;directly visible&rdquo; 
and &ldquo;visible&rdquo; (among other things). There are only two regions 
of text that are of interest, here: the region in which a declaration 
is visible, and the region in which it is directly visible.</div>
<div class="paranum"><a name="p29.r">29.r</a></div>
<div class="Annotations">Visibility is defined only for declarations. 
</div>

<H4 Class="centered">Incompatibilities With Ada 95</H4>
<div class="paranum"><a name="p29.s">29.s/2</a></div>
<div class="Annotations" style="margin-bottom: 0.4em">{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AIs/AI-00251.TXT">AI95-00251-01</A></I>} 
<A NAME="I4110"></A>Added rules to handle the inheritance and overriding 
of multiple homographs for a single type declaration, in order to support 
multiple inheritance from interfaces. The new rules are intended to be 
compatible with the existing rules so that programs that do not use interfaces 
do not change their legality. However, there is a very rare case where 
this is not true:&nbsp;</div>
<div class="paranum"><a name="p29.t">29.t/2</a></div>
<div class="SmallExamples"><B>generic</B><BR>
&nbsp;&nbsp;&nbsp;<B>type</B>&nbsp;T1&nbsp;<B>is&nbsp;private</B>;<BR>
&nbsp;&nbsp;&nbsp;<B>type</B>&nbsp;T2&nbsp;<B>is&nbsp;private</B>;<BR>
<B>package</B>&nbsp;G&nbsp;<B>is</B><BR>
&nbsp;&nbsp;&nbsp;<B>type</B>&nbsp;T&nbsp;<B>is&nbsp;null&nbsp;record</B>;<BR>
&nbsp;&nbsp;&nbsp;<B>procedure</B>&nbsp;P&nbsp;(X&nbsp;:&nbsp;T;&nbsp;Y&nbsp;:&nbsp;T1);<BR>
&nbsp;&nbsp;&nbsp;<B>procedure</B>&nbsp;P&nbsp;(X&nbsp;:&nbsp;T;&nbsp;Z&nbsp;:&nbsp;T2);<BR>
<B>end</B>&nbsp;G;]</div>
<div class="paranum"><a name="p29.u">29.u/2</a></div>
<div class="SmallExamples"><B>package</B>&nbsp;I&nbsp;<B>is&nbsp;new</B>&nbsp;G&nbsp;(Integer,&nbsp;Integer);&nbsp;--&nbsp;<SPAN Class="roman"><I>Exports&nbsp;homographs&nbsp;of&nbsp;P.</I></SPAN></div>
<div class="paranum"><a name="p29.v">29.v/2</a></div>
<div class="SmallExamples"><B>type</B>&nbsp;D&nbsp;<B>is&nbsp;new</B>&nbsp;I.T;&nbsp;--&nbsp;<SPAN Class="roman"><I>Both&nbsp;Ps&nbsp;are&nbsp;inherited.</I></SPAN></div>
<div class="paranum"><a name="p29.w">29.w/2</a></div>
<div class="SmallExamples">Obj&nbsp;:&nbsp;D;</div>
<div class="paranum"><a name="p29.x">29.x/2</a></div>
<div class="SmallExamples">P&nbsp;(Obj,&nbsp;Z&nbsp;=&gt;&nbsp;10);&nbsp;--&nbsp;<SPAN Class="roman"><I>Legal&nbsp;in&nbsp;Ada&nbsp;95,&nbsp;illegal&nbsp;in&nbsp;Ada&nbsp;2005.</I></SPAN></div>
<div class="paranum"><a name="p29.y">29.y/2</a></div>
<div class="Annotations">The call to P would resolve in Ada 95 by using 
the parameter name, while the procedures P would be hidden from all visibility 
in Ada 2005 and thus would not resolve. This case doesn't seem worth 
making the rules any more complex than they already are.</div>
<div class="paranum"><a name="p29.z">29.z/2</a></div>
<div class="Annotations">{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AIs/AI-00377.TXT">AI95-00377-01</A></I>} 
<B>Amendment Correction:</B> A <SPAN Class="swiss"><A HREF="AA-10-1-2.html#S0255">with_clause</A></SPAN> 
is illegal if it would create a homograph of an implicitly declared generic 
child (see <A HREF="AA-10-1-1.html">10.1.1</A>). An Ada 95 compiler could 
have allowed this, but which unit of the two units involved would be 
denoted wasn't specified, so any successful use isn't portable. Removing 
one of the two <SPAN Class="swiss"><A HREF="AA-10-1-2.html#S0255">with_clause</A></SPAN>s 
involved will fix the problem.&nbsp;</div>

<H4 Class="centered">Wording Changes from Ada 95</H4>
<div class="paranum"><a name="p29.aa">29.aa/2</a></div>
<div class="Annotations">{<I><A HREF="defect1.html#8652/0025">8652/0025</A></I>} 
{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AIs/AI-00044.TXT">AI95-00044-01</A></I>} 
<B>Corrigendum:</B> Clarified the overriding rules so that &quot;/=&quot; 
and <SPAN Class="swiss"><A HREF="AA-5-1.html#S0151">statement_identifier</A></SPAN>s 
are covered.</div>
<div class="paranum"><a name="p29.bb">29.bb/2</a></div>
<div class="Annotations">{<I><A HREF="defect1.html#8652/0026">8652/0026</A></I>} 
{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AIs/AI-00150.TXT">AI95-00150-01</A></I>} 
<B>Corrigendum:</B> Clarified that is it never possible for two components 
with the same name to be visible; any such program is illegal.</div>
<div class="paranum"><a name="p29.cc">29.cc/2</a></div>
<div class="Annotations">{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AIs/AI-00195.TXT">AI95-00195-01</A></I>} 
{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AIs/AI-00408.TXT">AI95-00408-01</A></I>} 
The visibility of an <SPAN Class="swiss"><A HREF="AA-13-3.html#S0310">attribute_definition_clause</A></SPAN> 
is defined so that it can be used by the stream attribute availability 
rules (see <A HREF="AA-13-13-2.html">13.13.2</A>).</div>
<div class="paranum"><a name="p29.dd">29.dd/2</a></div>
<div class="Annotations">{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AIs/AI-50217.TXT">AI95-00217-06</A></I>} 
The visibility of a limited view of a library package is defined (see 
<A HREF="AA-10-1-1.html">10.1.1</A>).&nbsp;</div>

<H4 Class="centered">Wording Changes from Ada 2005</H4>
<div class="paranum"><a name="p29.ee">29.ee/4</a></div>
<div class="Annotations">{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI05s/AI05-0177-1.TXT">AI05-0177-1</A></I>} 
{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI12s/AI12-0157-1.TXT">AI12-0157-1</A></I>} 
Added wording so that the parameters of an <SPAN Class="swiss"><A HREF="AA-6-8.html#S0189">expression_function_declaration</A></SPAN> 
are visible in the <span class="insert4">return expression</span><span class="delete4"><SPAN Class="swiss"><A HREF="AA-4-4.html#S0117">&nbsp;expression</A></SPAN></span> 
of the function. (It would be pretty useless without such a rule.)</div>
<div class="paranum"><a name="p29.ff">29.ff/3</a></div>
<div class="Annotations">{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI05s/AI05-0183-1.TXT">AI05-0183-1</A></I>} 
The visibility of an <SPAN Class="swiss"><A HREF="AA-13-1-1.html#S0307">aspect_specification</A></SPAN> 
is defined so that it can be used in various other rules.&nbsp;</div>

<HR>
<div style="margin-top: 0.0em; margin-bottom: 0.6em"><A HREF="AA-TOC.html"><IMG SRC="cont.gif" ALT="Contents" BORDER=0></A>&nbsp;
&nbsp;<A HREF="AA-0-5.html"><IMG SRC="index.gif" ALT="Index" BORDER=0></A>&nbsp;
&nbsp;<A HREF="AA-STDS.html"><IMG SRC="lib.gif" ALT="References" BORDER=0></A>&nbsp;
&nbsp;<A HREF="AA-SRCH.html"><IMG SRC="find.gif" ALT="Search" BORDER=0></A>&nbsp;
&nbsp;<A HREF="AA-8-2.html"><IMG SRC="prev.gif" ALT="Previous" BORDER=0></A>&nbsp;
&nbsp;<A HREF="AA-8-3-1.html"><IMG SRC="next.gif" ALT="Next" BORDER=0></A>&nbsp;
</div>
<DIV Style="margin-top:0.0em"><IMG SRC="AE_logo.gif" height=100 width=113 align=right ALT="Ada-Europe">
<SPAN Style="vertical-align: middle; font-size:120%">Ada 2005 and 2012 Editions sponsored in part by <SPAN Style="font-size: 125%"><A HREF="http://www.ada-europe.org/"><B>Ada-Europe</B></A></SPAN></SPAN></DIV>
</BODY>
</HTML>
