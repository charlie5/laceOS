<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
"http://www.w3.org/TR/html4/loose.dtd">
<HTML>
<HEAD>
    <TITLE>Delay Accuracy</TITLE>
    <META http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
    <META NAME="Author" CONTENT="JTC1/SC22/WG9/ARG, by Randall Brukardt, ARG Editor">
    <META NAME="GENERATOR" CONTENT="Arm_Form.Exe, Ada Reference Manual generator">
    <STYLE type="text/css">
    H4.centered {text-align: center}
    SPAN.swiss {font-family: Arial, Helvetica, sans-serif; font-size: 92%}
    SPAN.roman {font-family: "Times New Roman", Times, serif}
    DIV.paranum {float: left; font-family: Arial, Helvetica, sans-serif; font-size: 64%; width: 2.8em; margin-left: -0.4em; margin-right: -3.0em; margin-top: 0.2em}
    TT {font-family: "Courier New", monospace}
    DT {display: compact}
    A.Bar:link {font-family: Arial, Helvetica, sans-serif; font-style: normal; text-decoration: none; color: rgb(204,204,51)}
    A.Bar:visited {font-family: Arial, Helvetica, sans-serif; font-style: normal; text-decoration: none; color: rgb(204,204,51)}
    DIV.Normal {font-family: "Times New Roman", Times, serif; line-height: 122%; margin-left: 1.2em; margin-bottom: 0.6em}
    DIV.Bulleted-NoPrefix {font-family: "Times New Roman", Times, serif; line-height: 122%; margin-left: 3.2em; margin-right: 2.0em; margin-top: 0em; margin-bottom: 0.5em}
    DIV.Bulleted {font-family: "Times New Roman", Times, serif; line-height: 122%; margin-left: 3.2em; margin-right: 2.0em; margin-top: 0em; margin-bottom: 0.5em; display: list-item; list-style-type: disc}
    </STYLE>
</HEAD>
<BODY TEXT="#000000" BGCOLOR="#FFFFF0" LINK="#000080" VLINK="#330033" ALINK="#0000FF">
<DIV><SPAN Style="font-size:200%; color: rgb(0,0,153)"><B>Ada Reference Manual</B></SPAN> &mdash; <A HREF="RM-TTL.html"><B>Legal Information</B></A></DIV>
<div style="margin-top: 0.6em; margin-bottom: 0.0em"><A HREF="RM-TOC.html"><IMG SRC="cont.gif" ALT="Contents" BORDER=0></A>&nbsp;
&nbsp;<A HREF="RM-0-5.html"><IMG SRC="index.gif" ALT="Index" BORDER=0></A>&nbsp;
&nbsp;<A HREF="RM-STDS.html"><IMG SRC="lib.gif" ALT="References" BORDER=0></A>&nbsp;
&nbsp;<A HREF="RM-SRCH.html"><IMG SRC="find.gif" ALT="Search" BORDER=0></A>&nbsp;
&nbsp;<A HREF="RM-D-8.html"><IMG SRC="prev.gif" ALT="Previous" BORDER=0></A>&nbsp;
&nbsp;<A HREF="RM-D-10.html"><IMG SRC="next.gif" ALT="Next" BORDER=0></A>&nbsp;
</div>
<HR>
<H1>D.9 Delay Accuracy</H1>
<div class="paranum"><a name="p1">1/3</a></div>
<div class="Normal">This subclause specifies performance requirements 
for the <SPAN Class="swiss"><A HREF="RM-9-6.html#S0227">delay_statement</A></SPAN>. 
The rules apply both to <SPAN Class="swiss"><A HREF="RM-9-6.html#S0229">delay_relative_statement</A></SPAN> 
and to <SPAN Class="swiss"><A HREF="RM-9-6.html#S0228">delay_until_statement</A></SPAN>. 
Similarly, they apply equally to a simple <SPAN Class="swiss"><A HREF="RM-9-6.html#S0227">delay_statement</A></SPAN> 
and to one which appears in a <SPAN Class="swiss"><A HREF="RM-9-7-1.html#S0235">delay_alternative</A></SPAN>. 
</div>

<H4 Class="centered">Dynamic Semantics</H4>
<div class="paranum"><a name="p2">2</a></div>
<div class="Normal" style="margin-bottom: 0.4em">The effect of the <SPAN Class="swiss"><A HREF="RM-9-6.html#S0227">delay_statement</A></SPAN> 
for Real_Time.Time is defined in terms of Real_Time.Clock:&nbsp;</div>
<div class="paranum"><a name="p3">3</a></div>
<div class="Bulleted">If C<SUB><SPAN STYLE="font-size: 140%"><SPAN STYLE="font-size: 64%">1</SPAN></SPAN></SUB> 
is a value of Clock read before a task executes a <SPAN Class="swiss"><A HREF="RM-9-6.html#S0229">delay_relative_statement</A></SPAN> 
with duration D, and C<SUB><SPAN STYLE="font-size: 140%"><SPAN STYLE="font-size: 64%">2</SPAN></SPAN></SUB> 
is a value of Clock read after the task resumes execution following that 
<SPAN Class="swiss"><A HREF="RM-9-6.html#S0227">delay_statement</A></SPAN>, 
then C<SUB><SPAN STYLE="font-size: 140%"><SPAN STYLE="font-size: 64%">2</SPAN></SPAN></SUB> 
&ndash; C<SUB><SPAN STYLE="font-size: 140%"><SPAN STYLE="font-size: 64%">1</SPAN></SPAN></SUB> 
&gt;= D.</div>
<div class="paranum"><a name="p4">4</a></div>
<div class="Bulleted">If C is a value of Clock read after a task resumes 
execution following a <SPAN Class="swiss"><A HREF="RM-9-6.html#S0228">delay_until_statement</A></SPAN> 
with Real_Time.Time value T, then C &gt;= T.&nbsp;</div>
<div class="paranum"><a name="p5">5</a></div>
<div class="Normal"><A NAME="I7969"></A><A NAME="I7970"></A>A simple 
<SPAN Class="swiss"><A HREF="RM-9-6.html#S0227">delay_statement</A></SPAN> 
with a negative or zero value for the expiration time does not cause 
the calling task to be blocked; it is nevertheless a potentially blocking 
operation (see <A HREF="RM-9-5-1.html">9.5.1</A>).</div>
<div class="paranum"><a name="p6">6/3</a></div>
<div class="Normal">When a <SPAN Class="swiss"><A HREF="RM-9-6.html#S0227">delay_statement</A></SPAN> 
appears in a <SPAN Class="swiss"><A HREF="RM-9-7-1.html#S0235">delay_alternative</A></SPAN> 
of a <SPAN Class="swiss"><A HREF="RM-9-7-2.html#S0237">timed_entry_call</A></SPAN> 
the selection of the entry call is attempted, regardless of the specified 
expiration time. When a <SPAN Class="swiss"><A HREF="RM-9-6.html#S0227">delay_statement</A></SPAN> 
appears in a <SPAN Class="swiss"><A HREF="RM-9-7-1.html#S0233">select_alternative</A></SPAN>, 
and a call is queued on one of the open entries, the selection of that 
entry call proceeds, regardless of the value of the delay expression. 
</div>

<H4 Class="centered">Documentation Requirements</H4>
<div class="paranum"><a name="p7">7</a></div>
<div class="Normal">The implementation shall document the minimum value 
of the delay expression of a <SPAN Class="swiss"><A HREF="RM-9-6.html#S0229">delay_relative_statement</A></SPAN> 
that causes the task to actually be blocked.&nbsp;</div>
<div class="paranum"><a name="p8">8</a></div>
<div class="Normal">The implementation shall document the minimum difference 
between the value of the delay expression of a <SPAN Class="swiss"><A HREF="RM-9-6.html#S0228">delay_until_statement</A></SPAN> 
and the value of Real_Time.Clock, that causes the task to actually be 
blocked.&nbsp;</div>

<H4 Class="centered">Metrics</H4>
<div class="paranum"><a name="p9">9</a></div>
<div class="Normal" style="margin-bottom: 0.4em">The implementation 
shall document the following metrics:&nbsp;</div>
<div class="paranum"><a name="p10">10</a></div>
<div class="Bulleted">An upper bound on the execution time, in processor 
clock cycles, of a <SPAN Class="swiss"><A HREF="RM-9-6.html#S0229">delay_relative_statement</A></SPAN> 
whose requested value of the delay expression is less than or equal to 
zero.</div>
<div class="paranum"><a name="p11">11</a></div>
<div class="Bulleted">An upper bound on the execution time, in processor 
clock cycles, of a <SPAN Class="swiss"><A HREF="RM-9-6.html#S0228">delay_until_statement</A></SPAN> 
whose requested value of the delay expression is less than or equal to 
the value of Real_Time.Clock at the time of executing the statement. 
Similarly, for Calendar.Clock.</div>
<div class="paranum"><a name="p12">12</a></div>
<div class="Bulleted"><A NAME="I7971"></A><A NAME="I7972"></A>An upper 
bound on the <I>lateness</I> of a <SPAN Class="swiss"><A HREF="RM-9-6.html#S0229">delay_relative_statement</A></SPAN>, 
for a positive value of the delay expression, in a situation where the 
task has sufficient priority to preempt the processor as soon as it becomes 
ready, and does not need to wait for any other execution resources. The 
upper bound is expressed as a function of the value of the delay expression. 
The lateness is obtained by subtracting the value of the delay expression 
from the <I>actual duration</I>. The actual duration is measured from 
a point immediately before a task executes the <SPAN Class="swiss"><A HREF="RM-9-6.html#S0227">delay_statement</A></SPAN> 
to a point immediately after the task resumes execution following this 
statement.</div>
<div class="paranum"><a name="p13">13</a></div>
<div class="Bulleted">An upper bound on the lateness of a <SPAN Class="swiss"><A HREF="RM-9-6.html#S0228">delay_until_statement</A></SPAN>, 
in a situation where the value of the requested expiration time is after 
the time the task begins executing the statement, the task has sufficient 
priority to preempt the processor as soon as it becomes ready, and it 
does not need to wait for any other execution resources. The upper bound 
is expressed as a function of the difference between the requested expiration 
time and the clock value at the time the statement begins execution. 
The lateness of a <SPAN Class="swiss"><A HREF="RM-9-6.html#S0228">delay_until_statement</A></SPAN> 
is obtained by subtracting the requested expiration time from the real 
time that the task resumes execution following this statement.&nbsp;</div>

<HR>
<div style="margin-top: 0.0em; margin-bottom: 0.6em"><A HREF="RM-TOC.html"><IMG SRC="cont.gif" ALT="Contents" BORDER=0></A>&nbsp;
&nbsp;<A HREF="RM-0-5.html"><IMG SRC="index.gif" ALT="Index" BORDER=0></A>&nbsp;
&nbsp;<A HREF="RM-STDS.html"><IMG SRC="lib.gif" ALT="References" BORDER=0></A>&nbsp;
&nbsp;<A HREF="RM-SRCH.html"><IMG SRC="find.gif" ALT="Search" BORDER=0></A>&nbsp;
&nbsp;<A HREF="RM-D-8.html"><IMG SRC="prev.gif" ALT="Previous" BORDER=0></A>&nbsp;
&nbsp;<A HREF="RM-D-10.html"><IMG SRC="next.gif" ALT="Next" BORDER=0></A>&nbsp;
</div>
<DIV Style="margin-top:0.0em"><IMG SRC="AE_logo.gif" height=100 width=113 align=right ALT="Ada-Europe">
<SPAN Style="vertical-align: middle; font-size:120%">Ada 2005 and 2012 Editions sponsored in part by <SPAN Style="font-size: 125%"><A HREF="http://www.ada-europe.org/"><B>Ada-Europe</B></A></SPAN></SPAN></DIV>
</BODY>
</HTML>
