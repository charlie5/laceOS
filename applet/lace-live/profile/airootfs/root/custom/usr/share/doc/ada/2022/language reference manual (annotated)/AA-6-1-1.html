<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
"http://www.w3.org/TR/html4/loose.dtd">
<HTML>
<HEAD>
    <TITLE>Preconditions and Postconditions</TITLE>
    <META http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
    <META NAME="Author" CONTENT="JTC1/SC22/WG9/ARG, by Randall Brukardt, ARG Editor">
    <META NAME="GENERATOR" CONTENT="Arm_Form.Exe, Ada Reference Manual generator">
    <STYLE type="text/css">
    H4.centered {text-align: center}
    SPAN.swiss {font-family: Arial, Helvetica, sans-serif; font-size: 92%}
    SPAN.roman {font-family: "Times New Roman", Times, serif}
    DIV.paranum {float: left; font-family: Arial, Helvetica, sans-serif; font-size: 64%; width: 2.8em; margin-left: -0.4em; margin-right: -3.0em; margin-top: 0.2em}
    TT {font-family: "Courier New", monospace}
    DT {display: compact}
    SPAN.insert4 {text-decoration: underline; color: rgb(153,0,0) }
    SPAN.delete4 {text-decoration: line-through; color: rgb(153,0,0) }
    SPAN.insert5 {text-decoration: underline; color: rgb(0,102,0) }
    SPAN.delete5 {text-decoration: line-through; color: rgb(0,102,0) }
    A.Bar:link {font-family: Arial, Helvetica, sans-serif; font-style: normal; text-decoration: none; color: rgb(204,204,51)}
    A.Bar:visited {font-family: Arial, Helvetica, sans-serif; font-style: normal; text-decoration: none; color: rgb(204,204,51)}
    DIV.Normal {font-family: "Times New Roman", Times, serif; line-height: 122%; margin-left: 1.8em; margin-bottom: 0.6em}
    DIV.Notes {font-family: "Times New Roman", Times, serif; font-size: 80%; line-height: 122%; margin-left: 4.3em; margin-bottom: 0.6em}
    DIV.Annotations {font-family: "Times New Roman", Times, serif; font-size: 80%; line-height: 122%; margin-left: 6.8em; margin-bottom: 0.6em}
    DIV.Indented5Examples {font-family: "Courier New", monospace; font-size: 90%; line-height: 122%; margin-left:  12.8em; margin-bottom: 0.6em}
    DIV.SmallExamples {font-family: "Courier New", monospace; font-size: 72%; line-height: 122%; margin-left:  10.2em; margin-bottom: 0.6em}
    DIV.Bulleted-NoPrefix {font-family: "Times New Roman", Times, serif; line-height: 122%; margin-left: 3.8em; margin-right: 2.0em; margin-top: 0em; margin-bottom: 0.5em}
    DIV.Bulleted {font-family: "Times New Roman", Times, serif; line-height: 122%; margin-left: 3.8em; margin-right: 2.0em; margin-top: 0em; margin-bottom: 0.5em; display: list-item; list-style-type: disc}
    DIV.Indented4Bulleted-NoPrefix {font-family: "Times New Roman", Times, serif; line-height: 122%; margin-left: 9.8em; margin-right: 2.0em; margin-top: 0em; margin-bottom: 0.5em}
    DIV.Indented4Bulleted {font-family: "Times New Roman", Times, serif; line-height: 122%; margin-left: 9.8em; margin-right: 2.0em; margin-top: 0em; margin-bottom: 0.5em; display: list-item; list-style-type: disc}
    DIV.SmallBulleted-NoPrefix {font-family: "Times New Roman", Times, serif; font-size: 80%; line-height: 122%; margin-left: 9.3em; margin-right: 2.5em; margin-top: 0em; margin-bottom: 0.5em}
    DIV.SmallBulleted {font-family: "Times New Roman", Times, serif; font-size: 80%; line-height: 122%; margin-left: 9.3em; margin-right: 2.5em; margin-top: 0em; margin-bottom: 0.5em; display: list-item; list-style-type: disc}
    DIV.WideHanging-Body {font-family: "Times New Roman", Times, serif; line-height: 122%; margin-left: 7.8em; margin-top: 0em; margin-bottom: 0.6em}
    DIV.WideHanging-Term {float: left; font-family: "Times New Roman", Times, serif; line-height: 122%; margin-left: 1.8em; margin-top: 0em; margin-bottom: 0em}
    </STYLE>
</HEAD>
<BODY TEXT="#000000" BGCOLOR="#FFFFF0" LINK="#000080" VLINK="#330033" ALINK="#0000FF">
<DIV><SPAN Style="font-size:200%; color: rgb(0,51,153)"><B>Annotated</B></SPAN><SPAN Style="font-size:200%; color: rgb(0,0,102)"><B>&nbsp;Ada Reference Manual</B> (Ada 202x Draft 33)</SPAN> &mdash; <A HREF="AA-TTL.html"><B>Legal Information</B></A></DIV>
<div style="margin-top: 0.6em; margin-bottom: 0.0em"><A HREF="AA-TOC.html"><IMG SRC="cont.gif" ALT="Contents" BORDER=0></A>&nbsp;
&nbsp;<A HREF="AA-0-4.html"><IMG SRC="index.gif" ALT="Index" BORDER=0></A>&nbsp;
&nbsp;<A HREF="AA-STDS.html"><IMG SRC="lib.gif" ALT="References" BORDER=0></A>&nbsp;
&nbsp;<A HREF="AA-SRCH.html"><IMG SRC="find.gif" ALT="Search" BORDER=0></A>&nbsp;
&nbsp;<A HREF="AA-6-1.html"><IMG SRC="prev.gif" ALT="Previous" BORDER=0></A>&nbsp;
&nbsp;<A HREF="AA-6-1-2.html"><IMG SRC="next.gif" ALT="Next" BORDER=0></A>&nbsp;
</div>
<HR>
<H1>6.1.1 Preconditions and Postconditions</H1>
<div class="paranum"><a name="p1">1/5</a></div>
<div class="Normal" style="margin-bottom: 0.4em">{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI05s/AI05-0145-2.TXT">AI05-0145-2</A></I>} 
{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI05s/AI05-0247-1.TXT">AI05-0247-1</A></I>} 
{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI12s/AI12-0045-1.TXT">AI12-0045-1</A></I>} 
{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI12s/AI12-0220-1.TXT">AI12-0220-1</A></I>} 
{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI12s/AI12-0272-1.TXT">AI12-0272-1</A></I>} 
{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI12s/AI12-0396-1.TXT">AI12-0396-1</A></I>} 
For a <span class="insert4">noninstance&nbsp;</span>subprogram<span class="insert5">&nbsp;[(including a generic formal subprogram)]</span><span class="insert4">, 
a generic subprogram,</span> <span class="delete5">or&nbsp;</span><span class="insert4">an 
</span>entry,<span class="insert5">&nbsp;or an access-to-subprogram type,</span> 
the following language-defined <span class="insert5">assertion&nbsp;</span>aspects 
may be specified with an <SPAN Class="swiss"><A HREF="AA-13-1-1.html#S0346">aspect_specification</A></SPAN> 
(see <A HREF="AA-13-1-1.html">13.1.1</A>):</div>
<div class="paranum"><a name="p1.a">1.a/4</a></div>
<div class="Annotations"><span class="insert4"><B>Ramification:&nbsp;</B></span>{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI12s/AI12-0045-1.TXT">AI12-0045-1</A></I>} 
<span class="insert4">&ldquo;Noninstance subprogram&rdquo; excludes a 
subprogram that is an instance of a generic subprogram. In that case, 
the aspects should be specified on the generic subprogram. If preconditions 
or postconditions need to be added to an instance of a generic subprogram, 
it can be accomplished by creating a separate subprogram specification 
and then completing that specification with a renames-as-body of the 
instance.</span>&nbsp;</div>
<div class="paranum"><a name="p1.b">1.b/5</a></div>
<div class="Annotations"><span class="insert5"><B>Proof:&nbsp;</B></span>{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI12s/AI12-0272-1.TXT">AI12-0272-1</A></I>} 
<span class="insert5">A generic formal subprogram is a subprogram, and 
there are no rules to prevent using these attributes on it.</span>&nbsp;</div>
<div class="paranum"><a name="p2">2/5</a></div>
<div class="WideHanging-Term">{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI12s/AI12-0220-1.TXT">AI12-0220-1</A></I>} 
Pre</div><div class="WideHanging-Body"><br clear="left">
This aspect specifies a specific precondition for a callable entity<span class="insert5">&nbsp;or an access-to-subprogram type</span>; it shall be specified by an <SPAN Class="swiss"><A HREF="AA-4-4.html#S0132">expression</A></SPAN>, 
called a <I>specific precondition expression</I>.<A NAME="I4104"></A><A NAME="I4105"></A> 
If not specified for an entity, the specific precondition expression 
for the entity is the enumeration literal True.<A NAME="I4106"></A><A NAME="I4107"></A></div>
<div class="paranum"><a name="p2.a">2.a/3</a></div>
<div class="Annotations"><B>To be honest:&nbsp;</B>In this and the following 
rules, we are talking about the enumeration literal True declared in 
package Standard (see <A HREF="AA-A-1.html">A.1</A>), and not some other 
value or identifier True. That matters as some rules depend on full conformance 
of these expressions, which depends on the specific declarations involved. 
</div>
<div class="paranum"><a name="p2.b">2.b/5</a></div>
<div class="Annotations"><span class="insert5"><B>Aspect Description 
for&nbsp;</B></span><span class="insert5"><B>Pre:&nbsp;</B></span>Precondition; 
a condition that <span class="insert5">is expected to</span><span class="delete5">&nbsp;must</span> 
hold true before a call.</div>
<div class="paranum"><a name="p3">3/5</a></div>
<div class="WideHanging-Term">{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI05s/AI05-0254-1.TXT">AI05-0254-1</A></I>} 
{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI05s/AI05-0262-1.TXT">AI05-0262-1</A></I>} 
{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI12s/AI12-0418-1.TXT">AI12-0418-1</A></I>} 
Pre'Class</div><div class="WideHanging-Body"><br clear="left">
This aspect specifies a class-wide precondition for <span class="insert5">a 
dispatching</span><span class="delete5">&nbsp;an</span> operation of a tagged 
type and its descendants; it shall be specified by an <SPAN Class="swiss"><A HREF="AA-4-4.html#S0132">expression</A></SPAN>, 
called a <I>class-wide precondition expression</I>.<A NAME="I4108"></A><A NAME="I4109"></A> 
If not specified for an entity, then if no other class-wide precondition 
applies to the entity, the class-wide precondition expression for the 
entity is the enumeration literal True.<A NAME="I4110"></A><A NAME="I4111"></A></div>
<div class="paranum"><a name="p3.a">3.a/3</a></div>
<div class="Annotations"><B>Ramification:&nbsp;</B>{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI05s/AI05-0254-1.TXT">AI05-0254-1</A></I>} 
If other class-wide preconditions apply to the entity and no class-wide 
precondition is specified, no class-wide precondition is defined for 
the entity; of course, the class-wide preconditions (of ancestors) that 
apply are still going to be checked. We need subprograms that don't have 
ancestors and don't specify a class-wide precondition to have a class-wide 
precondition of True, so that adding such a precondition to a descendant 
has no effect (necessary as a dispatching call through the root routine 
would not check any precondition).</div>
<div class="paranum"><a name="p3.b">3.b/5</a></div>
<div class="Annotations">{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI12s/AI12-0220-1.TXT">AI12-0220-1</A></I>} 
<span class="insert5">Pre'Class cannot be specified on an access-to-subprogram 
type because of a Legality Rule found in <A HREF="AA-13-1-1.html">13.1.1</A> 
that limits 'Class aspects to tagged types and primitive subprograms 
of tagged types. The same is true for Post'Class (below).</span>&nbsp;</div>
<div class="paranum"><a name="p3.c">3.c/5</a></div>
<div class="Annotations"><span class="insert5"><B>Aspect Description 
for&nbsp;</B></span><span class="insert5"><B>Pre'Class:&nbsp;</B></span>Precondition 
<span class="insert5">that applies to corresponding subprograms of descendant 
types</span><span class="delete5">&nbsp;inherited on type derivation</span>.</div>
<div class="paranum"><a name="p4">4/5</a></div>
<div class="WideHanging-Term">{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI12s/AI12-0220-1.TXT">AI12-0220-1</A></I>} 
Post</div><div class="WideHanging-Body"><br clear="left">
This aspect specifies a specific postcondition for a callable entity<span class="insert5">&nbsp;or an access-to-subprogram type</span>; it shall be specified by an <SPAN Class="swiss"><A HREF="AA-4-4.html#S0132">expression</A></SPAN>, 
called a <I>specific postcondition expression</I>.<A NAME="I4112"></A><A NAME="I4113"></A> 
If not specified for an entity, the specific postcondition expression 
for the entity is the enumeration literal True.<A NAME="I4114"></A><A NAME="I4115"></A></div>
<div class="paranum"><a name="p4.a">4.a/5</a></div>
<div class="Annotations"><span class="insert5"><B>Aspect Description 
for&nbsp;</B></span><span class="insert5"><B>Post:&nbsp;</B></span>Postcondition; 
a condition that <span class="insert5">will</span><span class="delete5">&nbsp;must</span> 
hold true after a call.</div>
<div class="paranum"><a name="p5">5/5</a></div>
<div class="WideHanging-Term">{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI05s/AI05-0262-1.TXT">AI05-0262-1</A></I>} 
{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI12s/AI12-0418-1.TXT">AI12-0418-1</A></I>} 
Post'Class</div><div class="WideHanging-Body"><br clear="left">
This aspect specifies a class-wide postcondition for <span class="insert5">a 
dispatching</span><span class="delete5">&nbsp;an</span> operation of a tagged 
type and its descendants; it shall be specified by an <SPAN Class="swiss"><A HREF="AA-4-4.html#S0132">expression</A></SPAN>, 
called a <I>class-wide postcondition expression</I>.<A NAME="I4116"></A><A NAME="I4117"></A> 
If not specified for an entity, the class-wide postcondition expression 
for the entity is the enumeration literal True.<A NAME="I4118"></A><A NAME="I4119"></A> 
</div>
<div class="paranum"><a name="p5.a">5.a/5</a></div>
<div class="Annotations"><span class="insert5"><B>Aspect Description 
for&nbsp;</B></span><span class="insert5"><B>Post'Class:&nbsp;</B></span>Postcondition 
<span class="insert5">that applies to corresponding subprograms of descendant 
types</span><span class="delete5">&nbsp;inherited on type derivation</span>.</div>
<div class="paranum"><a name="p5.b">5.b/5</a></div>
<div class="Annotations"><span class="insert5"><B>Discussion:&nbsp;</B></span>{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI12s/AI12-0005-1.TXT">AI12-0005-1</A></I>} 
<span class="insert5">In the AARM notes below, we use the terms &ldquo;inherited&rdquo; 
and &ldquo;inheritance&rdquo; informally with respect to class-wide pre/post-conditions, 
to mean that the aspect applies to corresponding subprograms in descendant 
types.</span>&nbsp;</div>
<div class="paranum"><a name="p5.c">5.c/5</a></div>
<div class="Annotations"><span class="insert5"><B>Term entry:&nbsp;</B><B>precondition</B> 
&mdash; an assertion that is expected to be True when a given subprogram 
is called</span></div>
<div class="paranum"><a name="p5.d">5.d/5</a></div>
<div class="Annotations"><span class="insert5"><B>Term entry:&nbsp;</B><B>postcondition</B> 
&mdash; an assertion that is expected to be True when a given subprogram 
returns normally</span></div>

<H4 Class="centered">Name Resolution Rules</H4>
<div class="paranum"><a name="p6">6/3</a></div>
<div class="Normal">{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI05s/AI05-0145-2.TXT">AI05-0145-2</A></I>} 
The expected type for a precondition or postcondition expression is any 
boolean type.<A NAME="I4120"></A><A NAME="I4121"></A></div>
<div class="paranum"><a name="p7">7/5</a></div>
<div class="Normal">{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI05s/AI05-0145-2.TXT">AI05-0145-2</A></I>} 
{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI05s/AI05-0262-1.TXT">AI05-0262-1</A></I>} 
{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI12s/AI12-0113-1.TXT">AI12-0113-1</A></I>} 
{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI12s/AI12-0159-1.TXT">AI12-0159-1</A></I>} 
{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI12s/AI12-0170-1.TXT">AI12-0170-1</A></I>} 
{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI12s/AI12-0418-1.TXT">AI12-0418-1</A></I>} 
Within the expression for a Pre'Class or Post'Class aspect for a primitive 
subprogram <span class="insert4"><I>S</I>&nbsp;</span>of a tagged type <I>T</I>, 
a <span class="insert4"><SPAN Class="swiss"><A HREF="AA-4-1.html#S0091">name</A></SPAN></span><span class="delete4">&nbsp;name</span> 
that denotes a formal parameter <span class="insert4">(or <I>S</I>'Result) 
</span>of type <I>T</I> is interpreted as <span class="insert4">though 
it had a (notional)&nbsp;</span><span class="insert5">nonabstract&nbsp;</span><span class="insert4">&nbsp;type <I>NT</I> that is a formal derived type whose ancestor type is <I>T</I>, 
with directly visible primitive operations</span><span class="delete4">&nbsp;having 
type <I>T</I>'Class</span>. Similarly, a <span class="insert4"><SPAN Class="swiss"><A HREF="AA-4-1.html#S0091">name</A></SPAN></span><span class="delete4">&nbsp;name</span> 
that denotes a formal access parameter <span class="insert4">(or <I>S</I>'Result</span><span class="insert5">&nbsp;for an access result</span><span class="insert4">)&nbsp;</span>of type access-to-<I>T</I> 
is interpreted as having type <span class="insert4">access-to-<I>NT</I></span><span class="delete4">&nbsp;access-to-<I>T</I>'Class</span>. 
[<span class="insert4">The result of this interpretation is that the 
only operations that can be applied to such <SPAN Class="swiss"><A HREF="AA-4-1.html#S0091">name</A></SPAN>s 
are those defined for such a formal derived type.</span><span class="delete4">&nbsp;This 
ensures that the expression is well-defined for a primitive subprogram 
of a type descended from <I>T</I>.</span>]</div>
<div class="paranum"><a name="p7.a">7.a/4</a></div>
<div class="Annotations"><span class="insert4"><B>Reason:&nbsp;</B></span>{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI12s/AI12-0159-1.TXT">AI12-0159-1</A></I>} 
<span class="insert4">This ensures that the expression is well-defined 
for any primitive subprogram of a type descended from <I>T</I>.</span> 
</div>
<div class="paranum"><a name="p7.b">7.b/5</a></div>
<div class="Annotations"><span class="insert5"><B>Ramification:&nbsp;</B></span>{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI12s/AI12-0170-1.TXT">AI12-0170-1</A></I>} 
<span class="insert5">The operations of <I>NT</I> are also nonabstract, 
so the rule against a call of an abstract subprogram does not trigger 
for a class-wide precondition or postcondition.</span>&nbsp;</div>
<div class="paranum"><a name="p8">8/5</a></div>
<div class="Normal">{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI05s/AI05-0145-2.TXT">AI05-0145-2</A></I>} 
{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI05s/AI05-0264-1.TXT">AI05-0264-1</A></I>} 
{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI12s/AI12-0418-1.TXT">AI12-0418-1</A></I>} 
For an <span class="insert5"><SPAN Class="swiss"><A HREF="AA-4-1-4.html#S0100">attribute_reference</A></SPAN></span><span class="delete5">&nbsp;attribute_reference</span> 
with <span class="insert5"><SPAN Class="swiss"><A HREF="AA-4-1-4.html#S0101">attribute_designator</A></SPAN></span><span class="delete5">&nbsp;attribute_designator</span> 
Old, if the attribute reference has an expected type <span class="insert5">(or 
class of types)&nbsp;</span>or shall resolve to a given type, the same applies 
to the <SPAN Class="swiss"><A HREF="AA-4-1.html#S0093">prefix</A></SPAN>; 
otherwise, the <SPAN Class="swiss"><A HREF="AA-4-1.html#S0093">prefix</A></SPAN> 
shall be resolved independently of context.</div>

<H4 Class="centered">Legality Rules</H4>
<div class="paranum"><a name="p9">9/3</a></div>
<div class="Normal">{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI05s/AI05-0145-2.TXT">AI05-0145-2</A></I>} 
{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI05s/AI05-0230-1.TXT">AI05-0230-1</A></I>} 
The Pre or Post aspect shall not be specified for an abstract subprogram 
or a null procedure. [Only the Pre'Class and Post'Class aspects may be 
specified for such a subprogram.]</div>
<div class="paranum"><a name="p9.a">9.a/3</a></div>
<div class="Annotations"><B>Discussion:&nbsp;</B>{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI05s/AI05-0183-1.TXT">AI05-0183-1</A></I>} 
Pre'Class and Post'Class can only be specified on primitive routines 
of tagged types, by a blanket rule found in <A HREF="AA-13-1-1.html">13.1.1</A>. 
</div>
<div class="paranum"><a name="p10">10/3</a></div>
<div class="Normal" style="margin-bottom: 0.4em">{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI05s/AI05-0247-1.TXT">AI05-0247-1</A></I>} 
{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI05s/AI05-0254-1.TXT">AI05-0254-1</A></I>} 
If a type <I>T</I> has an implicitly declared subprogram <I>P</I> inherited 
from a parent type <I>T1</I> and a homograph (see <A HREF="AA-8-3.html">8.3</A>) 
of <I>P</I> from a progenitor type <I>T2</I>, and</div>
<div class="paranum"><a name="p11">11/3</a></div>
<div class="Bulleted">the corresponding primitive subprogram <I>P1</I> 
of type <I>T1</I> is neither null nor abstract; and</div>
<div class="paranum"><a name="p12">12/3</a></div>
<div class="Bulleted">the class-wide precondition expression True does 
not apply to <I>P1</I> (implicitly or explicitly); and</div>
<div class="paranum"><a name="p13">13/3</a></div>
<div class="Bulleted">there is a class-wide precondition expression that 
applies to the corresponding primitive subprogram <I>P2</I> of <I>T2</I> 
that does not fully conform to any class-wide precondition expression 
that applies to <I>P1</I>,&nbsp;</div>
<div class="paranum"><a name="p14">14/3</a></div>
<div class="Normal" style="margin-bottom: 0.4em">{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI05s/AI05-0247-1.TXT">AI05-0247-1</A></I>} 
{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI05s/AI05-0254-1.TXT">AI05-0254-1</A></I>} 
then:</div>
<div class="paranum"><a name="p15">15/3</a></div>
<div class="Bulleted">If the type <I>T</I> is abstract, the implicitly 
declared subprogram <I>P</I> is <I>abstract</I>.</div>
<div class="paranum"><a name="p16">16/3</a></div>
<div class="Bulleted">Otherwise, the subprogram <I>P</I> <I>requires 
overriding</I> and shall be overridden with a nonabstract subprogram.<A NAME="I4122"></A></div>
<div class="paranum"><a name="p16.a">16.a/3</a></div>
<div class="Annotations"><B>Discussion:&nbsp;</B>We use the term &quot;requires 
overriding&quot; here so that this rule is taken into account when calculating 
visibility in <A HREF="AA-8-3.html">8.3</A>; otherwise we would have 
a mess when this routine is overridden.&nbsp;</div>
<div class="paranum"><a name="p16.b">16.b/3</a></div>
<div class="Annotations"><B>Reason:&nbsp;</B>Such an inherited subprogram 
would necessarily violate the Liskov Substitutability Principle (LSP) 
if called via a dispatching call from an ancestor other than the one 
that provides the called body. In such a case, the class-wide precondition 
of the actual body is stronger than the class-wide precondition of the 
ancestor. If we did not enforce that precondition for the body, the body 
could be called when the precondition it knows about is False &mdash; 
such &quot;counterfeiting&quot; of preconditions has to be avoided. But 
enforcing the precondition violates LSP. We do not want the language 
to be implicitly creating bodies that violate LSP; the programmer can 
still write an explicit body that calls the appropriate parent subprogram. 
In that case, the violation of LSP is explicitly in the code and obvious 
to code reviewers (both human and automated).</div>
<div class="paranum"><a name="p16.c">16.c/3</a></div>
<div class="Annotations">We have to say that the subprogram is abstract 
for an abstract type in this case, so that the next concrete type has 
to override it for the reasons above. Otherwise, inserting an extra level 
of abstract types would eliminate the requirement to override (as there 
is only one declared operation for the concrete type), and that would 
be bad for the reasons given above.&nbsp;</div>
<div class="paranum"><a name="p16.d">16.d/3</a></div>
<div class="Annotations"><B>Ramification:&nbsp;</B>This requires the set of 
class-wide preconditions that apply to the interface routine to be strictly 
stronger than those that apply to the concrete routine. Since full conformance 
requires each name to denote the same declaration, it is unlikely that 
independently declared preconditions would conform. This rule does allow 
&quot;diamond inheritance&quot; of preconditions, and of course no preconditions 
at all match.</div>
<div class="paranum"><a name="p16.e">16.e/3</a></div>
<div class="Annotations">We considered adopting a rule that would allow 
examples where the expressions would conform after all inheritance has 
been applied, but this is complex and is not likely to be common in practice. 
Since the penalty here is just that an explicit overriding is required, 
the complexity is too much.&nbsp;</div>
<div class="paranum"><a name="p17">17/3</a></div>
<div class="Normal">{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI05s/AI05-0247-1.TXT">AI05-0247-1</A></I>} 
If a renaming of a subprogram or entry <I>S1</I> overrides an inherited 
subprogram <I>S2</I>, then the overriding is illegal unless each class-wide 
precondition expression that applies to <I>S1</I> fully conforms to some 
class-wide precondition expression that applies to <I>S2</I> and each 
class-wide precondition expression that applies to <I>S2</I> fully conforms 
to some class-wide precondition expression that applies to <I>S1</I>.</div>
<div class="paranum"><a name="p17.a">17.a/3</a></div>
<div class="Annotations"><B>Reason:&nbsp;</B>Such an overriding subprogram 
would violate LSP, as the precondition of <I>S1</I> would usually be 
different (and thus stronger) than the one known to a dispatching call 
through an ancestor routine of <I>S2</I>. This is always OK if the preconditions 
match, so we always allow that.&nbsp;</div>
<div class="paranum"><a name="p17.b">17.b/3</a></div>
<div class="Annotations"><B>Ramification:&nbsp;</B>This only applies to primitives 
of tagged types; other routines cannot have class-wide preconditions. 
</div>
<div class="paranum"><a name="p17.1">17.1/4</a></div>
<div class="Normal">&nbsp;&nbsp;{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI12s/AI12-0131-1.TXT">AI12-0131-1</A></I>} 
<span class="insert4">Pre'Class shall not be specified for an overriding 
primitive subprogram of a tagged type <I>T</I> unless the Pre'Class aspect 
is specified for the corresponding primitive subprogram of some ancestor 
of <I>T</I>.</span></div>
<div class="paranum"><a name="p17.c">17.c/4</a></div>
<div class="Annotations"><span class="insert4"><B>Reason:&nbsp;</B>Any such 
Pre'Class will have no effect, as it will be <B>or</B>ed with True. As 
such, it is highly misleading for readers, especially for those who are 
determining the assumptions that can be made in the body of the primitive 
subprogram. Note that in this case there is nothing explicit that might 
indicate that the class-wide precondition is ineffective. This rule does 
not prevent explicitly writing an ineffective class-wide precondition 
(for instance, if the parent subprogram has explicitly specified a precondition 
of True).</span>&nbsp;</div>
<div class="paranum"><a name="p17.2">17.2/4</a></div>
<div class="Normal">&nbsp;&nbsp;{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI12s/AI12-0131-1.TXT">AI12-0131-1</A></I>} 
<span class="insert4"><A NAME="I4123"></A>In addition to the places where 
Legality Rules normally apply (see <A HREF="AA-12-3.html">12.3</A>), 
these rules also apply in the private part of an instance of a generic 
unit.</span>&nbsp;</div>

<H4 Class="centered">Static Semantics</H4>
<div class="paranum"><a name="p18">18/5</a></div>
<div class="Normal" style="margin-bottom: 0.4em">{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI05s/AI05-0145-2.TXT">AI05-0145-2</A></I>} 
<span class="insert4"></span>{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI12s/AI12-0113-1.TXT">AI12-0113-1</A></I>} 
<span class="insert4"></span>{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI12s/AI12-0131-1.TXT">AI12-0131-1</A></I>} 
<span class="insert4"></span>{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI12s/AI12-0170-1.TXT">AI12-0170-1</A></I>} 
<span class="insert4"></span>If a Pre'Class or Post'Class aspect is specified 
for a primitive subprogram <span class="insert4"><I>S</I>&nbsp;</span>of a 
tagged type <I>T</I>, <span class="insert4">or such an aspect defaults 
to True,&nbsp;</span>then <span class="insert4">a corresponding</span><span class="delete4">&nbsp;the 
associated</span> expression also applies to the corresponding primitive 
subprogram <span class="insert4"><I>S</I>&nbsp;</span>of each descendant of 
<I>T</I><span class="insert5">&nbsp;[(including <I>T</I> itself)]</span>.<span class="insert4">&nbsp;The <I>corresponding expression</I> is constructed from the associated 
expression as follows:<A NAME="I4124"></A> <A NAME="I4125"></A></span></div>
<div class="paranum"><a name="p18.a">18.a/4</a></div>
<div class="Annotations"><span class="insert4"><B>Ramification:&nbsp;</B>A 
Pre'Class defaults to True only if no class-wide preconditions are inherited 
for the subprogram. The same is true for Post'Class.</span>&nbsp;</div>
<div class="paranum"><a name="p18.b">18.b/4</a></div>
<div class="Annotations"><span class="insert4"><B>Reason:&nbsp;</B>We have 
to inherit precondition expressions that default to True, so that later 
overridings don't strengthen the precondition (a violation of LSP). We 
do the same for postconditions for consistency.</span>&nbsp;</div>
<div class="paranum"><a name="p18.1">18.1/4</a></div>
<div class="Bulleted">{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI12s/AI12-0113-1.TXT">AI12-0113-1</A></I>} 
<span class="insert4">References to formal parameters of <I>S</I> (or 
to <I>S</I> itself) are replaced with references to the corresponding 
formal parameters of the corresponding inherited or overriding subprogram 
<I>S</I> (or to the corresponding subprogram <I>S</I> itself).</span></div>
<div class="paranum"><a name="p18.c">18.c/4</a></div>
<div class="Annotations"><span class="insert4"><B>Reason:&nbsp;</B>We have 
to define the corresponding expression this way as overriding routines 
are only required to be subtype conformant; in particular, the parameter 
names can be different. So we have to talk about corresponding parameters 
without mentioning any names.</span>&nbsp;</div>
<div class="paranum"><a name="p18.2">18.2/5</a></div>
<div class="Normal">&nbsp;&nbsp;{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI12s/AI12-0113-1.TXT">AI12-0113-1</A></I>} 
<span class="insert4"></span>{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI12s/AI12-0412-1.TXT">AI12-0412-1</A></I>} 
<span class="insert4"></span><span class="insert5">If the</span><span class="insert4"></span><span class="insert4"><span class="delete5">&nbsp;The</span></span><span class="insert4">&nbsp;primitive subprogram <I>S</I> is&nbsp;</span><span class="insert5">not abstract, 
but the given descendant of <I>T</I> is abstract, then a nondispatching 
call on <I>S</I> is illegal if any Pre'Class or Post'Class aspect that 
applies to <I>S</I> is other than a static boolean expression. Similarly, 
a primitive subprogram of an abstract type <I>T</I>, to which a non-static 
Pre'Class or Post'Class aspect applies, shall neither be the prefix of 
an Access attribute_reference, nor shall it be a generic actual subprogram 
for a formal subprogram declared by a <SPAN Class="swiss"><A HREF="AA-12-6.html#S0336">formal_concrete_subprogram_declaration</A></SPAN></span><span class="insert4"></span><span class="insert4"><span class="delete5">&nbsp;is 
illegal if it is not abstract and the corresponding expression for a 
Pre'Class or Post'Class aspect would be illegal</span></span><span class="insert4">.</span></div>
<div class="paranum"><a name="p18.d">18.d/5</a></div>
<div class="Annotations"><SPAN STYLE="font-size: 80%"><I>This paragraph 
was deleted.</I></SPAN><span class="insert4"><B>Ramification:&nbsp;</B></span><span class="insert4"><span class="delete5">This 
can happen, for instance, if one of the subprograms called in the corresponding 
expression is abstract. We made the rule general so that we don't have 
to worry about exactly which cases can cause this to happen, both now 
and in the future.</span></span><span class="insert4"></span>&nbsp;</div>
<div class="paranum"><a name="p18.e">18.e/5</a></div>
<div class="Annotations"><span class="insert4"><B>Reason:&nbsp;</B></span>{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI12s/AI12-0412-1.TXT">AI12-0412-1</A></I>} 
<span class="insert4"></span><span class="insert5">The above rules mean 
that a concrete primitive of an abstract type is effectively treated 
as abstract, if any nontrivial Pre'Class or Post'Class aspects apply 
to it. This makes sense because we are using a notional formal derived 
type model for such aspects, and an abstract type is not permitted as 
an actual type for such a formal type. If we didn't do this, the evaluation 
of the precondition or postcondition of a concrete subprogram of an abstract 
type could possibly call abstract functions.</span><span class="insert4"></span><span class="insert4"><span class="delete5">&nbsp;We 
allow illegal corresponding expressions on abstract subprograms as they 
could never be evaluated, and we need to allow such expressions to contain 
calls to abstract subprograms</span></span><span class="insert4">.</span> 
</div>
<div class="paranum"><a name="p18.f">18.f/5</a></div>
<div class="Annotations"><span class="insert5"><B>Discussion:&nbsp;</B></span>{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI12s/AI12-0412-1.TXT">AI12-0412-1</A></I>} 
<span class="insert5">As this Reference Manual was frozen, a significant 
incompatibility has come to light with the above rule. The wording makes 
some calls to non-abstract primitives of a tagged abstract type illegal 
even if no abstract routines are involved in the Pre'Class or Post'Class. 
It is likely that the above rule will be adjusted; check with ARG work 
at <A HREF="http://www.ada_auth.org/arg.html">www.ada_auth.org/arg.html</A> 
to find the adjusted rules.</span>&nbsp;</div>
<div class="paranum"><a name="p19">19/5</a></div>
<div class="Normal">{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI05s/AI05-0145-2.TXT">AI05-0145-2</A></I>} 
{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI05s/AI05-0262-1.TXT">AI05-0262-1</A></I>} 
{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI05s/AI05-0290-1.TXT">AI05-0290-1</A></I>} 
{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI12s/AI12-0220-1.TXT">AI12-0220-1</A></I>} 
If performing checks is required by the Pre, Pre'Class, Post, or Post'Class 
assertion policies (see <A HREF="AA-11-4-2.html">11.4.2</A>) in effect 
at the point of a corresponding aspect specification applicable to a 
given subprogram<span class="insert5">,</span><span class="delete5">&nbsp;or</span> entry,<span class="insert5">&nbsp;or access-to-subprogram type,</span> 
then the respective precondition or postcondition expressions are considered 
<I>enabled</I>.<A NAME="I4126"></A><A NAME="I4127"></A></div>
<div class="paranum"><a name="p19.a">19.a/3</a></div>
<div class="Annotations"><B>Ramification:&nbsp;</B>{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI05s/AI05-0290-1.TXT">AI05-0290-1</A></I>} 
If a class-wide precondition or postcondition expression is enabled, 
it remains enabled when inherited by an overriding subprogram, even if 
the policy in effect is Ignore for the inheriting subprogram.&nbsp;</div>
<div class="paranum"><a name="p20">20/5</a></div>
<div class="Normal" style="margin-bottom: 0.4em">{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI05s/AI05-0273-1.TXT">AI05-0273-1</A></I>} 
{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI12s/AI12-0280-2.TXT">AI12-0280-2</A></I>} 
<span class="insert5">A subexpression of a postcondition expression is 
<I>known on entry</I> if it is any of:<A NAME="I4128"></A></span><span class="delete5">&nbsp;An 
<SPAN Class="swiss"><A HREF="AA-4-4.html#S0132">expression</A></SPAN> 
is <I>potentially unevaluated</I> if it occurs within:<A NAME="I4129"></A></span></div>
<div class="paranum"><a name="p21">21/5</a></div>
<div class="Bulleted">{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI12s/AI12-0280-2.TXT">AI12-0280-2</A></I>} 
<span class="insert5">a static subexpression (see <A HREF="AA-4-9.html">4.9</A>)</span><span class="delete5">&nbsp;any 
part of an <SPAN Class="swiss"><A HREF="AA-4-5-7.html#S0149">if_expression</A></SPAN> 
other than the first <SPAN Class="swiss"><A HREF="AA-4-5-7.html#S0150">condition</A></SPAN></span>;</div>
<div class="paranum"><a name="p22">22/5</a></div>
<div class="Bulleted">{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI12s/AI12-0280-2.TXT">AI12-0280-2</A></I>} 
<span class="insert5">a literal whose type does not have any Integer_Literal, 
Real_Literal, or String_Literal aspect specified, or the function specified 
by such an attribute has aspect Global specified to be <B>null</B></span><span class="delete5">&nbsp;a 
<I>dependent_</I><SPAN Class="swiss"><A HREF="AA-4-4.html#S0132">expression</A></SPAN> 
of a <SPAN Class="swiss"><A HREF="AA-4-5-7.html#S0151">case_expression</A></SPAN></span>;</div>
<div class="paranum"><a name="p22.a">22.a/5</a></div>
<div class="Annotations"><span class="insert5"><B>Reason:&nbsp;</B></span>{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI12s/AI12-0280-2.TXT">AI12-0280-2</A></I>} 
<span class="insert5">We mention literals explicitly in case they are 
not static (as when their subtype is not static, they are the literal 
<B>null</B>, and so on). We exclude literals of types with the aspects 
that are not Global =&gt; <B>null</B> as those cause a user-written subprogram 
with possible side effects to be called.</span>&nbsp;</div>
<div class="paranum"><a name="p22.1">22.1/5</a></div>
<div class="Bulleted">{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI12s/AI12-0032-1.TXT">AI12-0032-1</A></I>} 
<span class="insert4"></span>{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI12s/AI12-0280-2.TXT">AI12-0280-2</A></I>} 
<span class="insert4"></span>{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI12s/AI12-0422-1.TXT">AI12-0422-1</A></I>} 
<span class="insert4"></span><span class="insert5">a name statically 
denoting a full constant declaration which is known to have no variable 
views (see <A HREF="AA-3-3.html">3.3</A>)</span><span class="insert4"></span><span class="insert4"><span class="delete5">&nbsp;a 
<SPAN Class="swiss"><A HREF="AA-4-5-8.html#S0155">predicate</A></SPAN> 
of a <SPAN Class="swiss"><A HREF="AA-4-5-8.html#S0153">quantified_expression</A></SPAN></span></span><span class="insert4">;</span></div>
<div class="paranum"><a name="p22.b">22.b/5</a></div>
<div class="Annotations"><span class="insert5"><B>Ramification:&nbsp;</B>Constants 
of types with immutably limited or controlled parts are not allowed by 
this rule. Generic formal in objects are allowed by this rule (as they 
are defined to be full constant declarations).</span>&nbsp;</div>
<div class="paranum"><a name="p22.c">22.c/5</a></div>
<div class="Annotations"><span class="insert5"><B>Reason:&nbsp;</B>We only 
want things that cannot be changed. We can't just say &ldquo;constant&rdquo; 
since that includes views of variables in some cases (for instance, a 
dereference of an access to constant object can be a view of a variable). 
There are other things we could have allowed (like a loop parameter), 
but having a subprogram declaration where those could be used (like inside 
of a loop) seems unusual enough to not be worth defining.</span>&nbsp;</div>
<div class="paranum"><a name="p22.2">22.2/5</a></div>
<div class="Bulleted">{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI12s/AI12-0280-2.TXT">AI12-0280-2</A></I>} 
<span class="insert5">a name statically denoting a nonaliased <B>in</B> 
parameter of an elementary type;</span></div>
<div class="paranum"><a name="p22.d">22.d/5</a></div>
<div class="Annotations"><span class="insert5"><B>Ramification:&nbsp;</B>All 
such parameters are by-copy, so the value won't change during the execution 
of the subprogram.</span>&nbsp;</div>
<div class="paranum"><a name="p22.3">22.3/5</a></div>
<div class="Bulleted">{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI12s/AI12-0280-2.TXT">AI12-0280-2</A></I>} 
<span class="insert5">an Old <SPAN Class="swiss"><A HREF="AA-4-1-4.html#S0100">attribute_reference</A></SPAN>;</span></div>
<div class="paranum"><a name="p22.4">22.4/5</a></div>
<div class="Bulleted">{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI12s/AI12-0280-2.TXT">AI12-0280-2</A></I>} 
<span class="insert5">an invocation of a predefined operator where all 
of the operands are known on entry;</span></div>
<div class="paranum"><a name="p22.5">22.5/5</a></div>
<div class="Bulleted">{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI12s/AI12-0280-2.TXT">AI12-0280-2</A></I>} 
<span class="insert5">a function call where the function has aspect Global 
=&gt; <B>null</B> where all of the actual parameters are known on entry;</span></div>
<div class="paranum"><a name="p22.e">22.e/5</a></div>
<div class="Annotations"><span class="insert5"><B>Reason:&nbsp;</B>Such a 
function can only depend on the values of its parameters.</span>&nbsp;</div>
<div class="paranum"><a name="p22.6">22.6/5</a></div>
<div class="Bulleted">{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI12s/AI12-0280-2.TXT">AI12-0280-2</A></I>} 
<span class="insert5">a <SPAN Class="swiss"><A HREF="AA-4-1-3.html#S0098">selected_component</A></SPAN> 
of a known-on-entry <SPAN Class="swiss"><A HREF="AA-4-1.html#S0093">prefix</A></SPAN>;</span></div>
<div class="paranum"><a name="p22.7">22.7/5</a></div>
<div class="Bulleted">{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI12s/AI12-0280-2.TXT">AI12-0280-2</A></I>} 
<span class="insert5">an <SPAN Class="swiss"><A HREF="AA-4-1-1.html#S0096">indexed_component</A></SPAN> 
of a known-on-entry <SPAN Class="swiss"><A HREF="AA-4-1.html#S0093">prefix</A></SPAN> 
where all index <SPAN Class="swiss"><A HREF="AA-4-4.html#S0132">expression</A></SPAN>s 
are known on entry;</span></div>
<div class="paranum"><a name="p22.8">22.8/5</a></div>
<div class="Bulleted">{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI12s/AI12-0280-2.TXT">AI12-0280-2</A></I>} 
<span class="insert5">a parenthesized known-on-entry <SPAN Class="swiss"><A HREF="AA-4-4.html#S0132">expression</A></SPAN>;</span></div>
<div class="paranum"><a name="p22.9">22.9/5</a></div>
<div class="Bulleted">{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI12s/AI12-0280-2.TXT">AI12-0280-2</A></I>} 
<span class="insert5">a <SPAN Class="swiss"><A HREF="AA-4-7.html#S0163">qualified_expression</A></SPAN> 
or <SPAN Class="swiss"><A HREF="AA-4-6.html#S0162">type_conversion</A></SPAN> 
whose operand is a known-on-entry expression;</span></div>
<div class="paranum"><a name="p22.10">22.10/5</a></div>
<div class="Bulleted">{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI12s/AI12-0280-2.TXT">AI12-0280-2</A></I>} 
<span class="insert5">a <SPAN Class="swiss"><A HREF="AA-4-5-7.html#S0148">conditional_expression</A></SPAN> 
where all of the <SPAN Class="swiss"><A HREF="AA-4-5-7.html#S0150">condition</A></SPAN>s, 
<I>selecting_</I><SPAN Class="swiss"><A HREF="AA-4-4.html#S0132">expression</A></SPAN>s, 
and <I>dependent_</I><SPAN Class="swiss"><A HREF="AA-4-4.html#S0132">expression</A></SPAN>s 
are known on entry.</span></div>
<div class="paranum"><a name="p22.f">22.f/5</a></div>
<div class="Annotations"><span class="insert5"><B>Discussion:&nbsp;</B>It's 
OK if such an expression raises an exception, so long as every evaluation 
of the expression raises the same exception.</span>&nbsp;</div>
<div class="paranum"><a name="p22.11">22.11/5</a></div>
<div class="Normal">&nbsp;&nbsp;&nbsp;{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI12s/AI12-0198-1.TXT">AI12-0198-1</A></I>} 
<span class="insert5"></span>{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI12s/AI12-0280-2.TXT">AI12-0280-2</A></I>} 
<span class="insert5">A subexpression of a postcondition expression is 
<I>unconditionally evaluated</I>,<A NAME="I4130"></A> <I>conditionally 
evaluated</I>, or <I>repeatedly evaluated</I>. A subexpression is considered 
unconditionally evaluated unless it is conditionally evaluated or repeatedly 
evaluated.</span></div>
<div class="paranum"><a name="p22.12">22.12/5</a></div>
<div class="Normal" style="margin-bottom: 0.4em">&nbsp;&nbsp;&nbsp;{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI12s/AI12-0280-2.TXT">AI12-0280-2</A></I>} 
<span class="insert5">The following subexpressions are repeatedly evaluated:<A NAME="I4131"></A></span></div>
<div class="paranum"><a name="p22.13">22.13/5</a></div>
<div class="Bulleted">{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI12s/AI12-0280-2.TXT">AI12-0280-2</A></I>} 
<span class="insert5">A subexpression of a predicate of a <SPAN Class="swiss"><A HREF="AA-4-5-8.html#S0153">quantified_expression</A></SPAN>;</span></div>
<div class="paranum"><a name="p22.14">22.14/5</a></div>
<div class="Bulleted">{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI12s/AI12-0280-2.TXT">AI12-0280-2</A></I>} 
<span class="insert5">A subexpression of the expression of an <SPAN Class="swiss"><A HREF="AA-4-3-3.html#S0118">array_component_association</A></SPAN>;</span></div>
<div class="paranum"><a name="p22.15">22.15/5</a></div>
<div class="Bulleted">{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI12s/AI12-0280-2.TXT">AI12-0280-2</A></I>} 
<span class="insert5">A subexpression of the expression of a <SPAN Class="swiss"><A HREF="AA-4-3-5.html#S0128">container_element_association</A></SPAN>.</span> 
</div>
<div class="paranum"><a name="p22.16">22.16/5</a></div>
<div class="Normal" style="margin-bottom: 0.4em">&nbsp;&nbsp;&nbsp;{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI12s/AI12-0280-2.TXT">AI12-0280-2</A></I>} 
<span class="insert5">For a subexpression that is conditionally evaluated, 
there is a set of <I>determining expressions</I><A NAME="I4132"></A> 
that determine whether the subexpression is actually evaluated at run 
time. Subexpressions that are conditionally evaluated<A NAME="I4133"></A> 
and their determining expressions are as follows:</span></div>
<div class="paranum"><a name="p22.17">22.17/5</a></div>
<div class="Bulleted">{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI12s/AI12-0280-2.TXT">AI12-0280-2</A></I>} 
<span class="insert5">For an <SPAN Class="swiss"><A HREF="AA-4-5-7.html#S0149">if_expression</A></SPAN> 
that is not repeatedly evaluated, a subexpression of any part other than 
the first condition is conditionally evaluated, and its determining expressions 
include all <SPAN Class="swiss"><A HREF="AA-4-5-7.html#S0150">condition</A></SPAN>s 
of the <SPAN Class="swiss"><A HREF="AA-4-5-7.html#S0149">if_expression</A></SPAN> 
that precede the subexpression textually;</span></div>
<div class="paranum"><a name="p22.18">22.18/5</a></div>
<div class="Bulleted">{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI12s/AI12-0280-2.TXT">AI12-0280-2</A></I>} 
<span class="insert5">For a <SPAN Class="swiss"><A HREF="AA-4-5-7.html#S0151">case_expression</A></SPAN> 
that is not repeatedly evaluated, a subexpression of any <I>dependent_</I><SPAN Class="swiss"><A HREF="AA-4-4.html#S0132">expression</A></SPAN> 
is conditionally evaluated, and its determining expressions include the 
<I>selecting_</I><SPAN Class="swiss"><A HREF="AA-4-4.html#S0132">expression</A></SPAN> 
of the <SPAN Class="swiss"><A HREF="AA-4-5-7.html#S0151">case_expression</A></SPAN>;</span></div>
<div class="paranum"><a name="p23">23/5</a></div>
<div class="Bulleted">{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI12s/AI12-0280-2.TXT">AI12-0280-2</A></I>} 
<span class="insert5">For</span><span class="delete5">&nbsp;the right operand 
of</span> a short-circuit control form<span class="insert5">&nbsp;that is 
not repeatedly evaluated, a subexpression of the right-hand operand is 
conditionally evaluated, and its determining expressions include the 
left-hand operand of the short-circuit control form;</span><span class="delete5">; 
or</span></div>
<div class="paranum"><a name="p24">24/5</a></div>
<div class="Bulleted">{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI12s/AI12-0280-2.TXT">AI12-0280-2</A></I>} 
<span class="insert5">For a membership test that is not repeatedly evaluated, 
a subexpression of&nbsp;</span>a <SPAN Class="swiss"><A HREF="AA-4-4.html#S0137">membership_choice</A></SPAN> 
other than the first <span class="insert5">is conditionally evaluated, 
and its determining expressions include the <I>tested_</I><SPAN Class="swiss"><A HREF="AA-4-4.html#S0138">simple_expression</A></SPAN> 
and the preceding <SPAN Class="swiss"><A HREF="AA-4-4.html#S0137">membership_choice</A></SPAN>s 
of the membership test</span><span class="delete5">&nbsp;of a membership operation</span>. 
</div>
<div class="paranum"><a name="p24.1">24.1/5</a></div>
<div class="Normal">&nbsp;&nbsp;{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI12s/AI12-0280-2.TXT">AI12-0280-2</A></I>} 
<span class="insert5">A conditionally evaluated subexpression is <I>determined 
to be unevaluated</I> at run time if its set of determining expressions 
are all known on entry, and when evaluated on entry their values are 
such that the given subexpression is not evaluated.<A NAME="I4134"></A> 
<A NAME="I4135"></A></span></div>
<div class="paranum"><a name="p24.a">24.a/5</a></div>
<div class="Annotations" style="margin-bottom: 0.4em"><span class="insert5"><B>Ramification: 
</B>To be precise, a conditionally evaluated expression is determined 
to be unevaluated (including all of its subexpressions) under the following 
circumstances:</span>&nbsp;</div>
<div class="paranum"><a name="p24.b">24.b/5</a></div>
<div class="SmallBulleted"><span class="insert5">Within an <SPAN Class="swiss"><A HREF="AA-4-5-7.html#S0149">if_expression</A></SPAN>, 
a <I>dependent_</I><SPAN Class="swiss"><A HREF="AA-4-4.html#S0132">expression</A></SPAN> 
with an associated <SPAN Class="swiss"><A HREF="AA-4-5-7.html#S0150">condition</A></SPAN> 
that evaluates to False, or a <SPAN Class="swiss"><A HREF="AA-4-5-7.html#S0150">condition</A></SPAN> 
or <I>dependent_</I><SPAN Class="swiss"><A HREF="AA-4-4.html#S0132">expression</A></SPAN> 
where a condition of a preceding part of the <SPAN Class="swiss"><A HREF="AA-4-5-7.html#S0149">if_expression</A></SPAN> 
evaluates to True;</span></div>
<div class="paranum"><a name="p24.c">24.c</a></div>
<div class="SmallBulleted"><span class="insert5">Within a <SPAN Class="swiss"><A HREF="AA-4-5-7.html#S0151">case_expression</A></SPAN>, 
a <I>dependent_</I><SPAN Class="swiss"><A HREF="AA-4-4.html#S0132">expression</A></SPAN> 
with an <SPAN Class="swiss"><A HREF="AA-3-8-1.html#S0073">discrete_choice_list</A></SPAN> 
that is not covered by the value of the <I>selecting_</I><SPAN Class="swiss"><A HREF="AA-4-4.html#S0132">expression</A></SPAN>;</span></div>
<div class="paranum"><a name="p24.d">24.d/5</a></div>
<div class="SmallBulleted"><span class="insert5">The right-hand operand 
of a short-circuit control form where the left-hand operand evaluates 
to False for <B>and then</B> or True for <B>or else</B>;</span></div>
<div class="paranum"><a name="p24.e">24.e/5</a></div>
<div class="SmallBulleted"><span class="insert5">A <SPAN Class="swiss"><A HREF="AA-4-4.html#S0137">membership_choice</A></SPAN> 
of a membership test where the individual membership test defined by 
any prior <SPAN Class="swiss"><A HREF="AA-4-4.html#S0137">membership_choice</A></SPAN> 
evaluates to True.</span>&nbsp;</div>
<div class="paranum"><a name="p25">25/3</a></div>
<div class="Normal" style="margin-bottom: 0.4em">{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI05s/AI05-0145-2.TXT">AI05-0145-2</A></I>} 
For a <SPAN Class="swiss"><A HREF="AA-4-1.html#S0093">prefix</A></SPAN> 
X that denotes an object of a nonlimited type, the following attribute 
is defined:&nbsp;</div>
<div class="paranum"><a name="p26">26/5</a></div>
<div class="WideHanging-Term">X'Old</div><div class="WideHanging-Body">
<A NAME="I4136"></A><A NAME="I4137"></A>{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI05s/AI05-0145-2.TXT">AI05-0145-2</A></I>} 
{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI05s/AI05-0262-1.TXT">AI05-0262-1</A></I>} 
{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI05s/AI05-0273-1.TXT">AI05-0273-1</A></I>} 
{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI12s/AI12-0032-1.TXT">AI12-0032-1</A></I>} 
{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI12s/AI12-0280-2.TXT">AI12-0280-2</A></I>} 
<span class="insert4">Each</span><span class="delete4">&nbsp;For each</span> 
X'Old in a postcondition expression that is enabled<span class="insert5">, 
other than those that occur in subexpressions that are determined to 
be unevaluated,</span><span class="insert4">&nbsp;denotes</span><span class="delete4">,</span> 
a constant <span class="insert4">that&nbsp;</span>is implicitly declared at 
the beginning of the subprogram <span class="insert4">body,</span><span class="delete4">&nbsp;or</span> 
entry<span class="insert4">&nbsp;body, or accept statement</span>.<span class="delete4">&nbsp;The constant is of the type of X and is initialized to the result of 
evaluating X (as an expression) at the point of the constant declaration. 
The value of X'Old in the postcondition expression is the value of this 
constant; the type of X'Old is the type of X. These implicit constant 
declarations occur in an arbitrary order.<A NAME="I4138"></A></span></div>
<div class="paranum"><a name="p26.a">26.a/5</a></div>
<div class="Annotations"><span class="insert5"><B>Ramification:&nbsp;</B></span>{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI12s/AI12-0280-2.TXT">AI12-0280-2</A></I>} 
<span class="insert5">If X'Old occurs in a subexpression that is determined 
to be unevaluated, then there is no associated constant, and no evaluation 
of the prefix takes place. In general, this will require evaluating one 
or more known-on-entry subexpressions before creating and initializing 
any X'Old constants. Note that any 'Old in a known-on-entry subexpression 
evaluated this way represents the current value of the prefix (the 'Old 
itself can be ignored).</span></div>
<div class="paranum"><a name="p26.b">26.b/5</a></div>
<div class="Annotations">{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI12s/AI12-0193-1.TXT">AI12-0193-1</A></I>} 
<span class="insert5">In the case of an accept statement, the constant 
is declared inside of the rendezvous. It is considered part of the initialization 
of the postcondition check, which is part of the rendezvous by definition 
(see <A HREF="AA-9-5-2.html">9.5.2</A>).</span>&nbsp;</div>
<div class="paranum"><a name="p26.1">26.1/4</a></div>
<div class="WideHanging-Body" style="margin-bottom: 0.4em">{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI12s/AI12-0032-1.TXT">AI12-0032-1</A></I>} 
<span class="insert4"></span>{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI12s/AI12-0159-1.TXT">AI12-0159-1</A></I>} 
<span class="insert4">The implicitly declared entity denoted by each 
occurrence of X'Old is declared as follows:</span></div>
<div class="paranum"><a name="p26.2">26.2/4</a></div>
<div class="Indented4Bulleted" style="margin-bottom: 0.3em"><span class="insert4">If 
X is of an anonymous access type defined by an <SPAN Class="swiss"><A HREF="AA-3-10.html#S0084">access_definition</A></SPAN> 
<I>A</I> then</span>&nbsp;</div>
<div class="paranum"><a name="p26.3">26.3/4</a></div>
<div class="Indented5Examples"><span class="insert4"><I>X'Old</I>&nbsp;:&nbsp;<B>constant</B>&nbsp;<I>A</I>&nbsp;:=&nbsp;X;</span></div>
<div class="paranum"><a name="p26.4">26.4/4</a></div>
<div class="Indented4Bulleted" style="margin-bottom: 0.3em"><span class="insert4">If 
X is of a specific tagged type <I>T</I> then</span>&nbsp;</div>
<div class="paranum"><a name="p26.5">26.5/4</a></div>
<div class="Indented5Examples"><span class="insert4"><SPAN Class="roman"><I>anonymous</I></SPAN>&nbsp;:&nbsp;<B>constant</B>&nbsp;<I>T</I>'Class&nbsp;:=&nbsp;<I>T</I>'Class(X);<BR>
<I>X'Old</I>&nbsp;:&nbsp;<I>T</I>&nbsp;<B>renames</B>&nbsp;<I>T</I>(<SPAN Class="roman"><I>anonymous</I></SPAN>);</span></div>
<div class="paranum"><a name="p26.6">26.6/4</a></div>
<div class="Indented4Bulleted-NoPrefix"><span class="insert4">where the 
name X'Old denotes the object renaming.</span>&nbsp;</div>
<div class="paranum"><a name="p26.c">26.c/4</a></div>
<div class="Annotations"><span class="insert4"><B>Ramification:&nbsp;</B>This 
means that the underlying tag associated with X'Old is that of X and 
not that of the nominal type of X.</span>&nbsp;</div>
<div class="paranum"><a name="p26.7">26.7/4</a></div>
<div class="Indented4Bulleted" style="margin-bottom: 0.3em"><span class="insert4">Otherwise</span> 
</div>
<div class="paranum"><a name="p26.8">26.8/4</a></div>
<div class="Indented5Examples"><span class="insert4"><I>X'Old</I>&nbsp;:&nbsp;<B>constant</B>&nbsp;<I>S</I>&nbsp;:=&nbsp;X;</span></div>
<div class="paranum"><a name="p26.9">26.9/4</a></div>
<div class="Indented4Bulleted-NoPrefix"><span class="insert4">where <I>S</I> 
is the nominal subtype of X. This includes the case where the type of 
<I>S</I> is an anonymous array type or a universal type.</span>&nbsp;</div>
<div class="paranum"><a name="p26.10">26.10/5</a></div>
<div class="WideHanging-Body">{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI12s/AI12-0032-1.TXT">AI12-0032-1</A></I>} 
<span class="insert4"></span>{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI12s/AI12-0185-1.TXT">AI12-0185-1</A></I>} 
<span class="insert4"></span>{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI12s/AI12-0388-1.TXT">AI12-0388-1</A></I>} 
<span class="insert4">The&nbsp;</span><span class="insert5">type and&nbsp;</span><span class="insert4">nominal 
subtype of X'Old&nbsp;</span><span class="insert5">are</span><span class="insert4"></span><span class="insert4"><span class="delete5">&nbsp;is</span></span><span class="insert4">&nbsp;as implied by the above definitions.</span><span class="insert4"><span class="delete5">&nbsp;The expected type of the prefix of an Old attribute is that of the attribute. 
Similarly, if an Old attribute shall resolve to be of some type, then 
the prefix of the attribute shall resolve to be of that type.</span></span><span class="insert4"></span></div>
<div class="paranum"><a name="p27">27/5</a></div>
<div class="WideHanging-Body">{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI05s/AI05-0145-2.TXT">AI05-0145-2</A></I>} 
{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI05s/AI05-0262-1.TXT">AI05-0262-1</A></I>} 
{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI05s/AI05-0273-1.TXT">AI05-0273-1</A></I>} 
{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI12s/AI12-0217-1.TXT">AI12-0217-1</A></I>} 
{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI12s/AI12-0280-2.TXT">AI12-0280-2</A></I>} 
Reference to this attribute is only allowed within a postcondition expression. 
The <SPAN Class="swiss"><A HREF="AA-4-1.html#S0093">prefix</A></SPAN> 
of an Old <SPAN Class="swiss"><A HREF="AA-4-1-4.html#S0100">attribute_reference</A></SPAN> 
shall not contain a Result <SPAN Class="swiss"><A HREF="AA-4-1-4.html#S0100">attribute_reference</A></SPAN>, 
nor an Old <SPAN Class="swiss"><A HREF="AA-4-1-4.html#S0100">attribute_reference</A></SPAN>, 
nor a use of an entity declared within the postcondition expression but 
not within <SPAN Class="swiss"><A HREF="AA-4-1.html#S0093">prefix</A></SPAN> 
itself (for example, the loop parameter of an enclosing <SPAN Class="swiss"><A HREF="AA-4-5-8.html#S0153">quantified_expression</A></SPAN>). 
The <SPAN Class="swiss"><A HREF="AA-4-1.html#S0093">prefix</A></SPAN> 
of an Old <SPAN Class="swiss"><A HREF="AA-4-1-4.html#S0100">attribute_reference</A></SPAN> 
<span class="delete5">that is potentially unevaluated&nbsp;</span>shall statically 
<span class="insert5">name (see <A HREF="AA-4-9.html">4.9</A>)</span><span class="delete5">&nbsp;denote</span> 
an entity<span class="insert5">, unless the <SPAN Class="swiss"><A HREF="AA-4-1-4.html#S0100">attribute_reference</A></SPAN> 
is unconditionally evaluated, or is conditionally evaluated where all 
of the determining expressions are known on entry</span>.</div>
<div class="paranum"><a name="p27.a">27.a/3</a></div>
<div class="Annotations"><B>Discussion:&nbsp;</B>The <SPAN Class="swiss"><A HREF="AA-4-1.html#S0093">prefix</A></SPAN> 
X can be any nonlimited object that obeys the syntax for prefix other 
than the few exceptions given above (discussed below). Useful cases are: 
the <SPAN Class="swiss"><A HREF="AA-4-1.html#S0091">name</A></SPAN> of 
a formal parameter of mode [<B>in</B>] <B>out</B>, the <SPAN Class="swiss"><A HREF="AA-4-1.html#S0091">name</A></SPAN> 
of a global variable updated by the subprogram, a function call passing 
those as parameters, a subcomponent of those things, etc.</div>
<div class="paranum"><a name="p27.b">27.b/3</a></div>
<div class="Annotations">A qualified expression can be used to make an 
arbitrary expression into a valid prefix, so T'(X + Y)'Old is legal, 
even though (X + Y)'Old is not. The value being saved here is the sum 
of X and Y (a function result is an object). Of course, in this case 
&quot;+&quot;(X, Y)'Old is also legal, but the qualified expression is 
arguably more readable.</div>
<div class="paranum"><a name="p27.c">27.c/3</a></div>
<div class="Annotations">Note that F(X)'Old and F(X'Old) are not necessarily 
equal. The former calls F(X) and saves that value for later use during 
the postcondition. The latter saves the value of X, and during the postcondition, 
passes that saved value to F. In most cases, the former is what one wants 
(but it is not always legal, see below).</div>
<div class="paranum"><a name="p27.d">27.d/4</a></div>
<div class="Annotations">{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI12s/AI12-0032-1.TXT">AI12-0032-1</A></I>} 
If X has controlled parts, adjustment and finalization are implied by 
the implicit constant declaration.<span class="insert4">&nbsp;Similarly, the 
implicit constant declaration defines the accessibility level of X'Old.</span></div>
<div class="paranum"><a name="p27.e">27.e/3</a></div>
<div class="Annotations">If postconditions are disabled, we want the 
compiler to avoid any overhead associated with saving 'Old values.</div>
<div class="paranum"><a name="p27.f">27.f/3</a></div>
<div class="Annotations">'Old makes no sense for limited types, because 
its implementation involves copying. It might make semantic sense to 
allow build-in-place, but it's not worth the trouble.&nbsp;</div>
<div class="paranum"><a name="p27.g">27.g/5</a></div>
<div class="Annotations"><B>Reason:&nbsp;</B>{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI05s/AI05-0273-1.TXT">AI05-0273-1</A></I>} 
{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI12s/AI12-0280-2.TXT">AI12-0280-2</A></I>} 
{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI12s/AI12-0005-1.TXT">AI12-0005-1</A></I>} 
Since the <SPAN Class="swiss"><A HREF="AA-4-1.html#S0093">prefix</A></SPAN> 
<span class="insert5">of an Old <SPAN Class="swiss"><A HREF="AA-4-1-4.html#S0100">attribute_reference</A></SPAN> 
</span>is evaluated <span class="delete5">unconditionally&nbsp;</span>when 
the subprogram is called<span class="insert5">&nbsp;(if it is evaluated at 
all)</span>, we cannot allow it to include values that do not exist at 
that time (like 'Result and loop parameters of <SPAN Class="swiss"><A HREF="AA-4-5-8.html#S0153">quantified_expression</A></SPAN>s). 
We also do not allow <span class="insert5">the <SPAN Class="swiss"><A HREF="AA-4-1.html#S0093">prefix</A></SPAN> 
itself</span><span class="delete5">&nbsp;it</span> to include 'Old references, 
as those would be redundant (<span class="insert5">because the evaluation 
of the</span><span class="delete5">&nbsp;the entire</span> <SPAN Class="swiss"><A HREF="AA-4-1.html#S0093">prefix</A></SPAN><span class="insert5">, 
if it occurs, already happens on entry to</span><span class="delete5">&nbsp;is evaluated when</span> the subprogram <span class="delete5">&nbsp;is called</span>), 
and allowing them would require some sort of order to the implicit constant 
declarations (because in A(I'Old)'Old, we surely would want the value 
of I'Old evaluated before the A(I'Old) is evaluated).</div>
<div class="paranum"><a name="p27.h">27.h/5</a></div>
<div class="Annotations" style="margin-bottom: 0.4em">{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI05s/AI05-0273-1.TXT">AI05-0273-1</A></I>} 
{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI12s/AI12-0280-2.TXT">AI12-0280-2</A></I>} 
<span class="insert5">An additional rule applies when it cannot be determined 
on entry to the subprogram whether the Old <SPAN Class="swiss"><A HREF="AA-4-1-4.html#S0100">attribute_reference</A></SPAN> 
will or will not be evaluated when the overall postcondition expression 
is evaluated. In such cases</span><span class="delete5">&nbsp;In addition</span>, 
we <span class="insert5">require that</span><span class="delete5">&nbsp;only 
allow simple names as</span> the <SPAN Class="swiss"><A HREF="AA-4-1.html#S0093">prefix</A></SPAN> 
of the Old <span class="insert5"><SPAN Class="swiss"><A HREF="AA-4-1-4.html#S0100">attribute_reference</A></SPAN> 
to statically name some object</span><span class="delete5">&nbsp;attrribute 
if the <SPAN Class="swiss"><A HREF="AA-4-1-4.html#S0100">attribute_reference</A></SPAN> 
might not be evaluated when the postcondition expression is evaluated</span>. 
This is necessary because the Old <SPAN Class="swiss"><A HREF="AA-4-1.html#S0093">prefix</A></SPAN>es 
have to be <span class="delete5">unconditionally&nbsp;</span>evaluated when 
the subprogram is called<span class="insert5">&nbsp;if there is any possibility 
that they might be needed</span>; the compiler cannot in general know 
whether they will be needed in the postcondition expression. To see the 
problem, consider:</div>
<div class="paranum"><a name="p27.i">27.i/3</a></div>
<div class="SmallExamples">Table&nbsp;:&nbsp;<B>array</B>&nbsp;(1..10)&nbsp;<B>of</B>&nbsp;Integer&nbsp;:=&nbsp;...<BR>
<B>procedure</B>&nbsp;Bar&nbsp;(I&nbsp;:&nbsp;<B>in&nbsp;out</B>&nbsp;Natural)<BR>
&nbsp;&nbsp;&nbsp;<B>with</B>&nbsp;Post&nbsp;=&gt;&nbsp;I&nbsp;&gt;&nbsp;0&nbsp;<B>and&nbsp;then</B>&nbsp;Table(I)'Old&nbsp;=&nbsp;1;&nbsp;--&nbsp;<SPAN Class="roman"><I>Illegal</I></SPAN></div>
<div class="paranum"><a name="p27.j">27.j/5</a></div>
<div class="Annotations" style="margin-bottom: 0.9em">{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI12s/AI12-0005-1.TXT">AI12-0005-1</A></I>} 
In this example, the compiler cannot know <span class="insert5">on entry 
what will be&nbsp;</span>the value of I when the subprogram returns (since 
the subprogram execution can change it), and thus it does not know whether 
Table(I)'Old will be needed then. Thus it has to always create an implicit 
constant and evaluate Table(I) when Bar is called (because not having 
the value when it is needed is not acceptable). But if I = 0 when the 
subprogram is called, that evaluation will raise Constraint_Error, and 
that will happen even if I is unchanged by the subprogram and the value 
of Table(I)'Old is not ultimately needed. It's easy to see how a similar 
problem could occur for a dereference of an access type. This would be 
mystifying (since the point of the short circuit is to eliminate this 
possibility, but it cannot do so). Therefore, we require the <SPAN Class="swiss"><A HREF="AA-4-1.html#S0093">prefix</A></SPAN> 
of any Old <span class="insert5"><SPAN Class="swiss"><A HREF="AA-4-1-4.html#S0100">attribute_reference</A></SPAN></span><span class="delete5">&nbsp;attribute</span> 
in such a context to statically <span class="insert5">name</span><span class="delete5">&nbsp;denote</span> 
an object, which eliminates anything that could change <span class="delete5">at 
</span>during execution.</div>
<div class="paranum"><a name="p27.k">27.k/3</a></div>
<div class="Annotations">It is easy to work around most errors that occur 
because of this rule. Just move the 'Old to the outer object, before 
any indexing, dereferences, or components. (That does not work for function 
calls, however, nor does it work for array indexing if the index can 
change during the execution of the subprogram.)&nbsp;</div>
<div class="paranum"><a name="p27.l">27.l/4</a></div>
<div class="Annotations" style="margin-bottom: 0.4em"><span class="insert4"><B>Ramification: 
</B></span>{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI12s/AI12-0032-1.TXT">AI12-0032-1</A></I>} 
<span class="insert4">An accept statement for a task entry with enabled 
postconditions such as</span>&nbsp;</div>
<div class="paranum"><a name="p27.m">27.m/4</a></div>
<div class="SmallExamples"><span class="insert4"><B>accept</B>&nbsp;E&nbsp;<B>do</B><BR>
&nbsp;&nbsp;&nbsp;<SPAN Class="roman"><I>statements</I></SPAN><BR>
<B>exception</B><BR>
&nbsp;&nbsp;&nbsp;<SPAN Class="roman"><I>handlers</I></SPAN><BR>
<B>end</B>;</span></div>
<div class="paranum"><a name="p27.n">27.n/4</a></div>
<div class="Annotations" style="margin-bottom: 0.4em"><span class="insert4">behaves 
(at runtime) as follows:</span>&nbsp;</div>
<div class="paranum"><a name="p27.o">27.o/4</a></div>
<div class="SmallExamples"><span class="insert4"><B>accept</B>&nbsp;E&nbsp;<B>do</B><BR>
&nbsp;&nbsp;&nbsp;<B>declare</B><BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<SPAN Class="roman"><I>declarations,&nbsp;if&nbsp;any,&nbsp;of&nbsp;'Old&nbsp;constants</I></SPAN><BR>
&nbsp;&nbsp;&nbsp;<B>begin</B><BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<B>begin</B><BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<SPAN Class="roman"><I>statements</I></SPAN><BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<B>exception</B><BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<SPAN Class="roman"><I>handlers</I></SPAN><BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<B>end</B>;<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<SPAN Class="roman"><I>postcondition&nbsp;checks</I></SPAN><BR>
&nbsp;&nbsp;&nbsp;<B>end</B>;<BR>
<B>end</B>;</span></div>
<div class="paranum"><a name="p27.p">27.p/4</a></div>
<div class="Annotations">{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI12s/AI12-0032-1.TXT">AI12-0032-1</A></I>} 
<span class="insert4">Preconditions are checked by the caller before 
the rendezvous begins. Postcondition expressions might, of course, reference 
'Old constants.</span></div>
<div class="paranum"><a name="p27.q">27.q/4</a></div>
<div class="Annotations">{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI12s/AI12-0032-1.TXT">AI12-0032-1</A></I>} 
<span class="insert4">In the case of a protected operation with enabled 
postconditions, 'Old constant declarations (if any) are elaborated after 
the start of the protected action. Postcondition checks (which might 
reference these constants) are performed before the end of the protected 
action as described below.</span></div>
<div class="paranum"><a name="p27.r">27.r/5</a></div>
<div class="Annotations">{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI12s/AI12-0280-2.TXT">AI12-0280-2</A></I>} 
<span class="insert5">The <SPAN Class="swiss"><A HREF="AA-4-1.html#S0093">prefix</A></SPAN> 
of an Old <SPAN Class="swiss"><A HREF="AA-4-1-4.html#S0100">attribute_reference</A></SPAN> 
has to statically name an entity if it appears within a repeatedly evaluated 
expression.</span>&nbsp;</div>
<div class="paranum"><a name="p28">28/5</a></div>
<div class="Normal" style="margin-bottom: 0.4em">{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI05s/AI05-0145-2.TXT">AI05-0145-2</A></I>} 
{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI05s/AI05-0220-1.TXT">AI05-0220-1</A></I>} 
For a <SPAN Class="swiss"><A HREF="AA-4-1.html#S0093">prefix</A></SPAN> 
F that denotes a function declaration<span class="insert5">&nbsp;or an access-to-function 
type</span>, the following attribute is defined:&nbsp;</div>
<div class="paranum"><a name="p29">29/5</a></div>
<div class="WideHanging-Term">F'Result</div><div class="WideHanging-Body">
<A NAME="I4139"></A><A NAME="I4140"></A>{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI05s/AI05-0145-2.TXT">AI05-0145-2</A></I>} 
{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI05s/AI05-0262-1.TXT">AI05-0262-1</A></I>} 
{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI12s/AI12-0185-1.TXT">AI12-0185-1</A></I>} 
{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI12s/AI12-0220-1.TXT">AI12-0220-1</A></I>} 
{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI12s/AI12-0388-1.TXT">AI12-0388-1</A></I>} 
Within a postcondition expression for <span class="delete5">function 
</span>F, denotes the <span class="insert5">return</span><span class="delete5">&nbsp;result</span> 
object of the function<span class="insert5">&nbsp;call for which the postcondition 
expression is evaluated</span>. The type of this attribute is that of 
the <span class="insert5">result subtype of the&nbsp;</span>function <span class="insert5">or 
access-to-function type&nbsp;</span><span class="delete5">result</span> except 
within a Post'Class postcondition expression for a function with a controlling 
result or with a controlling access result<span class="insert5">; in 
those cases the type of the attribute is described above as part of the 
Name Resolution Rules for Post'Class</span><span class="delete5">. For 
a controlling result, the type of the attribute is <I>T</I>'Class, where 
<I>T</I> is the function result type. For a controlling access result, 
the type of the attribute is an anonymous access type whose designated 
type is <I>T</I>'Class, where <I>T</I> is the designated type of the 
function result type</span>.</div>
<div class="paranum"><a name="p30">30/3</a></div>
<div class="WideHanging-Body">{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI05s/AI05-0262-1.TXT">AI05-0262-1</A></I>} 
Use of this attribute is allowed only within a postcondition expression 
for F.&nbsp;</div>
<div class="paranum"><a name="p30.a">30.a/5</a></div>
<div class="Annotations"><span class="insert5"><B>To be honest:&nbsp;</B></span>{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI05s/AI05-0220-1.TXT">AI05-0220-1</A></I>} 
<span class="insert5">An &ldquo;access-to-function type&rdquo; is an 
access-to-subprogram type whose designated profile is a function profile.</span> 
</div>
<div class="paranum"><a name="p30.1">30.1/5</a></div>
<div class="Normal" style="margin-bottom: 0.4em">&nbsp;&nbsp;{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI12s/AI12-0143-1.TXT">AI12-0143-1</A></I>} 
<span class="insert5">For a <SPAN Class="swiss"><A HREF="AA-4-1.html#S0093">prefix</A></SPAN> 
E that denotes an entry declaration of an entry family (see <A HREF="AA-9-5-2.html">9.5.2</A>), 
the following attribute is defined:</span>&nbsp;</div>
<div class="paranum"><a name="p30.2">30.2/5</a></div>
<div class="WideHanging-Term">&nbsp;&nbsp;<span class="insert5">E'Index</span></div><div class="WideHanging-Body">
<span class="insert5"><A NAME="I4141"></A><A NAME="I4142"></A></span>{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI12s/AI12-0143-1.TXT">AI12-0143-1</A></I>} 
<span class="insert5"></span><span class="insert5">Within a precondition 
or postcondition expression for entry family E, denotes the value of 
the entry index for the call of E. The nominal subtype of this attribute 
is the entry index subtype.</span></div>
<div class="paranum"><a name="p30.3">30.3/5</a></div>
<div class="WideHanging-Body">{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI12s/AI12-0143-1.TXT">AI12-0143-1</A></I>} 
<span class="insert5">Use of this attribute is allowed only within a 
precondition or postcondition expression for E.</span>&nbsp;</div>

<H4 Class="centered">Dynamic Semantics</H4>
<div class="paranum"><a name="p31">31/3</a></div>
<div class="Normal" style="margin-bottom: 0.4em">{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI05s/AI05-0145-2.TXT">AI05-0145-2</A></I>} 
{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI05s/AI05-0247-1.TXT">AI05-0247-1</A></I>} 
{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI05s/AI05-0290-1.TXT">AI05-0290-1</A></I>} 
Upon a call of the subprogram or entry, after evaluating any actual parameters, 
precondition checks are performed as follows:</div>
<div class="paranum"><a name="p32">32/3</a></div>
<div class="Bulleted">The specific precondition check begins with the 
evaluation of the specific precondition expression that applies to the 
subprogram or entry, if it is enabled; if the expression evaluates to 
False, Assertions.Assertion_Error is raised; if the expression is not 
enabled, the check succeeds.<A NAME="I4143"></A><A NAME="I4144"></A><A NAME="I4145"></A></div>
<div class="paranum"><a name="p33">33/3</a></div>
<div class="Bulleted">The class-wide precondition check begins with the 
evaluation of any enabled class-wide precondition expressions that apply 
to the subprogram or entry. If and only if all the class-wide precondition 
expressions evaluate to False, Assertions.Assertion_Error is raised.<A NAME="I4146"></A><A NAME="I4147"></A><A NAME="I4148"></A></div>
<div class="paranum"><a name="p33.a">33.a/3</a></div>
<div class="Annotations"><B>Ramification:&nbsp;</B>The class-wide precondition 
expressions of the entity itself as well as those of any parent or progenitor 
operations are evaluated, as these expressions apply to the corresponding 
operations of all descendants.</div>
<div class="paranum"><a name="p33.b">33.b/3</a></div>
<div class="Annotations">Class-wide precondition checks are performed 
for all appropriate calls, but only enabled precondition expressions 
are evaluated. Thus, the check would be trivial if no precondition expressions 
are enabled.&nbsp;</div>
<div class="paranum"><a name="p34">34/5</a></div>
<div class="Normal">{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI05s/AI05-0145-2.TXT">AI05-0145-2</A></I>} 
{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI05s/AI05-0247-1.TXT">AI05-0247-1</A></I>} 
{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI05s/AI05-0254-1.TXT">AI05-0254-1</A></I>} 
{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI05s/AI05-0269-1.TXT">AI05-0269-1</A></I>} 
{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI12s/AI12-0166-1.TXT">AI12-0166-1</A></I>} 
The precondition checks are performed in an arbitrary order, and if any 
of the class-wide precondition expressions evaluate to True, it is not 
specified whether the other class-wide precondition expressions are evaluated. 
The precondition checks and any check for elaboration of the subprogram 
body are performed in an arbitrary order. <span class="insert5">In</span><span class="delete5">&nbsp;It 
is not specified whether in</span> a call on a protected operation, the 
checks are performed before <span class="delete5">or after&nbsp;</span>starting 
the protected action. For an entry call, the checks are performed prior 
to checking whether the entry is open.<A NAME="I4149"></A><A NAME="I4150"></A></div>
<div class="paranum"><a name="p34.a">34.a/3</a></div>
<div class="Annotations"><B>Reason:&nbsp;</B>We need to explicitly allow short-circuiting 
of the evaluation of the class-wide precondition check if any expression 
fails, as it consists of multiple expressions; we don't need a similar 
permission for the specific precondition check as it consists only of 
a single expression. Nothing is evaluated for the call after a check 
fails, as the failed check propagates an exception.&nbsp;</div>
<div class="paranum"><a name="p35">35/3</a></div>
<div class="Normal">{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI05s/AI05-0145-2.TXT">AI05-0145-2</A></I>} 
{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI05s/AI05-0247-1.TXT">AI05-0247-1</A></I>} 
{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI05s/AI05-0254-1.TXT">AI05-0254-1</A></I>} 
{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI05s/AI05-0262-1.TXT">AI05-0262-1</A></I>} 
{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI05s/AI05-0290-1.TXT">AI05-0290-1</A></I>} 
Upon successful return from a call of the subprogram or entry, prior 
to copying back any by-copy <B>in out</B> or <B>out</B> parameters, the 
postcondition check is performed. This consists of the evaluation of 
any enabled specific and class-wide postcondition expressions that apply 
to the subprogram or entry. If any of the postcondition expressions evaluate 
to False, then Assertions.Assertion_Error is raised. The postcondition 
expressions are evaluated in an arbitrary order, and if any postcondition 
expression evaluates to False, it is not specified whether any other 
postcondition expressions are evaluated. The postcondition check, and 
any constraint or predicate checks associated with <B>in out</B> or <B>out</B> 
parameters are performed in an arbitrary order.<A NAME="I4151"></A><A NAME="I4152"></A><A NAME="I4153"></A><A NAME="I4154"></A><A NAME="I4155"></A></div>
<div class="paranum"><a name="p35.a">35.a/3</a></div>
<div class="Annotations"><B>Ramification:&nbsp;</B>The class-wide postcondition 
expressions of the entity itself as well as those of any parent or progenitor 
operations are evaluated, as these apply to all descendants; in contrast, 
only the specific postcondition of the entity applies. Postconditions 
can always be evaluated inside the invoked body.&nbsp;</div>
<div class="paranum"><a name="p35.1">35.1/4</a></div>
<div class="Normal">&nbsp;&nbsp;{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI12s/AI12-0032-1.TXT">AI12-0032-1</A></I>} 
<span class="insert4">For a call to a task entry, the postcondition check 
is performed before the end of the rendezvous; for a call to a protected 
operation, the postcondition check is performed before the end of the 
protected action of the call. The postcondition check for any call is 
performed before the finalization of any implicitly-declared constants 
associated (as described above) with Old <SPAN Class="swiss"><A HREF="AA-4-1-4.html#S0100">attribute_reference</A></SPAN>s 
but after the finalization of any other entities whose accessibility 
level is that of the execution of the callable construct.</span>&nbsp;</div>
<div class="paranum"><a name="p35.a.1">35.a.1/4</a></div>
<div class="Annotations"><span class="insert4"><B>Reason:&nbsp;</B></span>{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI12s/AI12-0032-1.TXT">AI12-0032-1</A></I>} 
<span class="insert4">If a postcondition references the implicitly-declared 
constant associated with an Old attribute, the postcondition must be 
evaluated before the constant is finalized. One way to think of this 
is to imagine declaring a controlled object between any implicit &quot;'Old&quot; 
constant declarations and any explicit declarations, then performing 
postcondition checks during the finalization of this object.</span>&nbsp;</div>
<div class="paranum"><a name="p36">36/3</a></div>
<div class="Normal">{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI05s/AI05-0145-2.TXT">AI05-0145-2</A></I>} 
{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI05s/AI05-0262-1.TXT">AI05-0262-1</A></I>} 
If a precondition or postcondition check fails, the exception is raised 
at the point of the call[; the exception cannot be handled inside the 
called subprogram or entry]. Similarly, any exception raised by the evaluation 
of a precondition or postcondition expression is raised at the point 
of call.</div>
<div class="paranum"><a name="p37">37/4</a></div>
<div class="Normal">{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI05s/AI05-0145-2.TXT">AI05-0145-2</A></I>} 
{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI05s/AI05-0247-1.TXT">AI05-0247-1</A></I>} 
{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI05s/AI05-0254-1.TXT">AI05-0254-1</A></I>} 
{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI05s/AI05-0262-1.TXT">AI05-0262-1</A></I>} 
{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI12s/AI12-0113-1.TXT">AI12-0113-1</A></I>} 
{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI12s/AI12-0159-1.TXT">AI12-0159-1</A></I>} 
For any<span class="insert4">&nbsp;call to a</span> subprogram or entry <span class="insert4"><I>S</I></span><span class="delete4">&nbsp;call</span> 
(including dispatching calls), the checks that are performed to verify 
specific precondition expressions and specific and class-wide postcondition 
expressions are determined by those for the subprogram or entry actually 
invoked. Note that the class-wide postcondition expressions verified 
by the postcondition check that is part of a call on a primitive subprogram 
of type <I>T</I> includes all class-wide postcondition expressions originating 
in any progenitor of <I>T</I>[, even if the primitive subprogram called 
is inherited from a type <I>T1</I> and some of the postcondition expressions 
do not apply to the corresponding primitive subprogram of <I>T1</I>].<span class="insert4">&nbsp;Any operations within a class-wide postcondition expression that were 
resolved as primitive operations of the (notional) formal derived type 
<I>NT</I>, are in the evaluation of the postcondition bound to the corresponding 
operations of the type identified by the controlling tag of the call 
on <I>S</I>.[ This applies to both dispatching and non-dispatching calls 
on <I>S</I>.]</span></div>
<div class="paranum"><a name="p37.a">37.a/3</a></div>
<div class="Annotations"><B>Ramification:&nbsp;</B>This applies to access-to-subprogram 
calls, dispatching calls, and to statically bound calls. We need this 
rule to cover statically bound calls as well, as specific pre- and postconditions 
are not inherited, but the subprogram might be.</div>
<div class="paranum"><a name="p37.b">37.b/3</a></div>
<div class="Annotations">For concrete subprograms, we require the original 
specific postcondition to be evaluated as well as the inherited class-wide 
postconditions in order that the semantics of an explicitly defined wrapper 
that does nothing but call the original subprogram is the same as that 
of an inherited subprogram.</div>
<div class="paranum"><a name="p37.c">37.c/3</a></div>
<div class="Annotations">Note that this rule does not apply to class-wide 
preconditions; they have their own rules mentioned below.&nbsp;</div>
<div class="paranum"><a name="p38">38/4</a></div>
<div class="Normal">{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI05s/AI05-0145-2.TXT">AI05-0145-2</A></I>} 
{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI05s/AI05-0247-1.TXT">AI05-0247-1</A></I>} 
{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI05s/AI05-0254-1.TXT">AI05-0254-1</A></I>} 
{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI12s/AI12-0113-1.TXT">AI12-0113-1</A></I>} 
{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI12s/AI12-0159-1.TXT">AI12-0159-1</A></I>} 
The class-wide precondition check for a call to a subprogram or entry 
<span class="insert4"><I>S</I>&nbsp;</span>consists solely of checking the 
class-wide precondition expressions that apply to the denoted callable 
entity (not necessarily <span class="insert4">to&nbsp;</span>the one that 
is invoked).<span class="insert4">&nbsp;Any operations within such an expression 
that were resolved as primitive operations of the (notional) formal derived 
type <I>NT</I> are in the evaluation of the precondition bound to the 
corresponding operations of the type identified by the controlling tag 
of the call on <I>S</I>.[ This applies to both dispatching and non-dispatching 
calls on <I>S</I>.]</span></div>
<div class="paranum"><a name="p38.a">38.a/3</a></div>
<div class="Annotations"><B>Ramification:&nbsp;</B>For a dispatching call, 
we are talking about the Pre'Class(es) that apply to the subprogram that 
the dispatching call is resolving to, not the Pre'Class(es) for the subprogram 
that is ultimately dispatched to. The class-wide precondition of the 
resolved call is necessarily the same or stronger than that of the invoked 
call. For a statically bound call, these are the same; for an access-to-subprogram, 
(which has no class-wide preconditions of its own), we check the class-wide 
preconditions of the invoked routine.</div>
<div class="paranum"><a name="p38.a.1">38.a.1/5</a></div>
<div class="Annotations">{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI12s/AI12-0233-1.TXT">AI12-0233-1</A></I>} 
<span class="insert5">Since this check is based on the &ldquo;callable 
entity&rdquo;, it does not depend on the view of the entity. This matters 
any time the ancestor type (if any) of the partial view differs from 
the parent type of the full view. In such a case, the view of the callable 
entity associated with the full view might inherit a Pre'Class while 
the view of the same callable entity associated with the partial view 
does not.</span>&nbsp;</div>
<div class="paranum"><a name="p38.b">38.b/3</a></div>
<div class="Annotations"><B>Implementation Note:&nbsp;</B>These rules imply 
that logically, class-wide preconditions of routines must be checked 
at the point of call (other than for access-to-subprogram calls, which 
must be checked in the body, probably using a wrapper). Specific preconditions 
that might be called with a dispatching call or via an access-to-subprogram 
value must be checked inside of the subprogram body. In contrast, the 
postcondition checks always need to be checked inside the body of the 
routine. Of course, an implementation can evaluate all of these at the 
point of call for statically bound calls if the implementation uses wrappers 
for dispatching bodies and for 'Access values.</div>
<div class="paranum"><a name="p38.c">38.c/3</a></div>
<div class="Annotations">There is no requirement for an implementation 
to generate special code for routines that are imported from outside 
of the Ada program. That's because there is a requirement on the programmer 
that the use of interfacing aspects do not violate Ada semantics (see 
<A HREF="AA-B-1.html">B.1</A>). That includes making pre- and postcondition 
checks. For instance, if the implementation expects routines to make 
their own postcondition checks in the body before returning, C code can 
be assumed to do this (even though that is highly unlikely). That's even 
though the formal definition of those checks is that they are evaluated 
at the call site. Note that pre- and postconditions can be very useful 
for verification tools (even if they aren't checked), because they tell 
the tool about the expectations on the foreign code that it most likely 
cannot analyze.&nbsp;</div>
<div class="paranum"><a name="p39">39/5</a></div>
<div class="Normal">{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI12s/AI12-0195-1.TXT">AI12-0195-1</A></I>} 
<span class="insert5">For the purposes of the above rules, a call on 
an inherited subprogram is considered to involve a call on a subprogram 
<I>S</I>' whose body consists only of a call (with appropriate conversions) 
on the non-inherited subprogram <I>S</I> from which the inherited subprogram 
was derived. It is not specified whether class-wide precondition or postcondition 
expressions that are equivalent (with respect to which non-inherited 
function bodies are executed) for <I>S</I> and <I>S</I>' are evaluated 
once or twice. If evaluated only once, the value returned is used for 
both associated checks.</span></div>
<div class="paranum"><a name="p39.a">39.a/5</a></div>
<div class="Annotations"><span class="insert5"><B>Implementation Note: 
</B>If the class-wide pre- and postcondition expressions are equivalent 
for <I>S</I> and <I>S</I>' because none of the primitive subprograms 
called in those expressions were overridden, no wrapper is needed. Otherwise, 
a wrapper is presumably needed to provide the correct logic.</span>&nbsp;</div>
<div class="paranum"><a name="p40">40/5</a></div>
<div class="Normal">{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI05s/AI05-0145-2.TXT">AI05-0145-2</A></I>} 
{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI05s/AI05-0247-1.TXT">AI05-0247-1</A></I>} 
{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI05s/AI05-0254-1.TXT">AI05-0254-1</A></I>} 
{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI12s/AI12-0220-1.TXT">AI12-0220-1</A></I>} 
For a call via an access-to-subprogram value, <span class="delete5">all 
</span>precondition and postcondition checks performed are <span class="insert5">as 
</span>determined by the subprogram or entry denoted by the prefix of 
the Access attribute reference that produced the value.<span class="insert5">&nbsp;In addition, a precondition check of any precondition expression associated 
with the access-to-subprogram type is performed. Similarly, a postcondition 
check of any postcondition expression associated with the access-to-subprogram 
type is performed.</span></div>
<div class="paranum"><a name="p40.a">40.a/5</a></div>
<div class="Annotations"><span class="insert5"><B>Implementation Note: 
</B></span>{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI12s/AI12-0220-1.TXT">AI12-0220-1</A></I>} 
<span class="insert5">A call via an access-to-subprogram value can be 
considered equivalent (with respect to dynamic semantics) to a call to 
a notional &quot;wrapper&quot; subprogram which has the Pre and Post 
aspects and the profile of the access-to-subprogram type and whose body 
contains (and returns, in the case of a function) only a call to the 
designated subprogram. However, other evaluation orders for the checks 
are allowed beyond those allowed by strictly following this model. This 
equivalence can be used to determine the appropriate point at which the 
constant associated with an Old attribute reference in the Post aspect 
for an access-to-subprogram type is elaborated and finalized.</span> 
</div>
<div class="paranum"><a name="p40.b">40.b/5</a></div>
<div class="Annotations"><span class="insert5"><B>Ramification:&nbsp;</B></span>{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI12s/AI12-0220-1.TXT">AI12-0220-1</A></I>} 
<span class="insert5">In the case of type conversion between two access-to-subprogram 
types, the Pre and Post aspects of the source type of the conversion 
play no role in any subsequent call via the conversion result; only the 
Pre and Post aspects of the target type of the conversion are relevant 
in that case. The same applies in the case of a &ldquo;conversion&rdquo; 
(using the term loosely) which is accomplished by combining a dereference 
and an Access attribute reference, as in <TT>Some_Pointer.<B>all</B>'Access</TT>.</span> 
</div>
<div class="paranum"><a name="p41">41/5</a></div>
<div class="Normal">{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI12s/AI12-0272-1.TXT">AI12-0272-1</A></I>} 
<span class="insert5">[For a call on a generic formal subprogram, precondition 
and postcondition checks performed are as determined by the subprogram 
or entry denoted by the actual subprogram, along with any specific precondition 
and specific postcondition of the formal subprogram itself.]</span></div>
<div class="paranum"><a name="p41.a">41.a/5</a></div>
<div class="Annotations"><span class="insert5"><B>Proof:&nbsp;</B></span>{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI12s/AI12-0272-1.TXT">AI12-0272-1</A></I>} 
<span class="insert5">This follows from the general Dynamic Semantics 
rules given above, but we mention it explicitly so that there can be 
no doubt that it is intended.</span>&nbsp;</div>
<div class="paranum"><a name="p41.b">41.b/5</a></div>
<div class="Annotations"><span class="insert5"><B>To be honest:&nbsp;</B></span>{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI12s/AI12-0371-1.TXT">AI12-0371-1</A></I>} 
<span class="insert5">The specific precondition and postcondition that 
apply to a generic formal subprogram also apply to any renaming of that 
subprogram, even if that renaming is visible in the instance and called 
from outside of the generic instance.</span>&nbsp;</div>

<H4 Class="centered">Implementation Permissions</H4>
<div class="paranum"><a name="p42">42/5</a></div>
<div class="Normal">{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI12s/AI12-0280-2.TXT">AI12-0280-2</A></I>} 
<span class="insert5"></span>{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI12s/AI12-0373-1.TXT">AI12-0373-1</A></I>} 
<span class="insert5">An implementation may evaluate a known-on-entry 
subexpression of a postcondition expression of an entity at the place 
where X'Old constants are created for the entity, with the normal evaluation 
of the postcondition expression, or both.</span></div>
<div class="paranum"><a name="p42.a">42.a/5</a></div>
<div class="Annotations"><span class="insert5"><B>Reason:&nbsp;</B></span>{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI12s/AI12-0280-2.TXT">AI12-0280-2</A></I>} 
<span class="insert5">We allow the evaluation of known-on-entry subexpressions 
when they might be needed to determine whether to create a particular 
'Old constant. We allow them to be evaluated later as well, or for the 
results to be saved somehow. This permission shouldn't matter, as the 
results ought to be same wherever they are evaluated and there should 
not be any side effects. The main effect of the permission is to determine 
when any exceptions caused by such subexpressions may be raised. We never 
require waiting to determine the value of such subexpressions, even if 
they aren't used to determine the creation of a constant for 'Old.</span> 
</div>
<div class="paranum"><a name="p43">43/5</a></div>
<div class="Notes">NOTE 1&nbsp;&nbsp;&nbsp;{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI05s/AI05-0145-2.TXT">AI05-0145-2</A></I>} 
{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI05s/AI05-0262-1.TXT">AI05-0262-1</A></I>} 
{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI12s/AI12-0442-1.TXT">AI12-0442-1</A></I>} 
A precondition is checked just before the call. If another task can change 
any value that the precondition expression depends on, the precondition 
<span class="insert5">can evaluate to False</span><span class="delete5">&nbsp;need 
not hold</span> within the subprogram or entry body.</div>
<div class="paranum"><a name="p44">44/5</a></div>
<div class="Notes">NOTE 2&nbsp;&nbsp;&nbsp;{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI12s/AI12-0312-1.TXT">AI12-0312-1</A></I>} 
<span class="insert5">For an example of the use of these aspects and 
attributes, see the Streams Subsystem definitions in <A HREF="AA-13-13-1.html">13.13.1</A>.</span> 
</div>

<H4 Class="centered">Extensions to Ada 2005</H4>
<div class="paranum"><a name="p44.a">44.a/3</a></div>
<div class="Annotations">{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI05s/AI05-0145-2.TXT">AI05-0145-2</A></I>} 
{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI05s/AI05-0230-1.TXT">AI05-0230-1</A></I>} 
{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI05s/AI05-0247-1.TXT">AI05-0247-1</A></I>} 
{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI05s/AI05-0254-1.TXT">AI05-0254-1</A></I>} 
{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI05s/AI05-0262-1.TXT">AI05-0262-1</A></I>} 
{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI05s/AI05-0273-1.TXT">AI05-0273-1</A></I>} 
{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI05s/AI05-0274-1.TXT">AI05-0274-1</A></I>} 
<A NAME="I4156"></A>Pre and Post aspects are new.&nbsp;</div>

<H4 Class="centered">Inconsistencies With Ada 2012</H4>
<div class="paranum"><a name="p44.b">44.b/4</a></div>
<div class="Annotations">{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI12s/AI12-0032-1.TXT">AI12-0032-1</A></I>} 
<span class="insert4"><A NAME="I4157"></A><B>Corrigendum:</B> The Old 
attribute is defined more carefully. This changes the nominal subtype 
and place of declaration of the attribute compared to the published Ada 
2012 Reference Manual. In extreme cases, this could change the runtime 
behavior of the attribute (for instance, the tag might be different). 
The changes are most likely going to prevent bugs by being more intuitive, 
but it is possible that a program that previously worked might fail.</span></div>
<div class="paranum"><a name="p44.c">44.c/4</a></div>
<div class="Annotations">{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI12s/AI12-0113-1.TXT">AI12-0113-1</A></I>} 
<span class="insert4"></span>{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI12s/AI12-0159-1.TXT">AI12-0159-1</A></I>} 
<span class="insert4"><B>Corrigendum:</B> Eliminated unintentional redispatching 
from class-wide preconditions and postconditions. This means that a different 
body might be evaluated for a statically bound call to a routine that 
has a class-wide precondition or postcondition. The change means that 
the behavior of Pre and Pre'Class will be the same for a particular subprogram, 
and that the known behavior of the operations can be assumed within the 
body of that subprogram for Pre'Class. We expect that this change will 
primarily fix bugs, as it will make Pre'Class and Post'Class work more 
like expected. In the case where redispatching is desired, an explicit 
conversion to a class-wide type can be used.</span></div>
<div class="paranum"><a name="p44.d">44.d/5</a></div>
<div class="Annotations">{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI12s/AI12-0166-1.TXT">AI12-0166-1</A></I>} 
<span class="insert5"><B>Correction:</B> Specified that precondition 
checks always take place before starting a protected action. Original 
Ada 2012 left this unspecified, so if an implementation made the checks 
after starting the protected action, and a program depended upon that, 
the program might fail in a different compiler. But such a program was 
depending on unspecified behavior anyway, and thus was never portable; 
as such, such programs should be rare.</span></div>
<div class="paranum"><a name="p44.d.1">44.d.1/5</a></div>
<div class="Annotations">{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI12s/AI12-0195-1.TXT">AI12-0195-1</A></I>} 
<span class="insert5"><B>Correction:</B> Specified that an inherited 
subprogram check both the original and new versions of a class-wide precondition. 
If a call on an inherited subprogram fails the original class-wide precondition 
when it passes the new class-wide precondition, then the call will fail 
the precondition check whereas it would have passed in original Ada 2012. 
(A similar possibility exists for class-wide postconditions.) This can 
only happen if the overriding subprograms somehow fail to follow the 
guidelines of LSP, so this should be rare (the entire point of class-wide 
preconditions and postconditions is to use them in cases where LSP is 
followed).</span>&nbsp;</div>

<H4 Class="centered">Incompatibilities With Ada 2012</H4>
<div class="paranum"><a name="p44.e">44.e/5</a></div>
<div class="Annotations">{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI12s/AI12-0045-1.TXT">AI12-0045-1</A></I>} 
<span class="insert4"></span>{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI12s/AI12-0005-1.TXT">AI12-0005-1</A></I>} 
<span class="insert4"><A NAME="I4158"></A><B>Corrigendum:</B> Precondition 
and postcondition aspects cannot be specified on instances of generic 
subprograms (they should be specified on the generic subprogram instead). 
This was (unintentionally) allowed by the Ada 2012 standard. These are 
not&nbsp;</span><span class="insert4"><span class="delete5">be&nbsp;</span></span><span class="insert4">allowed 
on instances as there is no corresponding way to add preconditions and 
postconditions to subprograms declared within the instance of a generic 
package. Therefore, allowing specification on a subprogram instance could 
present a maintenance problem in the future if the entity needs to be 
converted to a generic package (a common conversion).</span></div>
<div class="paranum"><a name="p44.f">44.f/4</a></div>
<div class="Annotations">{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI12s/AI12-0131-1.TXT">AI12-0131-1</A></I>} 
<span class="insert4"><B>Corrigendum:</B> Pre'Class is no longer allowed 
to be specified for an overriding primitive subprogram unless there are 
also inherited class-wide precondittions. This incompatibility prevents 
cases where the explicit Pre'Class is counterfeited by an implicit class-wide 
precondition of True. This rule should catch more bugs than it creates; 
the programmer should have written Pre rather than Pre'Class in this 
case (or written Pre'Class on the original subprogram, not an overriding). 
Note that this incompatibility eliminates what otherwise would be an 
inconsistency with original Ada 2012, where precondition checks that 
would have previously been made for a statically bound call would no 
longer be made. That dynamic change was necessary to eliminate cases 
where the evaluated class-wide precondition on a dispatching call would 
have been weaker than the class-wide precondition of a statically bound 
call. (The original Ada 2012 violated the LSP semantics that class-wide 
preconditions were intended to model.)</span></div>
<div class="paranum"><a name="p44.g">44.g/5</a></div>
<div class="Annotations">{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI12s/AI12-0198-1.TXT">AI12-0198-1</A></I>} 
<span class="insert5"><B>Correction:</B> A component <SPAN Class="swiss"><A HREF="AA-4-4.html#S0132">expression</A></SPAN> 
in an array aggregate can now be potentially unevaluated, requiring the 
prefix to be statically determined. Existing code that uses the Old attribute 
with a dynamic prefix in such contexts will now be illegal. However, 
in many cases, the existing code will not do what the programmer is expecting 
(as Old is evaluated textually, once per occurrence, while array aggregate 
components are evaluated once per component). In addition, Old is a new 
Ada 2012 feature, so most Ada legacy code will not contain it. The problem 
is usually easily fixed by moving Old to an outer object (such as the 
entire aggregate).</span>&nbsp;</div>

<H4 Class="centered">Extensions to Ada 2012</H4>
<div class="paranum"><a name="p44.h">44.h/5</a></div>
<div class="Annotations">{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI12s/AI12-0143-1.TXT">AI12-0143-1</A></I>} 
<span class="insert5"><A NAME="I4159"></A>The Index attribute is new.</span></div>
<div class="paranum"><a name="p44.i">44.i/5</a></div>
<div class="Annotations">{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI12s/AI12-0217-1.TXT">AI12-0217-1</A></I>} 
<span class="insert5"><B>Correction:</B> The <SPAN Class="swiss"><A HREF="AA-4-1.html#S0093">prefix</A></SPAN> 
of a statically unevaluated Old <SPAN Class="swiss"><A HREF="AA-4-1-4.html#S0100">attribute_reference</A></SPAN> 
can be a <SPAN Class="swiss"><A HREF="AA-4-1-3.html#S0098">selected_component</A></SPAN> 
or <SPAN Class="swiss"><A HREF="AA-4-1-1.html#S0096">indexed_component</A></SPAN>. 
This is considered a correction as the old rule is unintentionally too 
fierce, rejecting safe cases.</span></div>
<div class="paranum"><a name="p44.j">44.j/5</a></div>
<div class="Annotations">{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI12s/AI12-0280-2.TXT">AI12-0280-2</A></I>} 
<span class="insert5">We make no restriction on the <SPAN Class="swiss"><A HREF="AA-4-1.html#S0093">prefix</A></SPAN> 
of an Old <SPAN Class="swiss"><A HREF="AA-4-1-4.html#S0100">attribute_reference</A></SPAN> 
if we can determine when the subprogram is entered (which is the point 
when Old prefixes are evaluated) whether it will be needed in the evaluation 
of the postcondition.</span></div>
<div class="paranum"><a name="p44.k">44.k/5</a></div>
<div class="Annotations">{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI12s/AI12-0220-1.TXT">AI12-0220-1</A></I>} 
<span class="insert5"></span>{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI12s/AI12-0272-1.TXT">AI12-0272-1</A></I>} 
<span class="insert5">Pre and Post can be given on an access-to-subprogram 
type and on a generic formal subprogram.</span></div>
<div class="paranum"><a name="p44.l">44.l/5</a></div>
<div class="Annotations">{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI12s/AI12-0412-1.TXT">AI12-0412-1</A></I>} 
<span class="insert5"><B>Correction:</B> We now allow the definition 
of a concrete subprogram <I>S</I> that has applicable Pre'Class or Post'Class 
expressions that is primitive for an abstract type <I>T</I> even when 
a Pre'Class or Post'Class may call an abstract subprogram. Rather, <I>S</I> 
is treated as if it is abstract (meaning that uses that might require 
evaluating a statically bound Pre'Class or Post'Class expression are 
not allowed).</span>&nbsp;</div>

<H4 Class="centered">Wording Changes from Ada 2012</H4>
<div class="paranum"><a name="p44.m">44.m/5</a></div>
<div class="Annotations">{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI05s/AI05-0170-1.TXT">AI05-0170-1</A></I>} 
<span class="insert5"><B>Correction:</B> Clarified the wording about 
the meaning of the notional type <I>NT</I> and the corresponding expression. 
Both changes follow from other rules but are nonobvious.</span></div>
<div class="paranum"><a name="p44.n">44.n/5</a></div>
<div class="Annotations">{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI05s/AI05-0185-1.TXT">AI05-0185-1</A></I>} 
<span class="insert5"><B>Correction:</B> Removed redundant (and sometimes 
incorrect) wording about the resolution of the Old and Result attributes.</span> 
</div>

<HR>
<div style="margin-top: 0.0em; margin-bottom: 0.6em"><A HREF="AA-TOC.html"><IMG SRC="cont.gif" ALT="Contents" BORDER=0></A>&nbsp;
&nbsp;<A HREF="AA-0-4.html"><IMG SRC="index.gif" ALT="Index" BORDER=0></A>&nbsp;
&nbsp;<A HREF="AA-STDS.html"><IMG SRC="lib.gif" ALT="References" BORDER=0></A>&nbsp;
&nbsp;<A HREF="AA-SRCH.html"><IMG SRC="find.gif" ALT="Search" BORDER=0></A>&nbsp;
&nbsp;<A HREF="AA-6-1.html"><IMG SRC="prev.gif" ALT="Previous" BORDER=0></A>&nbsp;
&nbsp;<A HREF="AA-6-1-2.html"><IMG SRC="next.gif" ALT="Next" BORDER=0></A>&nbsp;
</div>
<DIV Style="margin-top:0.0em"><IMG SRC="AE_logo.gif" height=100 width=113 align=right ALT="Ada-Europe">
<SPAN Style="vertical-align: middle; font-size:120%">Ada 2005 and 2012 Editions sponsored in part by <SPAN Style="font-size: 125%"><A HREF="http://www.ada-europe.org/"><B>Ada-Europe</B></A></SPAN></SPAN></DIV>
</BODY>
</HTML>
