<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
"http://www.w3.org/TR/html4/loose.dtd">
<HTML>
<HEAD>
    <TITLE>Task Execution - Task Activation</TITLE>
    <META http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
    <META NAME="Author" CONTENT="JTC1/SC22/WG9/ARG, by Randall Brukardt, ARG Editor">
    <META NAME="GENERATOR" CONTENT="Arm_Form.Exe, Ada Reference Manual generator">
    <STYLE type="text/css">
    H4.centered {text-align: center}
    SPAN.swiss {font-family: Arial, Helvetica, sans-serif; font-size: 92%}
    SPAN.roman {font-family: "Times New Roman", Times, serif}
    DIV.paranum {float: left; font-family: Arial, Helvetica, sans-serif; font-size: 64%; width: 2.8em; margin-left: -0.4em; margin-right: -3.0em; margin-top: 0.2em}
    TT {font-family: "Courier New", monospace}
    DT {display: compact}
    DIV.Normal {font-family: "Times New Roman", Times, serif; line-height: 122%; margin-left: 1.2em; margin-bottom: 0.6em}
    DIV.Notes {font-family: "Times New Roman", Times, serif; font-size: 80%; line-height: 122%; margin-left: 3.7em; margin-bottom: 0.6em}
    DIV.NotesHeader {font-family: "Times New Roman", Times, serif; font-size: 80%; line-height: 122%; margin-left: 3.7em}
    DIV.Examples {font-family: "Courier New", monospace; font-size: 90%; line-height: 122%; margin-left: 3.4em; margin-bottom: 0.6em}
    </STYLE>
</HEAD>
<BODY TEXT="#000000" BGCOLOR="#FFFFF0" LINK="#000080" VLINK="#330033" ALINK="#0000FF">
<DIV><SPAN Style="font-size:200%; color: rgb(0,0,153)"><B>Ada Reference Manual</B></SPAN> &mdash; <A HREF="RM-TTL.html"><B>Legal Information</B></A></DIV>
<DIV Style="margin-top: 0.6em; margin-bottom: 0.0em"><A HREF="RM-TOC.html"><IMG SRC="cont.gif" ALT="Contents" BORDER=0></A>&nbsp;
&nbsp;<A HREF="RM-0-5.html"><IMG SRC="index.gif" ALT="Index" BORDER=0></A>&nbsp;
&nbsp;<A HREF="RM-STDS.html"><IMG SRC="lib.gif" ALT="References" BORDER=0></A>&nbsp;
&nbsp;<A HREF="RM-SRCH.html"><IMG SRC="find.gif" ALT="Search" BORDER=0></A>&nbsp;
&nbsp;<A HREF="RM-9-1.html"><IMG SRC="prev.gif" ALT="Previous" BORDER=0></A>&nbsp;
&nbsp;<A HREF="RM-9-3.html"><IMG SRC="next.gif" ALT="Next" BORDER=0></A>&nbsp;
</DIV>
<HR>
<H1>9.2 Task Execution - Task Activation</H1>

<H4 Class="centered">Dynamic Semantics</H4>
<DIV Class="paranum">1</DIV>
<DIV Class="Normal"><A NAME="I3542"></A>The execution of a task of a 
given task type consists of the execution of the corresponding <SPAN Class="swiss"><A HREF="RM-9-1.html#S0192">task_body</A></SPAN>. 
<A NAME="I3543"></A><A NAME="I3544"></A><A NAME="I3545"></A><A NAME="I3546"></A>The 
initial part of this execution is called the <I>activation</I> of the 
task; it consists of the elaboration of the <SPAN Class="swiss"><A HREF="RM-3-11.html#S0086">declarative_part</A></SPAN> 
of the <SPAN Class="swiss"><A HREF="RM-9-1.html#S0192">task_body</A></SPAN>. 
<A NAME="I3547"></A>Should an exception be propagated by the elaboration 
of its <SPAN Class="swiss"><A HREF="RM-3-11.html#S0086">declarative_part</A></SPAN>, 
the activation of the task is defined to have <I>failed</I>, and it becomes 
a completed task.</DIV>
<DIV Class="paranum">2/2</DIV>
<DIV Class="Normal">A task object (which represents one task) can be 
a part of a stand-alone object, of an object created by an <SPAN Class="swiss"><A HREF="RM-4-8.html#S0129">allocator</A></SPAN>, 
or of an anonymous object of a limited type, or a coextension of one 
of these. All tasks that are part or coextensions of any of the stand-alone 
objects created by the elaboration of <SPAN Class="swiss"><A HREF="RM-3-3-1.html#S0032">object_declaration</A></SPAN>s 
(or <SPAN Class="swiss"><A HREF="RM-12-3.html#S0259">generic_association</A></SPAN>s 
of formal objects of mode <B>in</B>) of a single declarative region are 
activated together. All tasks that are part or coextensions of a single 
object that is not a stand-alone object are activated together.&nbsp;</DIV>
<DIV Class="paranum">3/2</DIV>
<DIV Class="Normal">For the tasks of a given declarative region, the 
activations are initiated within the context of the <SPAN Class="swiss"><A HREF="RM-11-2.html#S0247">handled_sequence_of_statements</A></SPAN> 
(and its associated <SPAN Class="swiss"><A HREF="RM-11-2.html#S0248">exception_handler</A></SPAN>s 
if any &mdash; see <A HREF="RM-11-2.html">11.2</A>), just prior to executing 
the statements of the <SPAN Class="swiss"><A HREF="RM-11-2.html#S0247">handled_sequence_of_statements</A></SPAN>. 
For a package without an explicit body or an explicit <SPAN Class="swiss"><A HREF="RM-11-2.html#S0247">handled_sequence_of_statements</A></SPAN>, 
an implicit body or an implicit <SPAN Class="swiss"><A HREF="RM-5-1.html#S0134">null_statement</A></SPAN> 
is assumed, as defined in <A HREF="RM-7-2.html">7.2</A>.&nbsp;</DIV>
<DIV Class="paranum">4/2</DIV>
<DIV Class="Normal">For tasks that are part or coextensions of a single 
object that is not a stand-alone object, activations are initiated after 
completing any initialization of the outermost object enclosing these 
tasks, prior to performing any other operation on the outermost object. 
In particular, for tasks that are part or coextensions of the object 
created by the evaluation of an <SPAN Class="swiss"><A HREF="RM-4-8.html#S0129">allocator</A></SPAN>, 
the activations are initiated as the last step of evaluating the <SPAN Class="swiss"><A HREF="RM-4-8.html#S0129">allocator</A></SPAN>, 
prior to returning the new access value. For tasks that are part or coextensions 
of an object that is the result of a function call, the activations are 
not initiated until after the function returns.</DIV>
<DIV Class="paranum">5</DIV>
<DIV Class="Normal"><A NAME="I3548"></A><A NAME="I3549"></A>The task 
that created the new tasks and initiated their activations (the <I>activator</I>) 
is blocked until all of these activations complete (successfully or not). 
<A NAME="I3550"></A>Once all of these activations are complete, if the 
activation of any of the tasks has failed (due to the propagation of 
an exception), Tasking_Error is raised in the activator, at the place 
at which it initiated the activations. Otherwise, the activator proceeds 
with its execution normally. Any tasks that are aborted prior to completing 
their activation are ignored when determining whether to raise Tasking_Error. 
</DIV>
<DIV Class="paranum">6</DIV>
<DIV Class="Normal">Should the task that created the new tasks never 
reach the point where it would initiate the activations (due to an abort 
or the raising of an exception), the newly created tasks become terminated 
and are never activated.&nbsp;</DIV>
<DIV Class="NotesHeader">NOTES</DIV>
<DIV Class="paranum">7</DIV>
<DIV Class="Notes">5&nbsp;&nbsp;An entry of a task can be called before 
the task has been activated.</DIV>
<DIV Class="paranum">8</DIV>
<DIV Class="Notes">6&nbsp;&nbsp;If several tasks are activated together, 
the execution of any of these tasks need not await the end of the activation 
of the other tasks.</DIV>
<DIV Class="paranum">9</DIV>
<DIV Class="Notes">7&nbsp;&nbsp;A task can become completed during its 
activation either because of an exception or because it is aborted (see 
<A HREF="RM-9-8.html">9.8</A>).</DIV>

<H4 Class="centered">Examples</H4>
<DIV Class="paranum">10</DIV>
<DIV Class="Normal" Style="margin-bottom: 0.4em"><I>Example of task 
activation:</I>&nbsp;</DIV>
<DIV Class="paranum">11</DIV>
<DIV Class="Examples"><B>procedure</B>&nbsp;P&nbsp;<B>is</B><BR>
&nbsp;&nbsp;&nbsp;A,&nbsp;B&nbsp;:&nbsp;Server;&nbsp;&nbsp;&nbsp;&nbsp;--<SPAN Class="roman"><I>&nbsp;&nbsp;elaborate&nbsp;the&nbsp;task&nbsp;objects&nbsp;A,&nbsp;B</I></SPAN><BR>
&nbsp;&nbsp;&nbsp;C&nbsp;&nbsp;&nbsp;&nbsp;:&nbsp;Server;&nbsp;&nbsp;&nbsp;&nbsp;--<SPAN Class="roman"><I>&nbsp;&nbsp;elaborate&nbsp;the&nbsp;task&nbsp;object&nbsp;C</I></SPAN><BR>
<B>begin</B><BR>
&nbsp;&nbsp;&nbsp;--<SPAN Class="roman"><I>&nbsp;&nbsp;the&nbsp;tasks&nbsp;A,&nbsp;B,&nbsp;C&nbsp;are&nbsp;activated&nbsp;together&nbsp;before&nbsp;the&nbsp;first&nbsp;statement</I></SPAN><BR>
&nbsp;&nbsp;&nbsp;...<BR>
<B>end</B>;</DIV>

<HR>
<DIV Style="margin-top: 0.0em; margin-bottom: 0.6em"><A HREF="RM-TOC.html"><IMG SRC="cont.gif" ALT="Contents" BORDER=0></A>&nbsp;
&nbsp;<A HREF="RM-0-5.html"><IMG SRC="index.gif" ALT="Index" BORDER=0></A>&nbsp;
&nbsp;<A HREF="RM-STDS.html"><IMG SRC="lib.gif" ALT="References" BORDER=0></A>&nbsp;
&nbsp;<A HREF="RM-SRCH.html"><IMG SRC="find.gif" ALT="Search" BORDER=0></A>&nbsp;
&nbsp;<A HREF="RM-9-1.html"><IMG SRC="prev.gif" ALT="Previous" BORDER=0></A>&nbsp;
&nbsp;<A HREF="RM-9-3.html"><IMG SRC="next.gif" ALT="Next" BORDER=0></A>&nbsp;
</DIV>
<DIV Style="margin-top:0.0em"><IMG SRC="AE_logo.gif" height=100 width=113 align=right ALT="Ada-Europe">
<SPAN Style="vertical-align: middle">Sponsored by <SPAN Style="font-size: 125%"><A HREF="http://www.ada-europe.org/"><B>Ada-Europe</B></A></SPAN></SPAN></DIV>
</BODY>
</HTML>
