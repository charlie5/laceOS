<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
"http://www.w3.org/TR/html4/loose.dtd">
<HTML>
<HEAD>
    <TITLE>Context Clauses - With Clauses</TITLE>
    <META http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
    <META NAME="Author" CONTENT="JTC1/SC22/WG9/ARG, by Randall Brukardt, ARG Editor">
    <META NAME="GENERATOR" CONTENT="Arm_Form.Exe, Ada Reference Manual generator">
    <STYLE type="text/css">
    H4.centered {text-align: center}
    SPAN.swiss {font-family: Arial, Helvetica, sans-serif; font-size: 92%}
    SPAN.roman {font-family: "Times New Roman", Times, serif}
    DIV.paranum {float: left; font-family: Arial, Helvetica, sans-serif; font-size: 64%; width: 2.8em; margin-left: -0.4em; margin-right: -3.0em; margin-top: 0.2em}
    TT {font-family: "Courier New", monospace}
    DT {display: compact}
    DIV.Normal {font-family: "Times New Roman", Times, serif; line-height: 122%; margin-left: 1.2em; margin-bottom: 0.6em}
    DIV.Notes {font-family: "Times New Roman", Times, serif; font-size: 80%; line-height: 122%; margin-left: 3.7em; margin-bottom: 0.6em}
    DIV.NotesHeader {font-family: "Times New Roman", Times, serif; font-size: 80%; line-height: 122%; margin-left: 3.7em}
    DIV.SyntaxIndented {font-family: "Times New Roman", Times, serif; line-height: 122%; margin-left: 3.2em; margin-bottom: 0.4em}
    DIV.Examples {font-family: "Courier New", monospace; font-size: 90%; line-height: 122%; margin-left: 3.4em; margin-bottom: 0.6em}
    UL.Bulleted {font-family: "Times New Roman", Times, serif; line-height: 122%; margin-left: 3.2em; margin-right: 2.0em; margin-top: 0em; margin-bottom: 0.5em}
    </STYLE>
</HEAD>
<BODY TEXT="#000000" BGCOLOR="#FFFFF0" LINK="#000080" VLINK="#330033" ALINK="#0000FF">
<DIV><SPAN Style="font-size:200%; color: rgb(0,0,153)"><B>Ada Reference Manual</B></SPAN> &mdash; <A HREF="RM-TTL.html"><B>Legal Information</B></A></DIV>
<DIV Style="margin-top: 0.6em; margin-bottom: 0.0em"><A HREF="RM-TOC.html"><IMG SRC="cont.gif" ALT="Contents" BORDER=0></A>&nbsp;
&nbsp;<A HREF="RM-0-5.html"><IMG SRC="index.gif" ALT="Index" BORDER=0></A>&nbsp;
&nbsp;<A HREF="RM-STDS.html"><IMG SRC="lib.gif" ALT="References" BORDER=0></A>&nbsp;
&nbsp;<A HREF="RM-SRCH.html"><IMG SRC="find.gif" ALT="Search" BORDER=0></A>&nbsp;
&nbsp;<A HREF="RM-10-1-1.html"><IMG SRC="prev.gif" ALT="Previous" BORDER=0></A>&nbsp;
&nbsp;<A HREF="RM-10-1-3.html"><IMG SRC="next.gif" ALT="Next" BORDER=0></A>&nbsp;
</DIV>
<HR>
<H1>10.1.2 Context Clauses - With Clauses</H1>
<DIV Class="paranum">1</DIV>
<DIV Class="Normal">A <SPAN Class="swiss"><A HREF="RM-10-1-2.html#S0235">context_clause</A></SPAN> 
is used to specify the <SPAN Class="swiss"><A HREF="RM-10-1-1.html#S0230">library_item</A></SPAN>s 
whose names are needed within a compilation unit.&nbsp;</DIV>

<H4 Class="centered">Syntax</H4>
<DIV Class="paranum">2</DIV>
<DIV Class="SyntaxIndented"><SPAN Class="swiss">context_clause</SPAN><A NAME="I3961"></A><A NAME="S0235"></A><SPAN Class="swiss">&nbsp;::=&nbsp;</SPAN>{<A NAME="I3962"></A><SPAN Class="swiss"><A HREF="RM-10-1-2.html#S0236">context_item</A></SPAN>}</DIV>
<DIV Class="paranum">3</DIV>
<DIV Class="SyntaxIndented"><SPAN Class="swiss">context_item</SPAN><A NAME="I3963"></A><A NAME="S0236"></A><SPAN Class="swiss">&nbsp;::=&nbsp;</SPAN><A NAME="I3964"></A><SPAN Class="swiss"><A HREF="RM-10-1-2.html#S0237">with_clause</A></SPAN>&nbsp;|&nbsp;<A NAME="I3965"></A><SPAN Class="swiss"><A HREF="RM-8-4.html#S0179">use_clause</A></SPAN></DIV>
<DIV Class="paranum">4/2</DIV>
<DIV Class="SyntaxIndented"><SPAN Class="swiss">with_clause</SPAN><A NAME="I3966"></A><A NAME="S0237"></A><SPAN Class="swiss">&nbsp;::=&nbsp;</SPAN><A NAME="I3967"></A><SPAN Class="swiss"><A HREF="RM-10-1-2.html#S0238">limited_with_clause</A></SPAN>&nbsp;|&nbsp;<A NAME="I3968"></A><SPAN Class="swiss"><A HREF="RM-10-1-2.html#S0239">nonlimited_with_clause</A></SPAN></DIV>
<DIV Class="paranum">4.1/2</DIV>
<DIV Class="SyntaxIndented"><SPAN Class="swiss">limited_with_clause</SPAN><A NAME="I3969"></A><A NAME="S0238"></A><SPAN Class="swiss">&nbsp;::=&nbsp;</SPAN><B>limited</B>&nbsp;[<B>private</B>]&nbsp;<B>with</B>&nbsp;<I>library_unit_</I><A NAME="I3970"></A><SPAN Class="swiss"><A HREF="RM-4-1.html#S0091">name</A></SPAN>&nbsp;{,&nbsp;<I>library_unit_</I><A NAME="I3971"></A><SPAN Class="swiss"><A HREF="RM-4-1.html#S0091">name</A></SPAN>};</DIV>
<DIV Class="paranum">4.2/2</DIV>
<DIV Class="SyntaxIndented"><SPAN Class="swiss">nonlimited_with_clause</SPAN><A NAME="I3972"></A><A NAME="S0239"></A><SPAN Class="swiss">&nbsp;::=&nbsp;</SPAN>[<B>private</B>]&nbsp;<B>with</B>&nbsp;<I>library_unit_</I><A NAME="I3973"></A><SPAN Class="swiss"><A HREF="RM-4-1.html#S0091">name</A></SPAN>&nbsp;{,&nbsp;<I>library_unit_</I><A NAME="I3974"></A><SPAN Class="swiss"><A HREF="RM-4-1.html#S0091">name</A></SPAN>};</DIV>

<H4 Class="centered">Name Resolution Rules</H4>
<DIV Class="paranum">5</DIV>
<DIV Class="Normal"><A NAME="I3975"></A>The <I>scope</I> of a <SPAN Class="swiss"><A HREF="RM-10-1-2.html#S0237">with_clause</A></SPAN> 
that appears on a <SPAN Class="swiss"><A HREF="RM-10-1-1.html#S0231">library_unit_declaration</A></SPAN> 
or <SPAN Class="swiss"><A HREF="RM-10-1-1.html#S0232">library_unit_renaming_declaration</A></SPAN> 
consists of the entire declarative region of the declaration, which includes 
all children and subunits. The scope of a <SPAN Class="swiss"><A HREF="RM-10-1-2.html#S0237">with_clause</A></SPAN> 
that appears on a body consists of the body, which includes all subunits. 
</DIV>
<DIV Class="paranum">6/2</DIV>
<DIV Class="Normal"><A NAME="I3976"></A><A NAME="I3977"></A>A <SPAN Class="swiss"><A HREF="RM-10-1-1.html#S0230">library_item</A></SPAN> 
(and the corresponding library unit) is <I>named</I> <A NAME="I3978"></A><A NAME="I3979"></A>in 
a <SPAN Class="swiss"><A HREF="RM-10-1-2.html#S0237">with_clause</A></SPAN> 
if it is denoted by a <I>library_unit_</I><SPAN Class="swiss"><A HREF="RM-4-1.html#S0091">name</A></SPAN> 
in the <SPAN Class="swiss"><A HREF="RM-10-1-2.html#S0237">with_clause</A></SPAN>. 
A <SPAN Class="swiss"><A HREF="RM-10-1-1.html#S0230">library_item</A></SPAN> 
(and the corresponding library unit) is <I>mentioned</I> in a <SPAN Class="swiss"><A HREF="RM-10-1-2.html#S0237">with_clause</A></SPAN> 
if it is named in the <SPAN Class="swiss"><A HREF="RM-10-1-2.html#S0237">with_clause</A></SPAN> 
or if it is denoted by a <SPAN Class="swiss"><A HREF="RM-4-1.html#S0093">prefix</A></SPAN> 
in the <SPAN Class="swiss"><A HREF="RM-10-1-2.html#S0237">with_clause</A></SPAN>.</DIV>
<DIV Class="paranum">7</DIV>
<DIV Class="Normal">Outside its own declarative region, the declaration 
or renaming of a library unit can be visible only within the scope of 
a <SPAN Class="swiss"><A HREF="RM-10-1-2.html#S0237">with_clause</A></SPAN> 
that mentions it. The visibility of the declaration or renaming of a 
library unit otherwise follows from its placement in the environment. 
</DIV>

<H4 Class="centered">Legality Rules</H4>
<DIV Class="paranum">8/2</DIV>
<DIV Class="Normal">If a <SPAN Class="swiss"><A HREF="RM-10-1-2.html#S0237">with_clause</A></SPAN> 
of a given <SPAN Class="swiss"><A HREF="RM-10-1-1.html#S0229">compilation_unit</A></SPAN> 
mentions a private child of some library unit, then the given <SPAN Class="swiss"><A HREF="RM-10-1-1.html#S0229">compilation_unit</A></SPAN> 
shall be one of:&nbsp;</DIV>
<DIV Class="paranum">9/2</DIV>
<UL Class="Bulleted"><LI TYPE=DISC>the declaration, body, or subunit 
of a private descendant of that library unit;</LI></UL>
<DIV Class="paranum">10/2</DIV>
<UL Class="Bulleted"><LI TYPE=DISC>the body or subunit of a public descendant 
of that library unit, but not a subprogram body acting as a subprogram 
declaration (see <A HREF="RM-10-1-4.html">10.1.4</A>); or</LI></UL>
<DIV Class="paranum">11/2</DIV>
<UL Class="Bulleted"><LI TYPE=DISC>the declaration of a public descendant 
of that library unit, in which case the <SPAN Class="swiss"><A HREF="RM-10-1-2.html#S0237">with_clause</A></SPAN> 
shall include the reserved word <B>private</B>.&nbsp;</LI></UL>
<DIV Class="paranum">12/2</DIV>
<DIV Class="Normal" Style="margin-bottom: 0.4em">&nbsp;A <SPAN Class="swiss"><A HREF="RM-4-1.html#S0091">name</A></SPAN> 
denoting a library item that is visible only due to being mentioned in 
one or more <SPAN Class="swiss"><A HREF="RM-10-1-2.html#S0237">with_clause</A></SPAN>s 
that include the reserved word <B>private</B> shall appear only within: 
</DIV>
<DIV Class="paranum">13/2</DIV>
<UL Class="Bulleted"><LI TYPE=DISC>a private part;</LI></UL>
<DIV Class="paranum">14/2</DIV>
<UL Class="Bulleted"><LI TYPE=DISC>a body, but not within the <SPAN Class="swiss"><A HREF="RM-6-1.html#S0149">subprogram_specification</A></SPAN> 
of a library subprogram body;</LI></UL>
<DIV Class="paranum">15/2</DIV>
<UL Class="Bulleted"><LI TYPE=DISC>a private descendant of the unit on 
which one of these <SPAN Class="swiss"><A HREF="RM-10-1-2.html#S0237">with_clause</A></SPAN>s 
appear; or</LI></UL>
<DIV Class="paranum">16/2</DIV>
<UL Class="Bulleted"><LI TYPE=DISC>a pragma within a context clause. 
</LI></UL>
<DIV Class="paranum">17/2</DIV>
<DIV Class="Normal">&nbsp;A <SPAN Class="swiss"><A HREF="RM-10-1-1.html#S0230">library_item</A></SPAN> 
mentioned in a <SPAN Class="swiss"><A HREF="RM-10-1-2.html#S0238">limited_with_clause</A></SPAN> 
shall be the implicit declaration of the limited view of a library package, 
not the declaration of a subprogram, generic unit, generic instance, 
or a renaming.</DIV>
<DIV Class="paranum">18/2</DIV>
<DIV Class="Normal">&nbsp;A <SPAN Class="swiss"><A HREF="RM-10-1-2.html#S0238">limited_with_clause</A></SPAN> 
shall not appear on a <SPAN Class="swiss"><A HREF="RM-10-1-1.html#S0233">library_unit_body</A></SPAN>, 
<SPAN Class="swiss"><A HREF="RM-10-1-3.html#S0245">subunit</A></SPAN>, 
or <SPAN Class="swiss"><A HREF="RM-10-1-1.html#S0232">library_unit_renaming_declaration</A></SPAN>.</DIV>
<DIV Class="paranum">19/2</DIV>
<DIV Class="Normal" Style="margin-bottom: 0.4em">&nbsp;A <SPAN Class="swiss"><A HREF="RM-10-1-2.html#S0238">limited_with_clause</A></SPAN> 
that names a library package shall not appear:</DIV>
<DIV Class="paranum">20/2</DIV>
<UL Class="Bulleted"><LI TYPE=DISC>in the <SPAN Class="swiss"><A HREF="RM-10-1-2.html#S0235">context_clause</A></SPAN> 
for the explicit declaration of the named library package;</LI></UL>
<DIV Class="paranum">21/2</DIV>
<UL Class="Bulleted"><LI TYPE=DISC>in the same <SPAN Class="swiss"><A HREF="RM-10-1-2.html#S0235">context_clause</A></SPAN> 
as, or within the scope of, a <SPAN Class="swiss"><A HREF="RM-10-1-2.html#S0239">nonlimited_with_clause</A></SPAN> 
that mentions the same library package; or</LI></UL>
<DIV Class="paranum">22/2</DIV>
<UL Class="Bulleted"><LI TYPE=DISC>in the same <SPAN Class="swiss"><A HREF="RM-10-1-2.html#S0235">context_clause</A></SPAN> 
as, or within the scope of, a <SPAN Class="swiss"><A HREF="RM-8-4.html#S0179">use_clause</A></SPAN> 
that names an entity declared within the declarative region of the library 
package.</LI></UL>
<DIV Class="NotesHeader">NOTES</DIV>
<DIV Class="paranum">23/2</DIV>
<DIV Class="Notes">3&nbsp;&nbsp;A <SPAN Class="swiss"><A HREF="RM-10-1-1.html#S0230">library_item</A></SPAN> 
mentioned in a <SPAN Class="swiss"><A HREF="RM-10-1-2.html#S0239">nonlimited_with_clause</A></SPAN> 
of a compilation unit is visible within the compilation unit and hence 
acts just like an ordinary declaration. Thus, within a compilation unit 
that mentions its declaration, the name of a library package can be given 
in <SPAN Class="swiss"><A HREF="RM-8-4.html#S0179">use_clause</A></SPAN>s 
and can be used to form expanded names, a library subprogram can be called, 
and instances of a generic library unit can be declared. If a child of 
a parent generic package is mentioned in a <SPAN Class="swiss"><A HREF="RM-10-1-2.html#S0239">nonlimited_with_clause</A></SPAN>, 
then the corresponding declaration nested within each visible instance 
is visible within the compilation unit. Similarly, a <SPAN Class="swiss"><A HREF="RM-10-1-1.html#S0230">library_item</A></SPAN> 
mentioned in a <SPAN Class="swiss"><A HREF="RM-10-1-2.html#S0238">limited_with_clause</A></SPAN> 
of a compilation unit is visible within the compilation unit and thus 
can be used to form expanded names.</DIV>

<H4 Class="centered">Examples</H4>
<DIV Class="paranum">24/2</DIV>
<DIV Class="Examples"><B>package</B>&nbsp;Office&nbsp;<B>is</B><BR>
<B>end</B>&nbsp;Office;</DIV>
<DIV Class="paranum">25/2</DIV>
<DIV Class="Examples"><B>with</B>&nbsp;Ada.Strings.Unbounded;<BR>
<B>package</B>&nbsp;Office.Locations&nbsp;<B>is</B><BR>
&nbsp;&nbsp;&nbsp;<B>type</B>&nbsp;Location&nbsp;<B>is&nbsp;new</B>&nbsp;Ada.Strings.Unbounded.Unbounded_String;<BR>
<B>end</B>&nbsp;Office.Locations;</DIV>
<DIV Class="paranum">26/2</DIV>
<DIV Class="Examples"><B>limited&nbsp;with</B>&nbsp;Office.Departments;&nbsp;&nbsp;--<SPAN Class="roman"><I>&nbsp;types&nbsp;are&nbsp;incomplete</I></SPAN><BR>
<B>private&nbsp;with</B>&nbsp;Office.Locations;&nbsp;&nbsp;&nbsp;&nbsp;--<SPAN Class="roman"><I>&nbsp;only&nbsp;visible&nbsp;in&nbsp;private&nbsp;part</I></SPAN><BR>
<B>package</B>&nbsp;Office.Employees&nbsp;<B>is</B><BR>
&nbsp;&nbsp;&nbsp;<B>type</B>&nbsp;Employee&nbsp;<B>is&nbsp;private</B>;</DIV>
<DIV Class="paranum">27/2</DIV>
<DIV Class="Examples">&nbsp;&nbsp;&nbsp;<B>function</B>&nbsp;Dept_Of(Emp&nbsp;:&nbsp;Employee)&nbsp;<B>return&nbsp;access</B>&nbsp;Departments.Department;<BR>
&nbsp;&nbsp;&nbsp;<B>procedure</B>&nbsp;Assign_Dept(Emp&nbsp;&nbsp;:&nbsp;<B>in&nbsp;out</B>&nbsp;Employee;<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Dept&nbsp;:&nbsp;<B>access</B>&nbsp;Departments.Department);</DIV>
<DIV Class="paranum">28/2</DIV>
<DIV Class="Examples">&nbsp;&nbsp;&nbsp;...<BR>
<B>private<BR>
&nbsp;&nbsp;&nbsp;type</B>&nbsp;Employee&nbsp;<B>is<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;record</B><BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Dept&nbsp;:&nbsp;<B>access</B>&nbsp;Departments.Department;<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Loc&nbsp;:&nbsp;Locations.Location;<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;...<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<B>end&nbsp;record</B>;<BR>
<B>end</B>&nbsp;Office.Employees;</DIV>
<DIV Class="paranum">29/2</DIV>
<DIV Class="Examples"><B>limited&nbsp;with</B>&nbsp;Office.Employees;<BR>
<B>package</B>&nbsp;Office.Departments&nbsp;<B>is</B><BR>
&nbsp;&nbsp;&nbsp;<B>type</B>&nbsp;Department&nbsp;<B>is&nbsp;private</B>;</DIV>
<DIV Class="paranum">30/2</DIV>
<DIV Class="Examples">&nbsp;&nbsp;&nbsp;<B>function</B>&nbsp;Manager_Of(Dept&nbsp;:&nbsp;Department)&nbsp;<B>return&nbsp;access</B>&nbsp;Employees.Employee;<BR>
&nbsp;&nbsp;&nbsp;<B>procedure</B>&nbsp;Assign_Manager(Dept&nbsp;:&nbsp;<B>in&nbsp;out</B>&nbsp;Department;<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Mgr&nbsp;&nbsp;:&nbsp;<B>access</B>&nbsp;Employees.Employee);<BR>
&nbsp;&nbsp;&nbsp;...<BR>
<B>end</B>&nbsp;Office.Departments;</DIV>
<DIV Class="paranum">31/2</DIV>
<DIV Class="Normal">&nbsp;The <SPAN Class="swiss"><A HREF="RM-10-1-2.html#S0238">limited_with_clause</A></SPAN> 
may be used to support mutually dependent abstractions that are split 
across multiple packages. In this case, an employee is assigned to a 
department, and a department has a manager who is an employee. If a <SPAN Class="swiss"><A HREF="RM-10-1-2.html#S0237">with_clause</A></SPAN> 
with the reserved word <B>private</B> appears on one library unit and 
mentions a second library unit, it provides visibility to the second 
library unit, but restricts that visibility to the private part and body 
of the first unit. The compiler checks that no use is made of the second 
unit in the visible part of the first unit.</DIV>

<HR>
<DIV Style="margin-top: 0.0em; margin-bottom: 0.6em"><A HREF="RM-TOC.html"><IMG SRC="cont.gif" ALT="Contents" BORDER=0></A>&nbsp;
&nbsp;<A HREF="RM-0-5.html"><IMG SRC="index.gif" ALT="Index" BORDER=0></A>&nbsp;
&nbsp;<A HREF="RM-STDS.html"><IMG SRC="lib.gif" ALT="References" BORDER=0></A>&nbsp;
&nbsp;<A HREF="RM-SRCH.html"><IMG SRC="find.gif" ALT="Search" BORDER=0></A>&nbsp;
&nbsp;<A HREF="RM-10-1-1.html"><IMG SRC="prev.gif" ALT="Previous" BORDER=0></A>&nbsp;
&nbsp;<A HREF="RM-10-1-3.html"><IMG SRC="next.gif" ALT="Next" BORDER=0></A>&nbsp;
</DIV>
<DIV Style="margin-top:0.0em"><IMG SRC="AE_logo.gif" height=100 width=113 align=right ALT="Ada-Europe">
<SPAN Style="vertical-align: middle">Sponsored by <SPAN Style="font-size: 125%"><A HREF="http://www.ada-europe.org/"><B>Ada-Europe</B></A></SPAN></SPAN></DIV>
</BODY>
</HTML>
